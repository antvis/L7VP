(self.webpackChunk_antv_li_website=self.webpackChunk_antv_li_website||[]).push([[706],{93707:function(Pt,ot,Q){"use strict";Q.d(ot,{wy:function(){return i},QR:function(){return lt},nK:function(){return Ue},z2:function(){return J}});var Se=Q(69024),P=Q.n(Se),oe=Q(81821),N=Q(28869),i=function(){var U=oe.Modal.useModal(),ue=P()(U,2),be=ue[0],xe=ue[1],ie=(0,N.TH)(),M=function(){ie.pathname.includes("/builder/")||ie.pathname.includes("/app/")?N.m8.push({pathname:"/project"}):N.m8.push({pathname:"/case"})};return{emptyModal:function(H){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M,$=5,le,fe,Pe=be.warning({title:H,content:"".concat($," \u79D2\u540E\u4F1A\u81EA\u52A8\u9000\u5230\u4E0A\u4E00\u9875\u9762\u3002"),onOk:function(){le&&clearInterval(le),fe&&clearTimeout(fe),X()}});le=setInterval(function(){$-=1,Pe.update({content:"".concat($," \u79D2\u540E\u81EA\u52A8\u4F1A\u9000\u5230\u4E0A\u4E00\u9875\u9762\u3002")})},1e3),fe=setTimeout(function(){clearInterval(le),Pe.destroy(),X()},$*1e3)},emptyContextHolder:xe}},Ne=Q(87363);function I(K){var U="https://private-alipayobjects.alipay.com/alipay-rmsdeploy-image/rmsportal/RKuAiriJqrUhyqW.png",ue=new Image,be,xe=function(M){be||(be=!0,ue.src="",K(M))};return ue.onload=function(){return xe("responded")},ue.onerror=function(){return xe("error")},ue.src=U,setTimeout(function(){return xe("timeout")},1500)}var ne="L7VP_DOT_NOT_SHOW_PROMPT_MODAL",Ie;function Ue(){var K=(0,Ne.useState)(!1),U=P()(K,2),ue=U[0],be=U[1];return(0,Ne.useEffect)(function(){var xe;(xe=Ie)!==null&&xe!==void 0||(Ie=new Promise(function(ie){I(function(M){return ie(M!=="timeout"&&M!=="error")})})),Ie.then(be)},[]),ue}function lt(){var K=["li.antv.antgroup.com","locationinsight.antv.antgroup.com"].includes(window.location.hostname),U=Ue(),ue=oe.Modal.useModal(),be=P()(ue,2),xe=be[0],ie=be[1],M=K&&U;return(0,Ne.useEffect)(function(){if(M){var me=window.localStorage.getItem(ne);if(!(me&&me!=="true"&&Date.now()-new Date(me).getTime()<5*24*60*60*1e3)){var H=function(){window.localStorage.setItem(ne,new Date().toISOString())},X=function(){var le=window.location.href.replace(window.location.host,"li.antgroup-inc.cn");window.location.replace(le)};xe.confirm({icon:null,title:"\u63D0\u793A",content:"\u5185\u7F51\u7528\u6237\u63A8\u8350\u8BBF\u95EE\u5185\u7F51\u7248\u4EE5\u83B7\u5F97\u5B8C\u6574\u7684\u529F\u80FD\u4F53\u9A8C\uFF5E",cancelText:"5 \u5929\u5185\u4E0D\u518D\u663E\u793A",okText:"\u7ACB\u5373\u524D\u5F80",onCancel:H,onOk:X})}}},[M]),ie}var G=Q(51490),$e=Q.n(G),tt=Q(91055),et=Q.n(tt),pe=Q(88104),ae=Q.n(pe),se=Q(25435),ve=Q(6079),Ae=Q(12611),je=Q(9256),Ce=Q(81309),J=function(U){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},be=(0,Ne.useState)([]),xe=P()(be,2),ie=xe[0],M=xe[1],me=(0,Ne.useState)(!1),H=P()(me,2),X=H[0],$=H[1],le=(0,Ne.useState)(null),fe=P()(le,2),Pe=fe[0],Le=fe[1],Ze=function(){var ge=ae()($e()().mark(function _e(){var Oe,Re,Ye;return $e()().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return $(!0),Xe.prev=1,Xe.next=4,(0,Ce.nl)();case 4:return Oe=Xe.sent,Array.isArray(U)&&(Oe=Oe.filter(function(ze){return U.includes(ze.assetId)})),Oe=Oe.map(function(ze){return ze.enable===!1?et()(et()({},ze),{},{urls:[]}):ze}),Re=ue.sandbox?et()(et()({},(0,Ae.isObject)(ue.sandbox)?ue.sandbox:{}),{},{injectEnv:(0,je.Rz)()}):!1,Xe.next=10,(0,se.loadAssetPackages)(Oe,et()(et()({},ue),{},{sandbox:Re}));case 10:Ye=Xe.sent,M(Ye),Xe.next=17;break;case 14:Xe.prev=14,Xe.t0=Xe.catch(1),Le(new Error("\u8D44\u4EA7\u8BF7\u6C42\u6216\u52A0\u8F7D\u5931\u8D25, ".concat(Xe.t0)));case 17:return Xe.prev=17,$(!1),Xe.finish(17);case 20:case"end":return Xe.stop()}},_e,null,[[1,14,17,20]])}));return function(){return ge.apply(this,arguments)}}();return(0,ve.Z)(function(){Ze()},[U]),{assets:ie,loading:X,error:Pe}}},84533:function(Pt,ot,Q){"use strict";Q.d(ot,{oy:function(){return Ne},C_:function(){return oe},sP:function(){return Se},Vw:function(){return G},TL:function(){return lt},wd:function(){return P},c3:function(){return N},QC:function(){return i},tE:function(){return ne},zi:function(){return Ue},e8:function(){return Ie}});var Se="v0.1",P={version:Se,metadata:{name:"li application",description:"li empty application"},datasets:[],spec:{map:{basemap:"Gaode",config:{zoom:3,center:[120.153576,30.287459],pitch:0,bearing:0,style:"light"}},layers:[],widgets:[]}};window._AMapSecurityConfig={securityJsCode:"8803c38931b6fddc9bbfeee69df8824d"};var oe="f0230f884bbd54e2913c890cdf45aa7e",N="pk.eyJ1IjoibGl1dmlnb25nenVvc2hpIiwiYSI6ImNsYWx2dHlxOTA5NGYzeW9icGd6aDE2NnoifQ.T3wEAOe8HReAyoeu6d6HJw",i=[["lat","lng"],["lat","lon"],["lat","long"],["latitude","longitude"],["\u7EAC\u5EA6","\u7ECF\u5EA6"],["\u8D77\u70B9\u7EAC\u5EA6","\u8D77\u70B9\u7ECF\u5EA6"],["\u7EC8\u70B9\u7EAC\u5EA6","\u7EC8\u70B9\u7ECF\u5EA6"]],Ne=["alt","altitude","\u6D77\u62D4"],I=Q(36268),ne=[I.rd,I.G9,I.kk,I.I6,I.u0,I.Sf,I.a,I.T,I.sP,I.D7,I.gt],Ie=new Map([["Layout","\u5E03\u5C40\u7EC4\u4EF6"],["Container","\u5BB9\u5668\u7EC4\u4EF6"],["LayerInteraction","\u56FE\u5C42\u4EA4\u4E92\u7EC4\u4EF6"],["DataAnalysis","\u6570\u636E\u5206\u6790\u7EC4\u4EF6"],["MapControl","\u5730\u56FE\u63A7\u4EF6\u7EC4\u4EF6"],["MapInteraction","\u5730\u56FE\u4EA4\u4E92\u7EC4\u4EF6"]]),Ue={Layout:"Layout",Container:"Container",Atom:"Atom",Auto:"Auto"},lt=["Atom","Container"],G={id:"",slot:""}},66154:function(Pt,ot,Q){"use strict";Q.d(ot,{Sr:function(){return pe},OA:function(){return i},UT:function(){return Ne},ox:function(){return oe},sZ:function(){return N},F8:function(){return ae}});var Se=Q(87363),P=Q(613),oe=function(){var ve=(0,P._)(),Ae=ve.appService,je=ve.editorService;return{appService:Ae,editorService:je}},N=function(){var ve=oe(),Ae=ve.editorService,je=Ae.editorState,Ce=(0,Se.useSyncExternalStore)(function(U){return je.subscribe(U)},function(){return je.getSnapshot()}),J=(0,Se.useMemo)(function(){return je.setState.bind(je)},[je]),K={state:Ce,updateState:J};return K},i=function(ve){var Ae=oe(),je=Ae.editorService,Ce=je.editorDatasetManager,J=(0,Se.useSyncExternalStore)(function(U){return Ce.subscribe(U)},function(){return Ce.getSnapshot()}),K=J.find(function(U){return U.id===ve});return K},Ne=function(){var ve=oe(),Ae=ve.editorService,je=Ae.editorDatasetManager,Ce=(0,Se.useSyncExternalStore)(function(K){return je.subscribe(K)},function(){return je.getSnapshot()}),J=je.isLoading;return{editorDatasets:Ce,isLoading:J}},I=Q(81821);function ne(se){"@babel/helpers - typeof";return ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},ne(se)}function Ie(se,ve){var Ae=Object.keys(se);if(Object.getOwnPropertySymbols){var je=Object.getOwnPropertySymbols(se);ve&&(je=je.filter(function(Ce){return Object.getOwnPropertyDescriptor(se,Ce).enumerable})),Ae.push.apply(Ae,je)}return Ae}function Ue(se){for(var ve=1;ve<arguments.length;ve++){var Ae=arguments[ve]!=null?arguments[ve]:{};ve%2?Ie(Object(Ae),!0).forEach(function(je){lt(se,je,Ae[je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(Ae)):Ie(Object(Ae)).forEach(function(je){Object.defineProperty(se,je,Object.getOwnPropertyDescriptor(Ae,je))})}return se}function lt(se,ve,Ae){return ve=G(ve),ve in se?Object.defineProperty(se,ve,{value:Ae,enumerable:!0,configurable:!0,writable:!0}):se[ve]=Ae,se}function G(se){var ve=$e(se,"string");return ne(ve)=="symbol"?ve:String(ve)}function $e(se,ve){if(ne(se)!="object"||!se)return se;var Ae=se[Symbol.toPrimitive];if(Ae!==void 0){var je=Ae.call(se,ve||"default");if(ne(je)!="object")return je;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ve==="string"?String:Number)(se)}var tt=I.ConfigProvider.ConfigContext,et=function(){return(0,Se.useContext)(tt)},pe=function(){var ve=et(),Ae=ve.getPrefixCls,je=Ae(),Ce=I.theme.useToken,J=Ce(),K=J.token;return Ue(Ue({},K),{},{antCls:".".concat(je)})},ae=function(ve,Ae){var je,Ce=(je=Ae==null?void 0:Ae.prefixCls)!==null&&je!==void 0?je:"li-";return"".concat(Ce).concat(ve!=null?ve:"")}},613:function(Pt,ot,Q){"use strict";Q.d(ot,{s:function(){return N},_:function(){return i}});var Se=Q(87363),P=Q.n(Se),oe={},N=P().createContext(oe),i=function(){var I=P().useContext(N);if(I===void 0||Object.keys(I).length===0)throw new Error("useEditorContext must be used within a LIEditorContext.Provider");return I}},87971:function(Pt,ot,Q){"use strict";Q.d(ot,{Ec:function(){return yi},cq:function(){return pe.cq},BP:function(){return pe.BP},ZQ:function(){return pe.ZQ},sk:function(){return pe.sk},kF:function(){return pe.kF},OA:function(){return Ue.OA},ox:function(){return Ue.ox},sZ:function(){return Ue.sZ}});var Se=Q(84533),P=Q(87363),oe=Q.n(P),N=Q(75262),i=Q(25435),Ne=Q(613),I=Q(81821),ne=Q(90005),Ie=Q.n(ne),Ue=Q(66154),lt=Q(20859),G=Q(64632),$e=Q(90158),tt=Q(12611),et=Q(21906),pe=Q(73788),ae=Q(8177);function se(v){"@babel/helpers - typeof";return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},se(v)}function ve(v,d){var O=Object.keys(v);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(v);d&&(T=T.filter(function(te){return Object.getOwnPropertyDescriptor(v,te).enumerable})),O.push.apply(O,T)}return O}function Ae(v){for(var d=1;d<arguments.length;d++){var O=arguments[d]!=null?arguments[d]:{};d%2?ve(Object(O),!0).forEach(function(T){je(v,T,O[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(O)):ve(Object(O)).forEach(function(T){Object.defineProperty(v,T,Object.getOwnPropertyDescriptor(O,T))})}return v}function je(v,d,O){return d=Ce(d),d in v?Object.defineProperty(v,d,{value:O,enumerable:!0,configurable:!0,writable:!0}):v[d]=O,v}function Ce(v){var d=J(v,"string");return se(d)=="symbol"?d:String(d)}function J(v,d){if(se(v)!="object"||!v)return v;var O=v[Symbol.toPrimitive];if(O!==void 0){var T=O.call(v,d||"default");if(se(T)!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(v)}var K=function(d){var O=Ae(Ae({},Se.wd),{},{metadata:{name:d,description:"li empty application"}});return O},U=function(d){var O=(0,i.parseVersion)(d.version),T={version:O,metadata:(0,ae.zW)(d.metadata),datasets:(0,ae.Rv)(d.datasets),spec:{map:(0,ae.ZA)(d.spec.map),layers:(0,ae.TL)(d.spec.layers),widgets:(0,ae.t3)(d.spec.widgets)}};return T},ue=function(d){var O=d.metadata,T=(0,ae.lw)(d.datasets),te=(0,ae.iS)(d.spec.layers),Ee=(0,ae.DN)(d.spec.widgets),De={version:Se.sP,metadata:O,datasets:T,spec:{map:d.spec.map,layers:te,widgets:Ee}};return De},be=function(d){var O=ue({version:Se.sP,metadata:d.metadata,datasets:d.datasets,spec:{map:d.map,layers:d.layers,widgets:d.widgets}});return O};function xe(v){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},xe(v)}function ie(v,d){return $(v)||X(v,d)||me(v,d)||M()}function M(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(v,d){if(v){if(typeof v=="string")return H(v,d);var O=Object.prototype.toString.call(v).slice(8,-1);if(O==="Object"&&v.constructor&&(O=v.constructor.name),O==="Map"||O==="Set")return Array.from(v);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return H(v,d)}}function H(v,d){(d==null||d>v.length)&&(d=v.length);for(var O=0,T=new Array(d);O<d;O++)T[O]=v[O];return T}function X(v,d){var O=v==null?null:typeof Symbol!="undefined"&&v[Symbol.iterator]||v["@@iterator"];if(O!=null){var T,te,Ee,De,Ke=[],Be=!0,Qe=!1;try{if(Ee=(O=O.call(v)).next,d===0){if(Object(O)!==O)return;Be=!1}else for(;!(Be=(T=Ee.call(O)).done)&&(Ke.push(T.value),Ke.length!==d);Be=!0);}catch(ut){Qe=!0,te=ut}finally{try{if(!Be&&O.return!=null&&(De=O.return(),Object(De)!==De))return}finally{if(Qe)throw te}}return Ke}}function $(v){if(Array.isArray(v))return v}function le(v,d){var O=Object.keys(v);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(v);d&&(T=T.filter(function(te){return Object.getOwnPropertyDescriptor(v,te).enumerable})),O.push.apply(O,T)}return O}function fe(v){for(var d=1;d<arguments.length;d++){var O=arguments[d]!=null?arguments[d]:{};d%2?le(Object(O),!0).forEach(function(T){Pe(v,T,O[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(O)):le(Object(O)).forEach(function(T){Object.defineProperty(v,T,Object.getOwnPropertyDescriptor(O,T))})}return v}function Pe(v,d,O){return d=Le(d),d in v?Object.defineProperty(v,d,{value:O,enumerable:!0,configurable:!0,writable:!0}):v[d]=O,v}function Le(v){var d=Ze(v,"string");return xe(d)=="symbol"?d:String(d)}function Ze(v,d){if(xe(v)!="object"||!v)return v;var O=v[Symbol.toPrimitive];if(O!==void 0){var T=O.call(v,d||"default");if(xe(T)!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(v)}function ge(v){var d=v.error,O=v.resetErrorBoundary;return oe().createElement("div",{style:{padding:20}},oe().createElement("p",null,"\u6E32\u67D3\u51FA\u9519\u4E86\uFF0C\u8BF7\u68C0\u67E5\u914D\u7F6E\u8D44\u4EA7\u662F\u5426\u6709\u8BEF\uFF1A"),oe().createElement("pre",{style:{color:"red"}},d.message))}function _e(v){return fe(fe({},v),{},{spec:fe(fe({},v.spec),{},{map:(0,tt.cloneDeep)(v.spec.map)})})}var Oe=function(d){var O=d.className,T=d.style,te=d.App,Ee=(0,Ue.ox)(),De=Ee.editorService,Ke=(0,Ue.sZ)(),Be=Ke.state,Qe=(0,P.useState)(_e(be(Be))),ut=ie(Qe,2),dt=ut[0],mt=ut[1],Ot=(0,lt.Z)(fe(fe({},dt),{},{metadata:Be.metadata})),nt=(0,G.Z)((0,tt.debounce)(function(){De.publishEvent("change",ue(Ot.current))},300));return(0,$e.Z)(function(){mt(function(ct){return fe(fe({},ct),{},{spec:fe(fe({},ct.spec),{},{map:Be.map})})}),nt()},[Be.map]),(0,$e.Z)(function(){mt(function(ct){return fe(fe({},ct),{},{datasets:(0,pe.lw)(Be.datasets)})}),nt()},[Be.datasets]),(0,$e.Z)(function(){mt(function(ct){return fe(fe({},ct),{},{spec:fe(fe({},ct.spec),{},{layers:(0,pe.iS)(Be.layers)})})}),nt()},[Be.layers]),(0,$e.Z)(function(){mt(function(ct){return fe(fe({},ct),{},{spec:fe(fe({},ct.spec),{},{widgets:(0,pe.DN)(Be.widgets)})})}),nt()},[Be.widgets]),oe().createElement(et.SV,{fallbackRender:ge},oe().createElement(te,{className:Ie()(O),config:dt,style:T}))},Re=Oe,Ye=Q(87651),Ge,Xe,ze,at,_t;function gt(v,d){return d||(d=v.slice(0)),Object.freeze(Object.defineProperties(v,{raw:{value:Object.freeze(d)}}))}var bt=function(){var d=(0,Ue.Sr)(),O=d.colorText,T=d.colorPrimaryTextActive;return{navMenu:(0,Ye.iv)(Ge||(Ge=gt([`
      width: 100%;
      margin: 0;
      padding: 0;
      text-align: center;
    `]))),menuItem:(0,Ye.iv)(Xe||(Xe=gt([`
      position: relative;
      display: flex;
      flex-direction: column;
      padding: 10px 0;
      color: `,`;
      text-align: center;
      cursor: pointer;

      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -3px;
        display: block;
        width: 3px;
        border-radius: 0 100px 100px 0;
        visibility: hidden;
        transition: left 0.4s ease-in;
        content: '';
      }
    `])),O),menuItemActive:(0,Ye.iv)(ze||(ze=gt([`
      color: `,`;

      &::before {
        left: 0;
        background: `,`;
        visibility: visible;
      }
    `])),T,T),menuItemIcon:(0,Ye.iv)(at||(at=gt([`
      padding: 4px 0;
      font-size: 18px;
      line-height: 1;
    `]))),menuItemTitle:(0,Ye.iv)(_t||(_t=gt([`
      padding: 2px 0;
      font-weight: bold;
      font-size: 12px;
      line-height: 1;
      white-space: nowrap;
    `])))}},Ct=bt;function xt(v){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},xt(v)}function It(v,d,O){return d=Qt(d),d in v?Object.defineProperty(v,d,{value:O,enumerable:!0,configurable:!0,writable:!0}):v[d]=O,v}function Qt(v){var d=Ut(v,"string");return xt(d)=="symbol"?d:String(d)}function Ut(v,d){if(xt(v)!="object"||!v)return v;var O=v[Symbol.toPrimitive];if(O!==void 0){var T=O.call(v,d||"default");if(xt(T)!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(v)}var Zt=function(d){var O=d.className,T=d.selectedKey,te=d.items,Ee=d.onChange,De=(0,Ue.F8)("nav-menu"),Ke=Ct();return oe().createElement("ul",{className:Ie()(De,Ke.navMenu,O)},te.map(function(Be){var Qe=Be.icon,ut=Be.key,dt=Be.name,mt=ut===T;return oe().createElement(I.Tooltip,{key:ut,placement:"right",title:dt},oe().createElement("li",{onClick:function(){Ee(Be.key)},className:Ie()("".concat(De,"__item"),Ke.menuItem,It(It({},Ke.menuItemActive,mt),"".concat(De,"__item-active"),mt))},oe().createElement("span",{className:Ie()("".concat(De,"__item-icon"),Ke.menuItemIcon,O)},Qe)))}))},Ft=Zt,At,Lt,we;function de(v,d){return d||(d=v.slice(0)),Object.freeze(Object.defineProperties(v,{raw:{value:Object.freeze(d)}}))}var he=function(){var d=(0,Ue.Sr)(),O=d.colorBgContainer;return{sideNav:(0,Ye.iv)(At||(At=de([`
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 46px;
      background-color: `,`;
    `])),O),sideNavMenu:(0,Ye.iv)(Lt||(Lt=de([`
      margin-top: 0;
    `]))),sideNavBottom:(0,Ye.iv)(we||(we=de([`
      margin-top: auto;
      padding-bottom: 25px;
    `])))}},Me=he,He=function(d){var O,T,te=(0,Ue.F8)("side-nav"),Ee=Me(),De=(0,Ne._)(),Ke=De.containerSlotMap,Be=De.editorService,Qe=(0,Ue.sZ)(),ut=Qe.state,dt=Qe.updateState,mt=((O=Ke.SideNav)===null||O===void 0?void 0:O.top)||[],Ot=(0,P.useMemo)(function(){return Be.getNavMenuList()},[]),nt=((T=Ke.SideNav)===null||T===void 0?void 0:T.bottom)||[],ct=function(pr){dt(function(er){er.activeNavMenuKey=pr,er.collapsed&&(er.collapsed=!1),Be.publishEvent("select-nav-menu",pr)})};return oe().createElement("div",{className:Ie()("".concat(te),Ee.sideNav,d.className)},oe().createElement("div",{className:"li-side-nav__top"},mt.map(function(ht){return oe().createElement(ht.component,{key:ht.metadata.name})})),oe().createElement(Ft,{className:Ie()("".concat(te,"__nemu"),Ee.sideNavMenu),selectedKey:ut.activeNavMenuKey,items:Ot,onChange:ct}),oe().createElement("div",{className:Ie()("".concat(te,"__bottom"),Ee.sideNavBottom)},oe().createElement(I.Space,{direction:"vertical",size:"middle"},nt.map(function(ht){return oe().createElement(ht.component,{key:ht.metadata.name})}))))},We=He,rt,Ve,it;function Et(v,d){return d||(d=v.slice(0)),Object.freeze(Object.defineProperties(v,{raw:{value:Object.freeze(d)}}))}var wt=function(){var d=(0,Ue.Sr)(),O=d.colorSplit,T=d.boxShadowSecondary;return{sidePanel:(0,Ye.iv)(rt||(rt=Et([`
      display: flex;
      flex-direction: column;
      height: 100%;
      border-left: 1px solid `,`;
      box-shadow: `,`;
    `])),O,T),panelHeader:(0,Ye.iv)(Ve||(Ve=Et([`
      padding: 0 20px;
    `]))),panelContent:(0,Ye.iv)(it||(it=Et([`
      overflow: hidden;
    `])))}},jt=wt,Do=function(d){var O=d.className,T=(0,Ue.F8)("side-panel"),te=jt(),Ee=(0,Ne._)(),De=Ee.editorService,Ke=(0,Ue.sZ)(),Be=Ke.state,Qe=(0,P.useMemo)(function(){return De.getNavMenuList()},[]),ut=Qe.find(function(Ot){return Ot.key===Be.activeNavMenuKey}),dt=ut,mt=dt.component;return oe().createElement("div",{className:Ie()("".concat(T),te.sidePanel,O)},oe().createElement("div",{className:Ie()("".concat(T,"__header"),te.panelHeader)}),oe().createElement(mt,{className:Ie()("".concat(T,"__content"),te.panelContent)}))},To=Do,Tr,Nt,Fo,Lo,Jt,Fr,lr;function Vt(v,d){return d||(d=v.slice(0)),Object.freeze(Object.defineProperties(v,{raw:{value:Object.freeze(d)}}))}var La=function(){var d=(0,Ue.Sr)(),O=d.colorBgLayout,T=d.colorBgContainer,te=d.colorFillSecondary,Ee=d.colorFill,De=d.colorText,Ke=d.colorTextSecondary,Be=d.borderRadius;return{editorLayout:(0,Ye.iv)(Tr||(Tr=Vt([`
      position: relative;
      display: flex;

      /* \u6EDA\u52A8\u6761\u6574\u4F53\u90E8\u5206,\u5FC5\u987B\u8981\u8BBE\u7F6E */
      ::-webkit-scrollbar {
        width: 7px;
        height: 7px;
        appearance: none;
      }

      /* \u6EDA\u52A8\u6761\u7684\u6ED1\u5757\u6309\u94AE */
      ::-webkit-scrollbar-thumb {
        background: `,`;
        border-radius: 3px;
        cursor: pointer;

        &:hover {
          background-color: `,`;
        }
      }

      /* \u6EDA\u52A8\u6761\u7684\u8F68\u9053 */
      ::-webkit-scrollbar-track {
        background: none;
        border-radius: 0;
      }
    `])),te,Ee),loading:(0,Ye.iv)(Nt||(Nt=Vt([`
      position: absolute;
      top: 30px;
      left: 50%;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: space-around;
      width: 180px;
      margin-left: 50px;
      padding: 15px;
      color: `,`;
      background-color: `,`;
      border-radius: `,`px;
    `])),Ke,T,Be),left:(0,Ye.iv)(Fo||(Fo=Vt([`
      position: relative;
      display: flex;
      color: `,`;
      background-color: `,`;
    `])),De,O),sideNav:(0,Ye.iv)(Lo||(Lo=Vt([`
      z-index: 2;
    `]))),sidePanel:(0,Ye.iv)(Jt||(Jt=Vt([`
      z-index: 1;
      width: 350px;
      transition: width 50ms ease 0s;

      &_hidden {
        width: 0;
        visibility: hidden;
      }
    `]))),sidePanelHidden:(0,Ye.iv)(Fr||(Fr=Vt([`
      width: 0;
      visibility: hidden;
    `]))),cavans:(0,Ye.iv)(lr||(lr=Vt([`
      flex: 1;
      overflow: hidden;
      text-align: center;
      transition: width 50ms ease 0s;
    `])))}},Na=La;function qt(v){"@babel/helpers - typeof";return qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},qt(v)}function Ma(v,d,O){return d=Ra(d),d in v?Object.defineProperty(v,d,{value:O,enumerable:!0,configurable:!0,writable:!0}):v[d]=O,v}function Ra(v){var d=No(v,"string");return qt(d)=="symbol"?d:String(d)}function No(v,d){if(qt(v)!="object"||!v)return v;var O=v[Symbol.toPrimitive];if(O!==void 0){var T=O.call(v,d||"default");if(qt(T)!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(v)}function Ba(v,d){return Wa(v)||Ro(v,d)||Ya(v,d)||ka()}function ka(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ya(v,d){if(v){if(typeof v=="string")return Mo(v,d);var O=Object.prototype.toString.call(v).slice(8,-1);if(O==="Object"&&v.constructor&&(O=v.constructor.name),O==="Map"||O==="Set")return Array.from(v);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return Mo(v,d)}}function Mo(v,d){(d==null||d>v.length)&&(d=v.length);for(var O=0,T=new Array(d);O<d;O++)T[O]=v[O];return T}function Ro(v,d){var O=v==null?null:typeof Symbol!="undefined"&&v[Symbol.iterator]||v["@@iterator"];if(O!=null){var T,te,Ee,De,Ke=[],Be=!0,Qe=!1;try{if(Ee=(O=O.call(v)).next,d===0){if(Object(O)!==O)return;Be=!1}else for(;!(Be=(T=Ee.call(O)).done)&&(Ke.push(T.value),Ke.length!==d);Be=!0);}catch(ut){Qe=!0,te=ut}finally{try{if(!Be&&O.return!=null&&(De=O.return(),Object(De)!==De))return}finally{if(Qe)throw te}}return Ke}}function Wa(v){if(Array.isArray(v))return v}var Ha={token:{zIndexPopupBase:1100}},za=function(d){var O=d.className,T=d.style,te=d.App,Ee=I.notification.useNotification(),De=Ba(Ee,2),Ke=De[0],Be=De[1],Qe=(0,Ue.sZ)(),ut=Qe.state,dt=(0,Ue.UT)(),mt=dt.editorDatasets,Ot=dt.isLoading,nt=(0,Ue.F8)("editor-layout"),ct=Na();return(0,P.useEffect)(function(){mt.forEach(function(ht){ht.isLoadingError&&ht.error&&Ke.error({message:'\u6570\u636E\u96C6"'.concat(ht.metadata.name,'"\u8BF7\u6C42\u5931\u8D25'),description:ht.error.message})})},[mt]),oe().createElement("div",{className:Ie()("".concat(nt),ct.editorLayout,O),style:T},oe().createElement(I.ConfigProvider,{theme:Ha},Be,Ot&&oe().createElement("div",{className:Ie()("".concat(nt,"__loading"),ct.loading)},oe().createElement(I.Spin,null),oe().createElement("span",null,"\u6570\u636E\u96C6\u52A0\u8F7D\u4E2D...")),oe().createElement("div",{className:Ie()("".concat(nt,"__left"),ct.left)},oe().createElement(We,{className:Ie()("".concat(nt,"__side-nav"),ct.sideNav)}),oe().createElement(To,{className:Ie()("".concat(nt,"__side-panel"),ct.sidePanel,Ma({},ct.sidePanelHidden,ut.collapsed))}))),oe().createElement(Re,{className:Ie()("".concat(nt,"__cavans"),ct.cavans),App:te}))},Ua=za;function ur(v){"@babel/helpers - typeof";return ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},ur(v)}function Bo(v,d){if(!(v instanceof d))throw new TypeError("Cannot call a class as a function")}function Xt(v,d){for(var O=0;O<d.length;O++){var T=d[O];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,ko(T.key),T)}}function Va(v,d,O){return d&&Xt(v.prototype,d),O&&Xt(v,O),Object.defineProperty(v,"prototype",{writable:!1}),v}function Ga(v,d,O){return d=ko(d),d in v?Object.defineProperty(v,d,{value:O,enumerable:!0,configurable:!0,writable:!0}):v[d]=O,v}function ko(v){var d=Yo(v,"string");return ur(d)=="symbol"?d:String(d)}function Yo(v,d){if(ur(v)!="object"||!v)return v;var O=v[Symbol.toPrimitive];if(O!==void 0){var T=O.call(v,d||"default");if(ur(T)!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(v)}var Ka={version:"noop",metadata:{name:"noop",displayName:"noop",type:"Dataset"},service:function(){return Promise.resolve([])}},Qa=function(){function v(d){Bo(this,v),Ga(this,"runtimeApp",void 0),this.runtimeApp=d}return Va(v,[{key:"installAssets",value:function(O){this.runtimeApp.installAssets(O)}},{key:"getImplementWidgetsMap",value:function(){return this.runtimeApp.registryManager.widgets}},{key:"getImplementServicesMap",value:function(){return this.runtimeApp.registryManager.services}},{key:"getImplementWidget",value:function(O){var T=this.getImplementWidgetsMap().get(O);return T||console.warn("\u7EC4\u4EF6 ".concat(O," \u672A\u5728\u8D44\u4EA7\u4E2D.")),T}},{key:"getImplementWidgets",value:function(){var O=this.runtimeApp.registryManager,T=O.getAllWidgets();return T}},{key:"getImplementService",value:function(O){var T=this.getImplementServicesMap().get(O);return T||console.warn("\u670D\u52A1 ".concat(O," \u672A\u5728\u8D44\u4EA7\u4E2D.")),T}},{key:"getImplementServices",value:function(){var O=this.runtimeApp.registryManager;return O.getAllServices()}},{key:"getImplementDatasetServices",value:function(){return this.getImplementServices().filter(function(O){return O.metadata.type==="Dataset"})}},{key:"getImplementDatasetService",value:function(O){var T=this.getImplementServicesMap().get(O);return T?T.metadata.type!=="Dataset"&&console.error("".concat(O," \u4E0D\u5C5E\u4E8E\u6570\u636E\u96C6\u67E5\u8BE2\u670D\u52A1.")):console.error("\u6570\u636E\u96C6\u67E5\u8BE2\u670D\u52A1 ".concat(O," \u672A\u5728\u8D44\u4EA7\u4E2D.")),T||Ka}},{key:"getLayoutWidget",value:function(O){var T=this,te=O.find(function(Ee){var De=T.getImplementWidget(Ee.type),Ke=(De==null?void 0:De.metadata.type)==="Layout";return Ke});return te}},{key:"isAtomWidget",value:function(O){var T=this.getImplementWidget(O.type);if(!T)return!1;var te=Se.TL.includes(T==null?void 0:T.metadata.type);return te}},{key:"getAtomWidgets",value:function(O,T){var te=this,Ee=O.filter(function(De){var Ke=De.container&&De.container.id!==(Se.Vw===null||Se.Vw===void 0?void 0:Se.Vw.id)&&De.container.id!==T;if(Ke)return!1;var Be=te.isAtomWidget(De);return Be});return Ee}},{key:"getContainerWidgetSlotMap",value:function(O,T){var te={};return O.forEach(function(Ee){Ee.container&&Ee.container.id===T&&(te[Ee.container.slot]?te[Ee.container.slot].push(Ee.id):te[Ee.container.slot]=[Ee.id])}),te}},{key:"getImplementLayersMap",value:function(){return this.runtimeApp.registryManager.layers}},{key:"getImplementLayer",value:function(O){if(!(0,tt.isEmpty)(O)){var T=this.getImplementLayersMap().get(O);return T||console.warn("\u56FE\u5C42 ".concat(O," \u672A\u5728\u8D44\u4EA7\u4E2D.")),T}}},{key:"getImplementLayers",value:function(){var O=this.runtimeApp.registryManager,T=O.getAllLayers();return T}},{key:"getImplementLayerDefaultVis",value:function(O){var T,te;return(T=(te=this.getImplementLayer(O))===null||te===void 0?void 0:te.defaultVisConfig)!==null&&T!==void 0?T:{}}},{key:"getInstanceLayerById",value:function(O){var T=this.runtimeApp.stateManager.layersStore,te=T.getLayerManager();return te==null?void 0:te.getLayerById(O)}},{key:"handleLayerFitBounds",value:function(O){var T=this.runtimeApp.stateManager.layersStore,te=T.getLayerManager(),Ee=te==null?void 0:te.getLayerById(O);Ee==null||Ee.fitBounds()}},{key:"getMapViewState",value:function(){var O=this.runtimeApp.stateManager.mapStore,T=O.getScene();if(T){var te=T.getZoom(),Ee=T.getCenter(),De=T.getPitch(),Ke=T.getRotation(),Be=T.getBounds();return{zoom:te,center:Ee,pitch:De,rotation:Ke,bounds:Be}}}},{key:"getSceneInstance",value:function(){var O=this.runtimeApp.stateManager.mapStore,T=O.getScene();if(T)return T}},{key:"fitMapBounds",value:function(O){var T=this.runtimeApp.stateManager.mapStore,te=T.getScene();te==null||te.fitBounds(O)}},{key:"syncMapBounds",value:function(O){var T=this,te=this.runtimeApp.stateManager.mapStore,Ee=te.getScene();if(!Ee){te.once("set-scene",function(){T.fitMapBounds(O)});return}this.fitMapBounds(O)}}]),v}(),Wo=Qa,Ho=Q(6691),cr=Q(5188);function $t(v){"@babel/helpers - typeof";return $t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},$t(v)}function zo(v,d){var O=Object.keys(v);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(v);d&&(T=T.filter(function(te){return Object.getOwnPropertyDescriptor(v,te).enumerable})),O.push.apply(O,T)}return O}function Uo(v){for(var d=1;d<arguments.length;d++){var O=arguments[d]!=null?arguments[d]:{};d%2?zo(Object(O),!0).forEach(function(T){Qo(v,T,O[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(O)):zo(Object(O)).forEach(function(T){Object.defineProperty(v,T,Object.getOwnPropertyDescriptor(O,T))})}return v}function Za(v,d){if(!(v instanceof d))throw new TypeError("Cannot call a class as a function")}function Lr(v,d){for(var O=0;O<d.length;O++){var T=d[O];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,Nr(T.key),T)}}function Vo(v,d,O){return d&&Lr(v.prototype,d),O&&Lr(v,O),Object.defineProperty(v,"prototype",{writable:!1}),v}function Go(v,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(d&&d.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),d&&hr(v,d)}function hr(v,d){return hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,te){return T.__proto__=te,T},hr(v,d)}function Sr(v){var d=sr();return function(){var T=_r(v),te;if(d){var Ee=_r(this).constructor;te=Reflect.construct(T,arguments,Ee)}else te=T.apply(this,arguments);return Ja(this,te)}}function Ja(v,d){if(d&&($t(d)==="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ko(v)}function Ko(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function sr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(v){return!1}}function _r(v){return _r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},_r(v)}function Qo(v,d,O){return d=Nr(d),d in v?Object.defineProperty(v,d,{value:O,enumerable:!0,configurable:!0,writable:!0}):v[d]=O,v}function Nr(v){var d=qa(v,"string");return $t(d)=="symbol"?d:String(d)}function qa(v,d){if($t(v)!="object"||!v)return v;var O=v[Symbol.toPrimitive];if(O!==void 0){var T=O.call(v,d||"default");if($t(T)!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(v)}var Xa=function(v){Go(O,v);var d=Sr(O);function O(T){var te,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"datasets";return Za(this,O),te=d.call(this),Qo(Ko(te),"state",void 0),te.initState(T,Ee),te}return Vo(O,[{key:"initState",value:function(te,Ee){var De=U(te),Ke=De.metadata,Be=De.datasets,Qe=De.spec,ut=Qe.map,dt=Qe.layers,mt=Qe.widgets,Ot=(0,cr.vV)({activeNavMenuKey:Ee,collapsed:!1,metadata:Ke,map:ut,datasets:Be.map(function(nt){return(0,cr.vV)(nt,!1)}),layers:dt,widgets:mt});this.state=Ot,this.notify()}},{key:"setState",value:function(te){te!==this.state&&(typeof te=="function"?this.state=(0,cr.Uy)(this.state,te):this.state=(0,cr.vV)(Uo(Uo({},te),{},{datasets:te.datasets.map(function(Ee){return(0,cr.vV)(Ee,!1)})})),this.notify())}},{key:"notify",value:function(){var te=this;this.listeners.forEach(function(Ee){Ee(te.state)})}},{key:"getSnapshot",value:function(){return this.state}},{key:"destroy",value:function(){this.listeners=new Set}}]),O}(i.Subscribable);function fr(v){"@babel/helpers - typeof";return fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},fr(v)}function $a(v,d){var O=typeof Symbol!="undefined"&&v[Symbol.iterator]||v["@@iterator"];if(!O){if(Array.isArray(v)||(O=ei(v))||d&&v&&typeof v.length=="number"){O&&(v=O);var T=0,te=function(){};return{s:te,n:function(){return T>=v.length?{done:!0}:{done:!1,value:v[T++]}},e:function(Qe){throw Qe},f:te}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ee=!0,De=!1,Ke;return{s:function(){O=O.call(v)},n:function(){var Qe=O.next();return Ee=Qe.done,Qe},e:function(Qe){De=!0,Ke=Qe},f:function(){try{!Ee&&O.return!=null&&O.return()}finally{if(De)throw Ke}}}}function ei(v,d){if(v){if(typeof v=="string")return Mr(v,d);var O=Object.prototype.toString.call(v).slice(8,-1);if(O==="Object"&&v.constructor&&(O=v.constructor.name),O==="Map"||O==="Set")return Array.from(v);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return Mr(v,d)}}function Mr(v,d){(d==null||d>v.length)&&(d=v.length);for(var O=0,T=new Array(d);O<d;O++)T[O]=v[O];return T}function Zo(v,d){if(!(v instanceof d))throw new TypeError("Cannot call a class as a function")}function Rr(v,d){for(var O=0;O<d.length;O++){var T=d[O];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,qo(T.key),T)}}function Jo(v,d,O){return d&&Rr(v.prototype,d),O&&Rr(v,O),Object.defineProperty(v,"prototype",{writable:!1}),v}function Cr(v,d,O){return d=qo(d),d in v?Object.defineProperty(v,d,{value:O,enumerable:!0,configurable:!0,writable:!0}):v[d]=O,v}function qo(v){var d=ti(v,"string");return fr(d)=="symbol"?d:String(d)}function ti(v,d){if(fr(v)!="object"||!v)return v;var O=v[Symbol.toPrimitive];if(O!==void 0){var T=O.call(v,d||"default");if(fr(T)!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(v)}var ri=function(){function v(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];Zo(this,v),Cr(this,"widgets",new Map),this.installWidgets(d)}return Jo(v,[{key:"registerWidget",value:function(O){this.widgets.set(O.metadata.name,O)}},{key:"getWidget",value:function(O){var T=this.widgets.get(O);if(!T){var te={component:function(){return"\u7EC4\u4EF6 ".concat(O," \u672A\u6CE8\u518C\u6210\u529F.")},metadata:{}};return te}return T}},{key:"getAllWidgets",value:function(){var O=[],T=$a(this.widgets.values()),te;try{for(T.s();!(te=T.n()).done;){var Ee=te.value;O.push(Ee)}}catch(De){T.e(De)}finally{T.f()}return O}},{key:"installWidgets",value:function(){var O=this,T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];T.forEach(function(te){return O.registerWidget(te)})}},{key:"getContainerWithinSideNavWidgets",value:function(O){var T=[];return this.widgets.forEach(function(te){te.container.type==="SideNav"&&((0,tt.isUndefined)(O)||te.container.slot===O)&&T.push(te)}),T}},{key:"getNavSlotMenuPanelWidgets",value:function(){var O=this.getContainerWithinSideNavWidgets("menuPanel");return O}},{key:"getNavSlotBottomWidgets",value:function(){var O=this.getContainerWithinSideNavWidgets("bottom");return O}}]),v}(),ni=ri;function mr(v){"@babel/helpers - typeof";return mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},mr(v)}function Br(v){return kr(v)||ii(v)||ai(v)||oi()}function oi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ai(v,d){if(v){if(typeof v=="string")return Yr(v,d);var O=Object.prototype.toString.call(v).slice(8,-1);if(O==="Object"&&v.constructor&&(O=v.constructor.name),O==="Map"||O==="Set")return Array.from(v);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return Yr(v,d)}}function ii(v){if(typeof Symbol!="undefined"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}function kr(v){if(Array.isArray(v))return Yr(v)}function Yr(v,d){(d==null||d>v.length)&&(d=v.length);for(var O=0,T=new Array(d);O<d;O++)T[O]=v[O];return T}function li(v,d){if(!(v instanceof d))throw new TypeError("Cannot call a class as a function")}function Wr(v,d){for(var O=0;O<d.length;O++){var T=d[O];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,Xo(T.key),T)}}function ui(v,d,O){return d&&Wr(v.prototype,d),O&&Wr(v,O),Object.defineProperty(v,"prototype",{writable:!1}),v}function kt(v,d,O){return d=Xo(d),d in v?Object.defineProperty(v,d,{value:O,enumerable:!0,configurable:!0,writable:!0}):v[d]=O,v}function Xo(v){var d=ci(v,"string");return mr(d)=="symbol"?d:String(d)}function ci(v,d){if(mr(v)!="object"||!v)return v;var O=v[Symbol.toPrimitive];if(O!==void 0){var T=O.call(v,d||"default");if(mr(T)!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(v)}var si=function(){function v(d,O,T){var te=this;li(this,v),kt(this,"eventBus",void 0),kt(this,"appService",void 0),kt(this,"editorState",void 0),kt(this,"containerSlotMap",void 0),kt(this,"editorDatasetManager",void 0),kt(this,"editorWidgetManager",void 0),kt(this,"editorStateRef",void 0),kt(this,"autoCreateSchemaHandler",function(Ee){var De=Ee.layers,Ke=Ee.layerPopup,Be=Ee.bounds;De.length&&(te.editorState.setState(function(Qe){var ut;(ut=Qe.layers).push.apply(ut,Br(De));var dt=Qe.widgets.findIndex(function(ct){return ct.type===Ke.type});if(dt!==-1){var mt,Ot=Ke.properties.items;if((mt=Qe.widgets[dt].properties)!==null&&mt!==void 0&&mt.isOpen){var nt;(nt=Qe.widgets[dt].properties)===null||nt===void 0||(nt=nt.items)===null||nt===void 0||nt.push.apply(nt,Br(Ot))}}Qe.activeNavMenuKey="layers"}),Be&&(0,pe.Kk)(function(){te.appService.syncMapBounds(Be)}))}),this.eventBus=d,this.appService=T,this.editorState=new Xa(K("empty")),this.editorDatasetManager=new Ho.Z(T),this.editorWidgetManager=new ni(O),this.containerSlotMap=this.getWidgetsContainerSlotMap(),this.editorState.subscribe(function(Ee){te.editorDatasetManager.update(Ee.datasets,te.autoCreateSchemaHandler)})}return ui(v,[{key:"getWidgetsContainerSlotMap",value:function(){var O=this.editorWidgetManager.getAllWidgets(),T=(0,pe.o8)(O);return T}},{key:"getNavMenuList",value:function(){var O,T=((O=this.containerSlotMap.SideNav)===null||O===void 0?void 0:O.menuPanel)||[];return(0,pe.Af)(T)}},{key:"publishEvent",value:function(O){for(var T,te=arguments.length,Ee=new Array(te>1?te-1:0),De=1;De<te;De++)Ee[De-1]=arguments[De];(T=this.eventBus).emit.apply(T,[O].concat(Ee))}},{key:"getApplicationConfig",value:function(){var O=be(this.editorState.getSnapshot());return O}}]),v}(),$o=si;function Gt(v){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},Gt(v)}function Or(){return Or=Object.assign?Object.assign.bind():function(v){for(var d=1;d<arguments.length;d++){var O=arguments[d];for(var T in O)Object.prototype.hasOwnProperty.call(O,T)&&(v[T]=O[T])}return v},Or.apply(this,arguments)}function ea(v,d){if(!(v instanceof d))throw new TypeError("Cannot call a class as a function")}function Hr(v,d){for(var O=0;O<d.length;O++){var T=d[O];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,oa(T.key),T)}}function ta(v,d,O){return d&&Hr(v.prototype,d),O&&Hr(v,O),Object.defineProperty(v,"prototype",{writable:!1}),v}function ra(v,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(d&&d.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),d&&Mt(v,d)}function Mt(v,d){return Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,te){return T.__proto__=te,T},Mt(v,d)}function fi(v){var d=mi();return function(){var T=Er(v),te;if(d){var Ee=Er(this).constructor;te=Reflect.construct(T,arguments,Ee)}else te=T.apply(this,arguments);return na(this,te)}}function na(v,d){if(d&&(Gt(d)==="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tt(v)}function Tt(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function mi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(v){return!1}}function Er(v){return Er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},Er(v)}function Rt(v,d,O){return d=oa(d),d in v?Object.defineProperty(v,d,{value:O,enumerable:!0,configurable:!0,writable:!0}):v[d]=O,v}function oa(v){var d=pi(v,"string");return Gt(d)=="symbol"?d:String(d)}function pi(v,d){if(Gt(v)!="object"||!v)return v;var O=v[Symbol.toPrimitive];if(O!==void 0){var T=O.call(v,d||"default");if(Gt(T)!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(v)}var aa=function(v){ra(O,v);var d=fi(O);function O(T){var te;ea(this,O),te=d.call(this),Rt(Tt(te),"options",void 0),Rt(Tt(te),"editorWidgetManager",void 0),Rt(Tt(te),"registryAssetManager",void 0),Rt(Tt(te),"runtimeApp",void 0),Rt(Tt(te),"Editor",void 0),Rt(Tt(te),"appService",void 0),Rt(Tt(te),"editorService",void 0);var Ee=T.assets,De=T.editorWidgets,Ke=De===void 0?[]:De,Be=O.DefaultEditorWidgets.concat(Ke),Qe=new i.LIRuntimeApp({assets:Ee}),ut=new Wo(Qe),dt=new $o(Tt(te),Be,ut);return te.options=T,te.runtimeApp=Qe,te.appService=ut,te.editorService=dt,te.registryAssetManager=Qe.registryManager,te.editorWidgetManager=dt.editorWidgetManager,te.Editor=te.getEditor(),te}return ta(O,[{key:"getEditor",value:function(){var te=this.runtimeApp,Ee=this.appService,De=this.editorService,Ke=te.App,Be=De.editorState,Qe=De.containerSlotMap,ut={appService:Ee,editorService:De,containerSlotMap:Qe};return function(mt){var Ot=mt.defaultApplication,nt=mt.defaultActiveNavMenuKey,ct=(0,P.useMemo)(function(){var ht=De.getNavMenuList();if(nt&&ht.find(function(er){return er.key===nt}))return nt;var pr=ht[0]&&ht[0].key;return pr},[nt]);return(0,P.useMemo)(function(){return Be.initState(Ot,ct)},[]),oe().createElement(Ne.s.Provider,{value:ut},oe().createElement(Ua,Or({App:Ke},mt)))}}},{key:"installAssets",value:function(te){this.appService.installAssets(te)}},{key:"getApplicationConfig",value:function(){var te=this.editorService.getApplicationConfig();return te}}]),O}(N.Z);Rt(aa,"DefaultEditorWidgets",Se.tE);var yi=aa,Ll=null;function zr(v,d){if(v==null)return{};var O=di(v,d),T,te;if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols(v);for(te=0;te<Ee.length;te++)T=Ee[te],!(d.indexOf(T)>=0)&&Object.prototype.propertyIsEnumerable.call(v,T)&&(O[T]=v[T])}return O}function di(v,d){if(v==null)return{};var O={},T=Object.keys(v),te,Ee;for(Ee=0;Ee<T.length;Ee++)te=T[Ee],!(d.indexOf(te)>=0)&&(O[te]=v[te]);return O}var Nl=null,Ml=null},6691:function(Pt,ot,Q){"use strict";Q.d(ot,{r:function(){return M}});var Se=Q(25435),P=Q.n(Se),oe=Q(12611),N=Q.n(oe),i=Q(73788),Ne=Q(77331),I=Q(42432);function ne(H){"@babel/helpers - typeof";return ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},ne(H)}function Ie(H,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(X&&X.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),Object.defineProperty(H,"prototype",{writable:!1}),X&&Ue(H,X)}function Ue(H,X){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(le,fe){return le.__proto__=fe,le},Ue(H,X)}function lt(H){var X=tt();return function(){var le=et(H),fe;if(X){var Pe=et(this).constructor;fe=Reflect.construct(le,arguments,Pe)}else fe=le.apply(this,arguments);return G(this,fe)}}function G(H,X){if(X&&(ne(X)==="object"||typeof X=="function"))return X;if(X!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $e(H)}function $e(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function tt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(H){return!1}}function et(H){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($){return $.__proto__||Object.getPrototypeOf($)},et(H)}function pe(H,X){var $=Object.keys(H);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(H);X&&(le=le.filter(function(fe){return Object.getOwnPropertyDescriptor(H,fe).enumerable})),$.push.apply($,le)}return $}function ae(H){for(var X=1;X<arguments.length;X++){var $=arguments[X]!=null?arguments[X]:{};X%2?pe(Object($),!0).forEach(function(le){be(H,le,$[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors($)):pe(Object($)).forEach(function(le){Object.defineProperty(H,le,Object.getOwnPropertyDescriptor($,le))})}return H}function se(H){return Ce(H)||je(H)||Ae(H)||ve()}function ve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ae(H,X){if(H){if(typeof H=="string")return J(H,X);var $=Object.prototype.toString.call(H).slice(8,-1);if($==="Object"&&H.constructor&&($=H.constructor.name),$==="Map"||$==="Set")return Array.from(H);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return J(H,X)}}function je(H){if(typeof Symbol!="undefined"&&H[Symbol.iterator]!=null||H["@@iterator"]!=null)return Array.from(H)}function Ce(H){if(Array.isArray(H))return J(H)}function J(H,X){(X==null||X>H.length)&&(X=H.length);for(var $=0,le=new Array(X);$<X;$++)le[$]=H[$];return le}function K(H,X){if(!(H instanceof X))throw new TypeError("Cannot call a class as a function")}function U(H,X){for(var $=0;$<X.length;$++){var le=X[$];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(H,xe(le.key),le)}}function ue(H,X,$){return X&&U(H.prototype,X),$&&U(H,$),Object.defineProperty(H,"prototype",{writable:!1}),H}function be(H,X,$){return X=xe(X),X in H?Object.defineProperty(H,X,{value:$,enumerable:!0,configurable:!0,writable:!0}):H[X]=$,H}function xe(H){var X=ie(H,"string");return ne(X)=="symbol"?X:String(X)}function ie(H,X){if(ne(H)!="object"||!H)return H;var $=H[Symbol.toPrimitive];if($!==void 0){var le=$.call(H,X||"default");if(ne(le)!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(X==="string"?String:Number)(H)}var M=function(){function H(X,$){K(this,H),be(this,"schema",void 0),be(this,"data",[]),be(this,"columns",[]),be(this,"fieldPairs",[]),be(this,"geoFields",[]),be(this,"appService",void 0),be(this,"queryObserver",void 0),this.appService=$,this.setSchema(X)}return ue(H,[{key:"id",get:function(){return this.schema.id}},{key:"metadata",get:function(){return this.schema.metadata}},{key:"name",get:function(){return this.schema.metadata.name}},{key:"type",get:function(){return this.schema.type}},{key:"isLocalOrRemoteDataset",get:function(){return(0,Se.isLocalOrRemoteDatasetSchema)(this.schema)}},{key:"filter",get:function(){if((0,Se.isLocalOrRemoteDatasetSchema)(this.schema))return this.schema.filter}},{key:"h3Fields",get:function(){return this.columns.filter(function($){return $.type==="h3"})}},{key:"isLoading",get:function(){var $,le;return($=(le=this.queryObserver)===null||le===void 0?void 0:le.getCurrentResult().isLoading)!==null&&$!==void 0?$:!1}},{key:"isLoadingError",get:function(){var $;return($=this.queryObserver)===null||$===void 0?void 0:$.getCurrentResult().isLoadingError}},{key:"error",get:function(){var $;return($=this.queryObserver)===null||$===void 0?void 0:$.getCurrentResult().error}},{key:"setSchema",value:function($){return this.schema=this.savePropertiesFromSchema($),(0,Se.isLocalDatasetSchema)($)?(this.data=$.data,this.columns=$.columns,this.fieldPairs=(0,Ne.bM)(this.columns),this.geoFields=(0,Ne.B0)(this.columns,this.data)):(0,Se.isRemoteDatasetSchema)($)&&(this.data=[],this.columns=[],this.fieldPairs=[],this.geoFields=[],this.queryObserver?(this.queryObserver.setOptions(this.getQueryOptions($),{listeners:!1}),this.syncQueryResult()):(this.queryObserver=new Se.QueryObserver(Se.queryServiceClient,this.getQueryOptions($)),this.syncQueryResult())),this}},{key:"getColumnDomain",value:function($){var le=this.columns.find(function(Pe){return Pe.name===$});if(!this.data.length||!le)return[];var fe=this.data.map(function(Pe){return Pe[$]});switch(le.type){case"boolean":return[!0,!1];case"date":case"string":return se(new Set(fe)).filter(Se.notNullorUndefined);case"number":return[(0,oe.min)(fe),(0,oe.max)(fe)];default:return se(new Set(fe)).filter(Se.notNullorUndefined)}}},{key:"getSampleData",value:function(){for(var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5e3,le=this.data.length,fe=Math.max(Math.floor(le/$),1),Pe=[],Le=0;Le<le;Le+=fe)Pe.push(this.data[Le]);return Pe}},{key:"updateData",value:function($){return this.data=$,this.columns=(0,Se.getDatasetColumns)($),this.fieldPairs=(0,Ne.bM)(this.columns),this.geoFields=(0,Ne.B0)(this.columns,this.data),this}},{key:"syncQueryResult",value:function(){if(this.queryObserver){var $=this.queryObserver.getCurrentResult();$.isFetched&&this.updateData(Array.isArray($.data)?$.data:[])}}},{key:"getQueryOptions",value:function($){var le=$.serviceType,fe=$.filter,Pe=$.columns,Le=Pe===void 0?[]:Pe,Ze=$.properties,ge=this.appService.getImplementDatasetService(le),_e=ge.service,Oe=fe&&(0,Se.getValidFilterWithMeta)(fe,Le),Re={queryKey:[le,Oe,Ze],queryFn:function(Ge){var Xe={filter:Oe,properties:Ze,signal:Ge.signal};return _e(Xe)}};return Re}},{key:"subscribeQuery",value:function($){if(this.queryObserver)return this.queryObserver.subscribe($)}},{key:"unAllSubscribeQuery",value:function(){if(this.queryObserver)return this.queryObserver.destroy()}},{key:"savePropertiesFromSchema",value:function($){return $}},{key:"loadSchemaFromPropertie",value:function(){return(0,Se.isLocalDatasetSchema)(this.schema)?ae(ae({},this.schema),{},{data:this.data,columns:this.columns}):this.schema}}]),H}(),me=function(H){Ie($,H);var X=lt($);function $(le){var fe,Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return K(this,$),fe=X.call(this),be($e(fe),"schemas",void 0),be($e(fe),"datasets",void 0),be($e(fe),"appService",void 0),be($e(fe),"differenceDatasets",function(Le,Ze){var ge=[];return Le.forEach(function(_e,Oe){Ze.has(Oe)||ge.push(_e)}),ge}),be($e(fe),"onQueryStateChange",function(Le,Ze){var ge=fe.datasets.findIndex(function(Re){return Re.id===Le});if(ge!==-1){var _e=Array.isArray(Ze.data)?Ze.data:[],Oe=fe.datasets.slice(0);Oe[ge]=fe.copyEditorDataset(Oe[ge]).updateData(_e),fe.datasets=Oe,fe.notify()}}),fe.appService=le,fe.schemas=Pe,fe.datasets=Pe.map(function(Le){return new M(Le,fe.appService)}),fe}return ue($,[{key:"isLoading",get:function(){return this.getDatasetList().some(function(fe){return fe.isLoading})}},{key:"getDatasetById",value:function(fe){return this.datasets.find(function(Pe){return Pe.id===fe})}},{key:"getDatasetList",value:function(){return this.datasets}},{key:"copyEditorDataset",value:function(fe){return Object.assign(Object.create(Object.getPrototypeOf(fe)),fe)}},{key:"copyEditorDatasetAndUpdateSchema",value:function(fe,Pe){return this.copyEditorDataset(fe).setSchema(Pe)}},{key:"update",value:function(fe,Pe){var Le=this,Ze=this.schemas!==fe;if(Ze){this.schemas=fe;var ge=this.datasets,_e=new Map(ge.map(function(ze){return[ze.id,ze]})),Oe=fe.map(function(ze){var at=_e.get(ze.id);if(at){if(ze===at.schema)return at}else return new M(ze,Le.appService);return Le.copyEditorDatasetAndUpdateSchema(at,ze)}),Re=Oe.some(function(ze){return ze!==_e.get(ze.id)});if(!(_e.size===Oe.length&&!Re)){var Ye=new Map(Oe.map(function(ze){return[ze.id,ze]}));this.datasets=Oe;var Ge=this.differenceDatasets(Ye,_e);this.hasListeners()&&(Ge.forEach(function(ze){ze.subscribeQuery(function(at){Le.onQueryStateChange(ze.id,at)})}),this.differenceDatasets(_e,Ye).forEach(function(ze){ze.unAllSubscribeQuery()}),this.notify());var Xe=(0,I.xw)(Ge);Xe.length&&Pe&&(0,i.Kk)(function(){Pe(Le.getAutoCreateSchema(Ge))})}}}},{key:"getAutoCreateSchema",value:function(fe){var Pe=this,Le=(0,I.f3)(fe).filter(function(Oe){return Pe.appService.getImplementLayer(Oe.type)!==void 0}).map(function(Oe){return ae(ae({},Oe),{},{visConfig:ae(ae({},Pe.appService.getImplementLayerDefaultVis(Oe.type)),Oe.visConfig)})}),Ze=(0,I.Tf)(Le,fe),ge=(0,I.vI)(Le,fe)||void 0,_e={layers:Le,layerPopup:Ze,bounds:ge};return _e}},{key:"onSubscribe",value:function(){var fe=this;this.listeners.size===1&&this.datasets.forEach(function(Pe){Pe.subscribeQuery(function(Le){fe.onQueryStateChange(Pe.id,Le)})})}},{key:"onUnsubscribe",value:function(){this.listeners.size||(this.listeners=new Set,this.datasets.forEach(function(fe){fe.unAllSubscribeQuery()}))}},{key:"notify",value:function(){var fe=this;this.listeners.forEach(function(Pe){Pe(fe.getDatasetList())})}},{key:"getSnapshot",value:function(){return this.datasets}},{key:"destroy",value:function(){this.listeners=new Set}}]),$}(Se.Subscribable);ot.Z=me},67196:function(Pt,ot,Q){"use strict";Q.d(ot,{ZQ:function(){return tt},Kx:function(){return et},sk:function(){return G},kF:function(){return $e}});var Se=Q(25435),P=Q(46381),oe=Q.n(P),N=Q(34522),i=function(ae){return ae instanceof Object&&ae.type==="FeatureCollection"&&Array.isArray(ae.features)?"geojson":"json"};function Ne(pe){"@babel/helpers - typeof";return Ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},Ne(pe)}function I(pe,ae){var se=Object.keys(pe);if(Object.getOwnPropertySymbols){var ve=Object.getOwnPropertySymbols(pe);ae&&(ve=ve.filter(function(Ae){return Object.getOwnPropertyDescriptor(pe,Ae).enumerable})),se.push.apply(se,ve)}return se}function ne(pe){for(var ae=1;ae<arguments.length;ae++){var se=arguments[ae]!=null?arguments[ae]:{};ae%2?I(Object(se),!0).forEach(function(ve){Ie(pe,ve,se[ve])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(se)):I(Object(se)).forEach(function(ve){Object.defineProperty(pe,ve,Object.getOwnPropertyDescriptor(se,ve))})}return pe}function Ie(pe,ae,se){return ae=Ue(ae),ae in pe?Object.defineProperty(pe,ae,{value:se,enumerable:!0,configurable:!0,writable:!0}):pe[ae]=se,pe}function Ue(pe){var ae=lt(pe,"string");return Ne(ae)=="symbol"?ae:String(ae)}function lt(pe,ae){if(Ne(pe)!="object"||!pe)return pe;var se=pe[Symbol.toPrimitive];if(se!==void 0){var ve=se.call(pe,ae||"default");if(Ne(ve)!="object")return ve;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ae==="string"?String:Number)(pe)}var G=function(ae,se,ve){var Ae;try{Ae=JSON.parse(ae)}catch(Ce){throw Ce}var je=(0,Se.parserDataWithGeo)(Ae.features.map(function(Ce){return ne(ne({},Ce.properties),{},{_geometry:Ce.geometry})}));return{id:ve||(0,Se.getUniqueId)(ve),metadata:{name:se},data:je,type:"local",columns:(0,Se.getDatasetColumns)(je)}},$e=function(ae,se,ve){var Ae;try{Ae=JSON.parse(ae)}catch(Ce){throw Ce}if(i(Ae)==="geojson")return G(ae,se,ve);var je=(0,Se.parserDataWithGeo)(Ae);return{id:ve||(0,Se.getUniqueId)(ve),metadata:{name:se},data:je,type:"local",columns:(0,Se.getDatasetColumns)(je)}},tt=function(ae,se,ve){var Ae;try{var je;Ae=(je=oe().parse(ae,{header:!0,skipEmptyLines:!0,dynamicTyping:!0}).data)!==null&&je!==void 0?je:[]}catch(J){throw J}var Ce=(0,Se.parserDataWithGeo)(Ae);return{id:ve||(0,Se.getUniqueId)(ve),metadata:{name:se},data:Ce,type:"local",columns:(0,Se.getDatasetColumns)(Ce)}},et=function(ae,se,ve){var Ae;try{var je=(0,N.ij)(ae,{type:"array",cellDates:!0}),Ce=je.Sheets[je.SheetNames[0]];Object.keys(Ce).forEach(function(K){var U=Ce[K];U.t==="d"&&(U.v=U.w)}),Ae=N.P6.sheet_to_json(Ce)}catch(K){throw K}var J=(0,Se.parserDataWithGeo)(Ae);return{id:ve||(0,Se.getUniqueId)(ve),metadata:{name:se},data:J,type:"local",columns:(0,Se.getDatasetColumns)(J)}}},77331:function(Pt,ot,Q){"use strict";Q.d(ot,{B0:function(){return et},bM:function(){return tt},d:function(){return se},fj:function(){return Ae},gb:function(){return ve}});var Se=Q(13675),P=Q.n(Se),oe=Q(12611),N=Q.n(oe),i=Q(84533);function Ne(Ce){"@babel/helpers - typeof";return Ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},Ne(Ce)}function I(Ce,J){var K=Object.keys(Ce);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(Ce);J&&(U=U.filter(function(ue){return Object.getOwnPropertyDescriptor(Ce,ue).enumerable})),K.push.apply(K,U)}return K}function ne(Ce){for(var J=1;J<arguments.length;J++){var K=arguments[J]!=null?arguments[J]:{};J%2?I(Object(K),!0).forEach(function(U){Ie(Ce,U,K[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ce,Object.getOwnPropertyDescriptors(K)):I(Object(K)).forEach(function(U){Object.defineProperty(Ce,U,Object.getOwnPropertyDescriptor(K,U))})}return Ce}function Ie(Ce,J,K){return J=Ue(J),J in Ce?Object.defineProperty(Ce,J,{value:K,enumerable:!0,configurable:!0,writable:!0}):Ce[J]=K,Ce}function Ue(Ce){var J=lt(Ce,"string");return Ne(J)=="symbol"?J:String(J)}function lt(Ce,J){if(Ne(Ce)!="object"||!Ce)return Ce;var K=Ce[Symbol.toPrimitive];if(K!==void 0){var U=K.call(Ce,J||"default");if(Ne(U)!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(J==="string"?String:Number)(Ce)}var G="[#_&@\\.\\-\\ ]";function $e(Ce,J,K,U){var ue=U.replace(Ce,function(ie){return ie.replace(J[0],J[1])}),be=K.findIndex(function(ie){return ie===ue}),xe=-1;return be!==-1&&i.oy.some(function(ie){var M=U.replace(Ce,function(me){return me.replace(J[0],ie)});return xe=K.findIndex(function(me){return me===M}),xe>-1}),{lngIdx:be,altIdx:xe}}var tt=function(J){for(var K=J.filter(function(le){return le.type==="number"}),U=K.map(function(le){return le.name.toLowerCase()}),ue=[],be=0;be<U.length;be++)for(var xe=U[be],ie=0;ie<i.QC.length;ie++){var M=i.QC[ie],me=new RegExp("(^|".concat(G,")").concat(M[0],"(").concat(G,"|$)"));if(me.test(xe)){var H=$e(me,M,U,xe),X=H.lngIdx,$=H.altIdx;X!==-1&&ue.push({type:"Point",displayName:K[be].displayName||xe,pair:ne({lat:K[be].name,lng:K[X].name},$!==-1?{alt:K[$].name}:{})})}}return ue},et=function(J,K){if(K.length===0)return[];for(var U=K[0],ue={Point:"Point",MultiPoint:"Point",LineString:"Line",MultiLineString:"Line",Polygon:"Polygon",MultiPolygon:"Polygon"},be=[],xe=0;xe<J.length;xe++){var ie,M=J[xe];if(M.type==="geo"){var me=(ie=U[M.name])===null||ie===void 0?void 0:ie.type;if(!(0,oe.isEmpty)(me)){var H=ue[me];(0,oe.isEmpty)(me)||be.push(ne(ne({},M),{},{geoType:H}))}}}return be},pe=["_id","id","index","uuid","guid","uid","gid","serial","zip","code","post","region","fips","cbgs","h3","s2","lat","lon","lng","latitude","longitude","_x","_y"],ae=["metric","value","sum","count","unique","mean","mode","median","max","min","deviation","variance","\u6570\u91CF","\u4EF7\u683C","cnt","val"],se=function(J){var K=J.columns,U=J.fieldPairs,ue=U.map(function(ie){return Object.values(ie.pair)}).flat(),be=K.filter(function(ie){if(ie.type!=="number"||ue.includes(ie.name))return!1;var M=ie.name.toLowerCase();if(M==="")return!1;var me=pe.find(function(X){return M.startsWith(X)||M.endsWith(X)});if(me){var H=ae.find(function(X){return M.startsWith(X)||M.endsWith(X)});return H}return!0}),xe=be.sort(function(ie,M){var me=ie.name.toLowerCase(),H=M.name.toLowerCase(),X=ae.findIndex(function(le){return me.startsWith(le)||me.endsWith(le)}),$=ae.findIndex(function(le){return H.startsWith(le)||H.endsWith(le)});return X!==$?X===-1?1:$===-1?-1:X-$:0});if(xe.length)return xe[0]};function ve(Ce){var J=Ce.map(function(be){return Number(Array.isArray(be))&&be[0]}).filter(Number.isFinite).sort(function(be,xe){return be-xe});if(!J.length)return null;var K=Ce.map(function(be){return Number(Array.isArray(be))&&be[1]}).filter(Number.isFinite).sort(function(be,xe){return be-xe});if(!K.length)return null;var U=[Math.max(J[0],-180),Math.min(J[J.length-1],180)],ue=[Math.max(K[0],-90),Math.min(K[K.length-1],90)];return[[U[0],ue[0]],[U[1],ue[1]]]}var Ae=function(J){var K=J.filter(function(ue){return ue&&ue.coordinates&&ue.coordinates.length}).map(function(ue){return(0,Se.feature)(ue)});try{var U=(0,Se.bbox)({type:"FeatureCollection",features:K});return[[U[0],U[1]],[U[2],U[3]]]}catch(ue){return null}},je=function(J){var K=[(J[0][0]+J[1][0])/2,(J[0][1]+J[1][1])/2];return K}},73788:function(Pt,ot,Q){"use strict";Q.d(ot,{cq:function(){return oe.cq},Af:function(){return oe.Af},BP:function(){return oe.BP},pw:function(){return P.pw},ZQ:function(){return Se.ZQ},sk:function(){return Se.sk},kF:function(){return Se.kF},Kk:function(){return i},o8:function(){return oe.o8},iS:function(){return P.iS},DN:function(){return P.DN},KE:function(){return P.KE},lw:function(){return P.lw}});var Se=Q(67196),P=Q(8177),oe=Q(47429),N=Q(77331),i=window.requestIdleCallback||function(I){var ne=Date.now();return setTimeout(function(){I({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-ne))}})},1)},Ne=window.cancelIdleCallback||function(I){clearTimeout(I)}},42432:function(Pt,ot,Q){"use strict";Q.d(ot,{Tf:function(){return U},f3:function(){return J},vI:function(){return xe},xw:function(){return ve}});var Se=Q(76750),P=Q(25435),oe=Q.n(P),N=Q(3305),i=Q(12611),Ne=Q.n(i),I=Q(77331);function ne(ie){"@babel/helpers - typeof";return ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},ne(ie)}function Ie(ie,M){var me=Object.keys(ie);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(ie);M&&(H=H.filter(function(X){return Object.getOwnPropertyDescriptor(ie,X).enumerable})),me.push.apply(me,H)}return me}function Ue(ie){for(var M=1;M<arguments.length;M++){var me=arguments[M]!=null?arguments[M]:{};M%2?Ie(Object(me),!0).forEach(function(H){lt(ie,H,me[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ie,Object.getOwnPropertyDescriptors(me)):Ie(Object(me)).forEach(function(H){Object.defineProperty(ie,H,Object.getOwnPropertyDescriptor(me,H))})}return ie}function lt(ie,M,me){return M=G(M),M in ie?Object.defineProperty(ie,M,{value:me,enumerable:!0,configurable:!0,writable:!0}):ie[M]=me,ie}function G(ie){var M=$e(ie,"string");return ne(M)=="symbol"?M:String(M)}function $e(ie,M){if(ne(ie)!="object"||!ie)return ie;var me=ie[Symbol.toPrimitive];if(me!==void 0){var H=me.call(ie,M||"default");if(ne(H)!="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(ie)}function tt(){"use strict";tt=function(){return M};var ie,M={},me=Object.prototype,H=me.hasOwnProperty,X=Object.defineProperty||function(we,de,he){we[de]=he.value},$=typeof Symbol=="function"?Symbol:{},le=$.iterator||"@@iterator",fe=$.asyncIterator||"@@asyncIterator",Pe=$.toStringTag||"@@toStringTag";function Le(we,de,he){return Object.defineProperty(we,de,{value:he,enumerable:!0,configurable:!0,writable:!0}),we[de]}try{Le({},"")}catch(we){Le=function(he,Me,He){return he[Me]=He}}function Ze(we,de,he,Me){var He=de&&de.prototype instanceof Xe?de:Xe,We=Object.create(He.prototype),rt=new At(Me||[]);return X(We,"_invoke",{value:Qt(we,he,rt)}),We}function ge(we,de,he){try{return{type:"normal",arg:we.call(de,he)}}catch(Me){return{type:"throw",arg:Me}}}M.wrap=Ze;var _e="suspendedStart",Oe="suspendedYield",Re="executing",Ye="completed",Ge={};function Xe(){}function ze(){}function at(){}var _t={};Le(_t,le,function(){return this});var gt=Object.getPrototypeOf,bt=gt&&gt(gt(Lt([])));bt&&bt!==me&&H.call(bt,le)&&(_t=bt);var Ct=at.prototype=Xe.prototype=Object.create(_t);function xt(we){["next","throw","return"].forEach(function(de){Le(we,de,function(he){return this._invoke(de,he)})})}function It(we,de){function he(He,We,rt,Ve){var it=ge(we[He],we,We);if(it.type!=="throw"){var Et=it.arg,wt=Et.value;return wt&&ne(wt)=="object"&&H.call(wt,"__await")?de.resolve(wt.__await).then(function(jt){he("next",jt,rt,Ve)},function(jt){he("throw",jt,rt,Ve)}):de.resolve(wt).then(function(jt){Et.value=jt,rt(Et)},function(jt){return he("throw",jt,rt,Ve)})}Ve(it.arg)}var Me;X(this,"_invoke",{value:function(We,rt){function Ve(){return new de(function(it,Et){he(We,rt,it,Et)})}return Me=Me?Me.then(Ve,Ve):Ve()}})}function Qt(we,de,he){var Me=_e;return function(He,We){if(Me===Re)throw new Error("Generator is already running");if(Me===Ye){if(He==="throw")throw We;return{value:ie,done:!0}}for(he.method=He,he.arg=We;;){var rt=he.delegate;if(rt){var Ve=Ut(rt,he);if(Ve){if(Ve===Ge)continue;return Ve}}if(he.method==="next")he.sent=he._sent=he.arg;else if(he.method==="throw"){if(Me===_e)throw Me=Ye,he.arg;he.dispatchException(he.arg)}else he.method==="return"&&he.abrupt("return",he.arg);Me=Re;var it=ge(we,de,he);if(it.type==="normal"){if(Me=he.done?Ye:Oe,it.arg===Ge)continue;return{value:it.arg,done:he.done}}it.type==="throw"&&(Me=Ye,he.method="throw",he.arg=it.arg)}}}function Ut(we,de){var he=de.method,Me=we.iterator[he];if(Me===ie)return de.delegate=null,he==="throw"&&we.iterator.return&&(de.method="return",de.arg=ie,Ut(we,de),de.method==="throw")||he!=="return"&&(de.method="throw",de.arg=new TypeError("The iterator does not provide a '"+he+"' method")),Ge;var He=ge(Me,we.iterator,de.arg);if(He.type==="throw")return de.method="throw",de.arg=He.arg,de.delegate=null,Ge;var We=He.arg;return We?We.done?(de[we.resultName]=We.value,de.next=we.nextLoc,de.method!=="return"&&(de.method="next",de.arg=ie),de.delegate=null,Ge):We:(de.method="throw",de.arg=new TypeError("iterator result is not an object"),de.delegate=null,Ge)}function Zt(we){var de={tryLoc:we[0]};1 in we&&(de.catchLoc=we[1]),2 in we&&(de.finallyLoc=we[2],de.afterLoc=we[3]),this.tryEntries.push(de)}function Ft(we){var de=we.completion||{};de.type="normal",delete de.arg,we.completion=de}function At(we){this.tryEntries=[{tryLoc:"root"}],we.forEach(Zt,this),this.reset(!0)}function Lt(we){if(we||we===""){var de=we[le];if(de)return de.call(we);if(typeof we.next=="function")return we;if(!isNaN(we.length)){var he=-1,Me=function He(){for(;++he<we.length;)if(H.call(we,he))return He.value=we[he],He.done=!1,He;return He.value=ie,He.done=!0,He};return Me.next=Me}}throw new TypeError(ne(we)+" is not iterable")}return ze.prototype=at,X(Ct,"constructor",{value:at,configurable:!0}),X(at,"constructor",{value:ze,configurable:!0}),ze.displayName=Le(at,Pe,"GeneratorFunction"),M.isGeneratorFunction=function(we){var de=typeof we=="function"&&we.constructor;return!!de&&(de===ze||(de.displayName||de.name)==="GeneratorFunction")},M.mark=function(we){return Object.setPrototypeOf?Object.setPrototypeOf(we,at):(we.__proto__=at,Le(we,Pe,"GeneratorFunction")),we.prototype=Object.create(Ct),we},M.awrap=function(we){return{__await:we}},xt(It.prototype),Le(It.prototype,fe,function(){return this}),M.AsyncIterator=It,M.async=function(we,de,he,Me,He){He===void 0&&(He=Promise);var We=new It(Ze(we,de,he,Me),He);return M.isGeneratorFunction(de)?We:We.next().then(function(rt){return rt.done?rt.value:We.next()})},xt(Ct),Le(Ct,Pe,"Generator"),Le(Ct,le,function(){return this}),Le(Ct,"toString",function(){return"[object Generator]"}),M.keys=function(we){var de=Object(we),he=[];for(var Me in de)he.push(Me);return he.reverse(),function He(){for(;he.length;){var We=he.pop();if(We in de)return He.value=We,He.done=!1,He}return He.done=!0,He}},M.values=Lt,At.prototype={constructor:At,reset:function(de){if(this.prev=0,this.next=0,this.sent=this._sent=ie,this.done=!1,this.delegate=null,this.method="next",this.arg=ie,this.tryEntries.forEach(Ft),!de)for(var he in this)he.charAt(0)==="t"&&H.call(this,he)&&!isNaN(+he.slice(1))&&(this[he]=ie)},stop:function(){this.done=!0;var de=this.tryEntries[0].completion;if(de.type==="throw")throw de.arg;return this.rval},dispatchException:function(de){if(this.done)throw de;var he=this;function Me(Et,wt){return rt.type="throw",rt.arg=de,he.next=Et,wt&&(he.method="next",he.arg=ie),!!wt}for(var He=this.tryEntries.length-1;He>=0;--He){var We=this.tryEntries[He],rt=We.completion;if(We.tryLoc==="root")return Me("end");if(We.tryLoc<=this.prev){var Ve=H.call(We,"catchLoc"),it=H.call(We,"finallyLoc");if(Ve&&it){if(this.prev<We.catchLoc)return Me(We.catchLoc,!0);if(this.prev<We.finallyLoc)return Me(We.finallyLoc)}else if(Ve){if(this.prev<We.catchLoc)return Me(We.catchLoc,!0)}else{if(!it)throw new Error("try statement without catch or finally");if(this.prev<We.finallyLoc)return Me(We.finallyLoc)}}}},abrupt:function(de,he){for(var Me=this.tryEntries.length-1;Me>=0;--Me){var He=this.tryEntries[Me];if(He.tryLoc<=this.prev&&H.call(He,"finallyLoc")&&this.prev<He.finallyLoc){var We=He;break}}We&&(de==="break"||de==="continue")&&We.tryLoc<=he&&he<=We.finallyLoc&&(We=null);var rt=We?We.completion:{};return rt.type=de,rt.arg=he,We?(this.method="next",this.next=We.finallyLoc,Ge):this.complete(rt)},complete:function(de,he){if(de.type==="throw")throw de.arg;return de.type==="break"||de.type==="continue"?this.next=de.arg:de.type==="return"?(this.rval=this.arg=de.arg,this.method="return",this.next="end"):de.type==="normal"&&he&&(this.next=he),Ge},finish:function(de){for(var he=this.tryEntries.length-1;he>=0;--he){var Me=this.tryEntries[he];if(Me.finallyLoc===de)return this.complete(Me.completion,Me.afterLoc),Ft(Me),Ge}},catch:function(de){for(var he=this.tryEntries.length-1;he>=0;--he){var Me=this.tryEntries[he];if(Me.tryLoc===de){var He=Me.completion;if(He.type==="throw"){var We=He.arg;Ft(Me)}return We}}throw new Error("illegal catch attempt")},delegateYield:function(de,he,Me){return this.delegate={iterator:Lt(de),resultName:he,nextLoc:Me},this.method==="next"&&(this.arg=ie),Ge}},M}var et=Se.A.filter(function(ie){return ie.type==="sequential"&&ie.colors.length===4}).map(function(ie){return ie.colors}),pe=tt().mark(function ie(){var M;return tt().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:M=0;case 1:if(!(M<et.length+1)){H.next=7;break}return M===et.length&&(M=0),H.next=5,et[M++];case 5:H.next=1;break;case 7:case"end":return H.stop()}},ie)})(),ae=function(M){var me=pe.next(),H=me.done?et[0]:me.value;if(!M)return(0,i.last)(H);var X={field:M.name,value:H,scale:{type:"quantize",unknown:"#c0c0c0"},isReversed:!1};return X},se=function(M){return!!((0,P.isLocalDatasetSchema)(M.schema)&&M.metadata._autoCreateLayers===!0)},ve=function(M){return M.filter(se)},Ae=function(M,me,H,X){var $={id:(0,P.getUniqueId)(M),type:M,metadata:{name:me},sourceConfig:H,visConfig:Ue({visible:!0},X)};return $},je=new Map([["BubbleLayer",function(ie){var M=ie.dataset,me=ie.colorField,H=M.id,X=M.name,$=M.fieldPairs.filter(function(Pe){return Pe.type==="Point"}).map(function(Pe,Le){return Ae("BubbleLayer","".concat(X,"_").concat(Pe.displayName),{datasetId:H,parser:{type:"json",x:Pe.pair.lng,y:Pe.pair.lat}},{visible:[0,1].includes(Le),fillColor:ae(me)})}),le=M.geoFields.filter(function(Pe){return Pe.geoType==="Point"}).map(function(Pe,Le){return Ae("BubbleLayer","".concat(X,"_").concat(Pe.displayName||Pe.name),{datasetId:H,parser:{type:"json",geometry:Pe.name}},{visible:[0,1].includes(Le),fillColor:ae(me)})}),fe=$.concat(le);return fe}],["LineLayer",function(ie){var M=ie.dataset,me=ie.colorField,H=M.id,X=M.name,$=M.geoFields.filter(function(le){return le.geoType==="Line"}).map(function(le,fe){return Ae("LineLayer","".concat(X,"_").concat(le.displayName||le.name),{datasetId:H,parser:{type:"json",geometry:le.name}},{visible:fe===0,fillColor:ae(me)})});return $}],["ArcLayer",function(ie){var M=ie.dataset;if(M.fieldPairs.length<2)return[];var me=M.id,H=M.name,X=Ae("ArcLayer","".concat(H,"_").concat(M.fieldPairs[0].displayName," => ").concat(M.fieldPairs[1].displayName),{datasetId:me,parser:{type:"json",x:M.fieldPairs[0].pair.lng,y:M.fieldPairs[0].pair.lat,x1:M.fieldPairs[1].pair.lng,y1:M.fieldPairs[1].pair.lat}});return[X]}],["ChoroplethLayer",function(ie){var M=ie.dataset,me=ie.colorField,H=M.id,X=M.name,$=M.geoFields.filter(function(le){return le.geoType==="Polygon"}).map(function(le){return Ae("ChoroplethLayer","".concat(X,"_").concat(le.displayName||le.name),{datasetId:H,parser:{type:"json",geometry:le.name}},{fillColor:ae(me)})});return $}],["H3HexagonLayer",function(ie){var M=ie.dataset,me=ie.colorField,H=M.id,X=M.name,$=M.h3Fields.map(function(le){return Ae("H3HexagonLayer","".concat(X,"_H3_").concat(le.name),{datasetId:H,parser:{type:"json",hexagonId:le.name}},{fillColor:ae(me)})});return $}]]),Ce=function(M){var me=(0,I.d)(M),H=Array.from(je.values()).reverse().map(function(X){return X({dataset:M,colorField:me})}).flat();return H},J=function(M){var me=M.map(function(H){return Ce(H)}).flat();return me},K=function(M,me){var H=M.fieldPairs.map(function($){return Object.values($.pair)}).flat(),X=M.columns.filter(function($){var le=$.name,fe=$.type;return!H.includes(le)&&fe!=="geo"&&fe!=="h3"});return X.slice(0,me).map(function($){var le=$.name;return{field:le}})},U=function(M,me){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:6,X=M.map(function(le){var fe=me.find(function(Pe){return Pe.id===le.sourceConfig.datasetId});return{layerId:le.id,fields:fe?K(fe,H):[]}}),$={id:"LayerPopup",type:"LayerPopup",metadata:{name:"\u4FE1\u606F\u6846"},properties:{isOpen:!0,trigger:"hover",items:X},container:{id:"x",slot:"controls"}};return $},ue=function(M,me){var H;if(((H=me.sourceConfig)===null||H===void 0?void 0:H.parser)===void 0)return null;var X=me.sourceConfig.parser,$=X.x,le=X.y,fe=X.geometry,Pe=M.getSampleData();if($&&le){var Le=Pe.map(function(ge){return[ge[$],ge[le]]});return(0,I.gb)(Le)}else if(fe){var Ze=Pe.map(function(ge){return ge[fe]});return(0,I.fj)(Ze)}return null},be=new Map([["BubbleLayer",ue],["GridLayer",ue],["HeatmapLayer",ue],["HexbinLayer",ue],["IconLayer",ue],["LineLayer",function(ie,M){var me;if(((me=M.sourceConfig)===null||me===void 0?void 0:me.parser)===void 0)return null;var H=M.sourceConfig.parser,X=H.x,$=H.y,le=H.x1,fe=H.y1,Pe=H.geometry,Le=ie.getSampleData();if(X&&$&&le&&fe){var Ze=(0,I.gb)(Le.map(function(Re){return[Re[X],Re[$]]})),ge=(0,I.gb)(Le.map(function(Re){return[Re[le],Re[fe]]})),_e=ge&&Ze?[[Math.min(Ze[0][0],ge[0][0]),Math.min(Ze[0][1],ge[0][1])],[Math.max(Ze[1][0],ge[1][0]),Math.max(Ze[1][1],ge[1][1])]]:Ze||ge;return _e}else if(Pe){var Oe=Le.map(function(Re){return Re[Pe]});return(0,I.fj)(Oe)}return null}],["ArcLayer",function(ie,M){var me;if(((me=M.sourceConfig)===null||me===void 0?void 0:me.parser)===void 0)return null;var H=M.sourceConfig.parser,X=H.x,$=H.y,le=H.x1,fe=H.y1,Pe=ie.getSampleData();if(X&&$&&le&&fe){var Le=(0,I.gb)(Pe.map(function(_e){return[_e[X],_e[$]]})),Ze=(0,I.gb)(Pe.map(function(_e){return[_e[le],_e[fe]]})),ge=Ze&&Le?[[Math.min(Le[0][0],Ze[0][0]),Math.min(Le[0][1],Ze[0][1])],[Math.max(Le[1][0],Ze[1][0]),Math.max(Le[1][1],Ze[1][1])]]:Le||Ze;return ge}return null}],["ChoroplethLayer",function(ie,M){var me;if(((me=M.sourceConfig)===null||me===void 0?void 0:me.parser)===void 0)return null;var H=M.sourceConfig.parser.geometry,X=ie.getSampleData(1e4);if(H){var $=X.map(function(le){return le[H]});return(0,I.fj)($)}return null}],["H3HexagonLayer",function(ie,M){var me;if(((me=M.sourceConfig)===null||me===void 0?void 0:me.parser)===void 0)return null;var H=M.sourceConfig.parser.hexagonId,X=ie.getSampleData(1e4);if(H){var $=X.map(function(le){var fe=le[H];return(0,N.BT)(fe)?(0,N.rS)(fe).reverse():null}).filter(function(le){return le!==null});return(0,I.gb)($)}return null}]]),xe=function(M,me){var H=M.map(function(fe){var Pe=me.find(function(Ze){return Ze.id===fe.sourceConfig.datasetId}),Le=be.get(fe.type);return!Pe||!Le?null:Le(Pe,fe)}),X=H.filter(function(fe){return fe!==null});if(X.length===0)return null;var $=X.reduce(function(fe,Pe){return[[Math.min(fe[0][0],Pe[0][0]),Math.min(fe[0][1],Pe[0][1])],[Math.max(fe[1][0],Pe[1][0]),Math.max(fe[1][1],Pe[1][1])]]},X[0]),le=[[Math.max($[0][0],-180),Math.max($[0][1],-90)],[Math.min($[1][0],180),Math.min($[1][1],90)]];return le}},8177:function(Pt,ot,Q){"use strict";Q.d(ot,{DN:function(){return J},KE:function(){return tt},Rv:function(){return et},TL:function(){return ae},ZA:function(){return $e},iS:function(){return Ce},lw:function(){return je},pw:function(){return pe},t3:function(){return ve},zW:function(){return G}});var Se=Q(25435),P=Q.n(Se),oe=Q(12611),N=Q.n(oe),i=Q(84533);function Ne(K){"@babel/helpers - typeof";return Ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},Ne(K)}function I(K,U){var ue=Object.keys(K);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(K);U&&(be=be.filter(function(xe){return Object.getOwnPropertyDescriptor(K,xe).enumerable})),ue.push.apply(ue,be)}return ue}function ne(K){for(var U=1;U<arguments.length;U++){var ue=arguments[U]!=null?arguments[U]:{};U%2?I(Object(ue),!0).forEach(function(be){Ie(K,be,ue[be])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ue)):I(Object(ue)).forEach(function(be){Object.defineProperty(K,be,Object.getOwnPropertyDescriptor(ue,be))})}return K}function Ie(K,U,ue){return U=Ue(U),U in K?Object.defineProperty(K,U,{value:ue,enumerable:!0,configurable:!0,writable:!0}):K[U]=ue,K}function Ue(K){var U=lt(K,"string");return Ne(U)=="symbol"?U:String(U)}function lt(K,U){if(Ne(K)!="object"||!K)return K;var ue=K[Symbol.toPrimitive];if(ue!==void 0){var be=ue.call(K,U||"default");if(Ne(be)!="object")return be;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(K)}var G=function(U){if(!U.creatTime){var ue=ne({},U),be=new Date,xe=[be.getFullYear(),be.getMonth()+1,be.getDate()].join("-")+" "+[be.getHours(),be.getMinutes(),be.getSeconds()].join(":");return ue.creatTime=xe,ue}return U},$e=function(U){if(U.basemap!=="Map"&&(0,oe.isEmpty)(U.config.token)){var ue=ne({},U);return U.basemap==="Mapbox"?ue.config=ne(ne({},ue.config),{},{token:i.c3}):ue.config=ne(ne({},ue.config),{},{token:i.C_}),ue}return U},tt=function(U){if((0,Se.isLocalDatasetSchema)(U)&&U.data.length&&!U.columns.length){var ue=ne({},U);return ue.columns=(0,Se.getDatasetColumns)(ue.data),ue}return U},et=function(U){var ue=U.map(function(be){return tt(be)});return ue},pe=function(U){return!((0,oe.isUndefined)(U.type)||U.type===""||(0,oe.isUndefined)(U.sourceConfig)||(0,oe.isEmpty)(U.sourceConfig))},ae=function(U){var ue=U.filter(function(be){return pe(be)});return ue},se=function(U){var ue=U.container&&U.container.id===(i.Vw===null||i.Vw===void 0?void 0:i.Vw.id)&&U.container.slot===i.Vw.slot;return!ue},ve=function(U){var ue=U.filter(function(be){return se(be)});return ue},Ae=function(U){var ue=ne(ne({},U),{},{metadata:(0,oe.omit)(U.metadata,["_autoCreateLayers"])});return ue},je=function(U){var ue=U.map(function(be){return Ae(be)});return ue},Ce=function(U){return ae(U)},J=function(U){return ve(U)}},47429:function(Pt,ot,Q){"use strict";Q.d(ot,{Af:function(){return ve},BP:function(){return se},cq:function(){return Ce},o8:function(){return Ae}});var Se=Q(84533);function P(J){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},P(J)}function oe(J,K,U){return N()?oe=Reflect.construct.bind():oe=function(be,xe,ie){var M=[null];M.push.apply(M,xe);var me=Function.bind.apply(be,M),H=new me;return ie&&i(H,ie.prototype),H},oe.apply(null,arguments)}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}function i(J,K){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ue,be){return ue.__proto__=be,ue},i(J,K)}function Ne(J){return Ie(J)||ne(J)||lt(J)||I()}function I(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ne(J){if(typeof Symbol!="undefined"&&J[Symbol.iterator]!=null||J["@@iterator"]!=null)return Array.from(J)}function Ie(J){if(Array.isArray(J))return G(J)}function Ue(J,K){var U=typeof Symbol!="undefined"&&J[Symbol.iterator]||J["@@iterator"];if(!U){if(Array.isArray(J)||(U=lt(J))||K&&J&&typeof J.length=="number"){U&&(J=U);var ue=0,be=function(){};return{s:be,n:function(){return ue>=J.length?{done:!0}:{done:!1,value:J[ue++]}},e:function(H){throw H},f:be}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xe=!0,ie=!1,M;return{s:function(){U=U.call(J)},n:function(){var H=U.next();return xe=H.done,H},e:function(H){ie=!0,M=H},f:function(){try{!xe&&U.return!=null&&U.return()}finally{if(ie)throw M}}}}function lt(J,K){if(J){if(typeof J=="string")return G(J,K);var U=Object.prototype.toString.call(J).slice(8,-1);if(U==="Object"&&J.constructor&&(U=J.constructor.name),U==="Map"||U==="Set")return Array.from(J);if(U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U))return G(J,K)}}function G(J,K){(K==null||K>J.length)&&(K=J.length);for(var U=0,ue=new Array(K);U<K;U++)ue[U]=J[U];return ue}function $e(J,K){var U=Object.keys(J);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(J);K&&(ue=ue.filter(function(be){return Object.getOwnPropertyDescriptor(J,be).enumerable})),U.push.apply(U,ue)}return U}function tt(J){for(var K=1;K<arguments.length;K++){var U=arguments[K]!=null?arguments[K]:{};K%2?$e(Object(U),!0).forEach(function(ue){et(J,ue,U[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(U)):$e(Object(U)).forEach(function(ue){Object.defineProperty(J,ue,Object.getOwnPropertyDescriptor(U,ue))})}return J}function et(J,K,U){return K=pe(K),K in J?Object.defineProperty(J,K,{value:U,enumerable:!0,configurable:!0,writable:!0}):J[K]=U,J}function pe(J){var K=ae(J,"string");return P(K)=="symbol"?K:String(K)}function ae(J,K){if(P(J)!="object"||!J)return J;var U=J[Symbol.toPrimitive];if(U!==void 0){var ue=U.call(J,K||"default");if(P(ue)!="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(K==="string"?String:Number)(J)}function se(J){return J}function ve(J){var K=J.map(function(U){var ue=U.menu;return tt({component:U.component},ue)});return K}function Ae(J){var K={},U=Ue(J),ue;try{for(U.s();!(ue=U.n()).done;){var be=ue.value,xe=be.container,ie=xe.type,M=xe.slot;K[ie]||(K[ie]={});var me=K[ie];me[M]||(me[M]=[]),me[M].push(be)}}catch(H){U.e(H)}finally{U.f()}return K}var je=function(K){var U=K.metadata.category,ue="\u672A\u5206\u7C7B",be=U||"Unclassified",xe=U?Se.e8.get(U)||U:ue;return{category:be,categoryName:xe}},Ce=function(K){var U=K.reduce(function(xe,ie){var M=je(ie);if(!xe.has(M.category))xe.set(M.category,tt(tt({},M),{},{widgets:[ie]}));else{var me;(me=xe.get(M.category))===null||me===void 0||me.widgets.push(ie)}return xe},new Map).values(),ue=oe(Array,Ne(U)),be=oe(Array,Ne(Se.e8.keys()));return ue.sort(function(xe,ie){var M=be.findIndex(function(H){return H===xe.category}),me=be.findIndex(function(H){return H===ie.category});return M<0||me<0?me-M:M-me})}},59767:function(Pt,ot,Q){"use strict";Q.d(ot,{Z:function(){return Ze}});var Se=Q(81821),P=Q(90005),oe=Q.n(P),N=Q(41991),i=Q(87363),Ne=Q.n(i),I=Q(66154),ne=Q(12611),Ie=Q(46381),Ue=Q.n(Ie),lt=Q(34522);function G(ge){"@babel/helpers - typeof";return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},G(ge)}function $e(ge,_e){var Oe=Object.keys(ge);if(Object.getOwnPropertySymbols){var Re=Object.getOwnPropertySymbols(ge);_e&&(Re=Re.filter(function(Ye){return Object.getOwnPropertyDescriptor(ge,Ye).enumerable})),Oe.push.apply(Oe,Re)}return Oe}function tt(ge){for(var _e=1;_e<arguments.length;_e++){var Oe=arguments[_e]!=null?arguments[_e]:{};_e%2?$e(Object(Oe),!0).forEach(function(Re){et(ge,Re,Oe[Re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ge,Object.getOwnPropertyDescriptors(Oe)):$e(Object(Oe)).forEach(function(Re){Object.defineProperty(ge,Re,Object.getOwnPropertyDescriptor(Oe,Re))})}return ge}function et(ge,_e,Oe){return _e=pe(_e),_e in ge?Object.defineProperty(ge,_e,{value:Oe,enumerable:!0,configurable:!0,writable:!0}):ge[_e]=Oe,ge}function pe(ge){var _e=ae(ge,"string");return G(_e)=="symbol"?_e:String(_e)}function ae(ge,_e){if(G(ge)!="object"||!ge)return ge;var Oe=ge[Symbol.toPrimitive];if(Oe!==void 0){var Re=Oe.call(ge,_e||"default");if(G(Re)!="object")return Re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_e==="string"?String:Number)(ge)}var se=function(_e){return _e.map(function(Oe){var Re=tt({},Oe);for(var Ye in Oe)Re[Ye]=G(Oe[Ye])==="object"?JSON.stringify(Oe[Ye]):Oe[Ye];return Re})},ve=function(_e){return Ue().unparse(se(_e.data),{newline:`
`})},Ae=function(_e){var Oe=function(ze){if(typeof ArrayBuffer!="undefined"){for(var at=new ArrayBuffer(ze.length),_t=new Uint8Array(at),gt=0;gt!=ze.length;++gt)_t[gt]=ze.charCodeAt(gt)&255;return at}else{for(var bt=new Array(ze.length),Ct=0;Ct!=ze.length;++Ct)bt[Ct]=ze.charCodeAt(Ct)&255;return bt}},Re={bookType:"xlsx",bookSST:!1,type:"binary"},Ye={SheetNames:["Sheet1"],Sheets:{},Props:{}};Ye.Sheets.Sheet1=lt.P6.json_to_sheet(se(_e.data));try{var Ge=new Blob([Oe((0,lt.cW)(Ye,Re))],{type:"application/octet-stream"});return Ge}catch(Xe){return}},je=function(_e,Oe,Re){var Ye={type:"FeatureCollection",features:_e.data.map(function(Ge){return{type:"Feature",geometry:Ge[Re.name],properties:(0,ne.omit)(Ge,Re.name)}})};return Ye},Ce=Q(87651),J,K;function U(ge,_e){return _e||(_e=ge.slice(0)),Object.freeze(Object.defineProperties(ge,{raw:{value:Object.freeze(_e)}}))}var ue=function(){var _e=(0,I.Sr)(),Oe=_e.antCls;return{formLabel:(0,Ce.iv)(J||(J=U([`
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin: 35px 0;
    `]))),formDesc:(0,Ce.iv)(K||(K=U([`
      color: rgb(160, 167, 180);
      font-size: 11px;
    `])))}},be=ue;function xe(ge){return me(ge)||M(ge)||$(ge)||ie()}function ie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M(ge){if(typeof Symbol!="undefined"&&ge[Symbol.iterator]!=null||ge["@@iterator"]!=null)return Array.from(ge)}function me(ge){if(Array.isArray(ge))return le(ge)}function H(ge,_e){return Pe(ge)||fe(ge,_e)||$(ge,_e)||X()}function X(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $(ge,_e){if(ge){if(typeof ge=="string")return le(ge,_e);var Oe=Object.prototype.toString.call(ge).slice(8,-1);if(Oe==="Object"&&ge.constructor&&(Oe=ge.constructor.name),Oe==="Map"||Oe==="Set")return Array.from(ge);if(Oe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Oe))return le(ge,_e)}}function le(ge,_e){(_e==null||_e>ge.length)&&(_e=ge.length);for(var Oe=0,Re=new Array(_e);Oe<_e;Oe++)Re[Oe]=ge[Oe];return Re}function fe(ge,_e){var Oe=ge==null?null:typeof Symbol!="undefined"&&ge[Symbol.iterator]||ge["@@iterator"];if(Oe!=null){var Re,Ye,Ge,Xe,ze=[],at=!0,_t=!1;try{if(Ge=(Oe=Oe.call(ge)).next,_e===0){if(Object(Oe)!==Oe)return;at=!1}else for(;!(at=(Re=Ge.call(Oe)).done)&&(ze.push(Re.value),ze.length!==_e);at=!0);}catch(gt){_t=!0,Ye=gt}finally{try{if(!at&&Oe.return!=null&&(Xe=Oe.return(),Object(Xe)!==Xe))return}finally{if(_t)throw Ye}}return ze}}function Pe(ge){if(Array.isArray(ge))return ge}var Le=function(_e){var Oe=_e.visible,Re=_e.onVisbleChange,Ye=(0,I.F8)("export-data"),Ge=be(),Xe=Se.Form.useForm(),ze=H(Xe,1),at=ze[0],_t=(0,I.UT)(),gt=_t.editorDatasets,bt=gt.filter(function(At){return At.isLocalOrRemoteDataset}),Ct=Se.message.useMessage(),xt=H(Ct,2),It=xt[0],Qt=xt[1],Ut=[{label:"JSON",value:"json"},{label:"CSV",value:"csv"},{label:"Excel",value:"xlsx"},{label:"GeoJSON",value:"geojson"}],Zt=bt.length?[{label:"\u5168\u90E8",value:"all"}].concat(xe(bt.map(function(At){return{label:At.metadata.name,value:At.id}}))):[],Ft=function(){var Lt=at.getFieldsValue(!0),we=Lt.dataSourceId,de=Lt.type,he=bt.find(function(Ve){return Ve.id===we});if(we=="all")try{de==="json"&&bt.forEach(function(Ve){(0,N.Di)("".concat(Ve.metadata.name,".").concat(de),JSON.stringify(Ve.data))}),de==="geojson"&&bt.forEach(function(Ve){var it=Ve.columns.find(function(jt){return jt.type==="geo"});if(it!=null&&it.name){var Et=Ve.data[0][it.name].type,wt=je(Ve,Et,it);(0,N.Di)("".concat(Ve.metadata.name,".json"),JSON.stringify(wt))}else It.error("".concat(Ve.metadata.name,"\u6570\u636E\u4E0D\u652F\u6301 GeoJSON \u683C\u5F0F\u8F93\u51FA"))}),de==="csv"&&bt.forEach(function(Ve){(0,N.Di)("".concat(Ve.metadata.name,".").concat(de),ve(Ve))}),de==="xlsx"&&bt.forEach(function(Ve){var it=Ae(Ve);it?(0,N.lm)("".concat(Ve.metadata.name,".").concat(de),it):It.error("".concat(Ve.metadata.name,"\u6570\u636E\u4E0D\u652F\u6301 xlsx \u683C\u5F0F\u8F93\u51FA"))}),Re(!1)}catch(Ve){throw Ve}else if(he)try{if(de==="json"&&(0,N.Di)("".concat(he.metadata.name,".").concat(de),JSON.stringify(he.data)),de==="geojson"){var Me=he.columns.find(function(Ve){return Ve.type==="geo"});if(Me!=null&&Me.name){var He=he.data[0][Me.name].type,We=je(he,He,Me);(0,N.Di)("".concat(he.metadata.name,".json"),JSON.stringify(We))}else It.error("\u6B64\u6570\u636E\u4E0D\u652F\u6301 GeoJSON \u683C\u5F0F\u8F93\u51FA")}if(de==="csv"&&(0,N.Di)("".concat(he.metadata.name,".").concat(de),ve(he)),de==="xlsx"){var rt=Ae(he);rt?(0,N.lm)("".concat(he.metadata.name,".").concat(de),rt):It.error("".concat(he.metadata.name,"\u6570\u636E\u4E0D\u652F\u6301 xlsx \u683C\u5F0F\u8F93\u51FA"))}Re(!1)}catch(Ve){throw Ve}};return Ne().createElement(Se.Modal,{className:Ye,destroyOnClose:!0,open:Oe,onCancel:function(){return Re(!1)},title:"\u5BFC\u51FA\u6570\u636E",width:600,onOk:Ft,okText:"\u5BFC\u51FA",cancelText:"\u8FD4\u56DE"},Qt,Ne().createElement(Se.Form,{colon:!1,form:at},Ne().createElement(Se.Form.Item,{name:"dataSourceId",label:Ne().createElement("div",{className:oe()("".concat(Ye,"__form-label"),Ge.formLabel)},Ne().createElement("span",null,"\u6570\u636E\u96C6"),Ne().createElement("span",{className:oe()("".concat(Ye,"__form-desc"),Ge.formDesc)},"\u9009\u62E9\u8981\u5BFC\u51FA\u7684\u6570\u636E\u96C6")),style:{padding:20},initialValue:bt.length?"all":void 0},Ne().createElement(Se.Select,{options:Zt})),Ne().createElement(Se.Form.Item,{name:"type",label:Ne().createElement("div",{className:oe()("".concat(Ye,"__form-label"),Ge.formLabel)},Ne().createElement("span",null,"\u6570\u636E\u7C7B\u578B"),Ne().createElement("span",{className:oe()("".concat(Ye,"__form-desc"),Ge.formDesc)},"\u9009\u62E9\u8981\u5BFC\u51FA\u7684\u6570\u636E\u7C7B\u578B")),style:{padding:20},initialValue:"json"},Ne().createElement(Se.Radio.Group,{optionType:"button",buttonStyle:"solid",options:Ut}))))},Ze=Le},36268:function(Pt,ot,Q){"use strict";Q.d(ot,{T:function(){return ie},rd:function(){return ei},D7:function(){return si},a:function(){return Jp},G9:function(){return fd},gt:function(){return yd},kk:function(){return SO},sP:function(){return VO},Sf:function(){return CE},u0:function(){return vA},I6:function(){return Dj}});var Se=Q(73788),P=Q(81821),oe=Q(12611),N=Q(87363),i=Q.n(N),Ne=Q(90005),I=Q.n(Ne),ne=Q(66154),Ie=Q(25435),Ue=function(t){var r=t.type,n=Ie.DATASET_FIELD_TYPE_MAP[r],o=n.color,a=n.value;return i().createElement(P.Tag,{color:o},a)},lt=Ue,G=Q(87651),$e,tt,et,pe;function ae(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var se=function(){return{datasetPreview:(0,G.iv)($e||($e=ae([`
      min-width: 600px;
    `]))),datasetPreviewClamp:(0,G.iv)(tt||(tt=ae([`
      display: inline-block;
      width: 150px;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    `]))),datasetPreviewTable:(0,G.iv)(et||(et=ae([`
      width: 100%;
      padding: 20px;
    `]))),datasetPreviewClampTitle:(0,G.iv)(pe||(pe=ae([`
      width: 100%;
    `])))}},ve=se;function Ae(e){"@babel/helpers - typeof";return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(e)}function je(e,t){return ue(e)||U(e,t)||J(e,t)||Ce()}function Ce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J(e,t){if(e){if(typeof e=="string")return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}}function K(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function ue(e){if(Array.isArray(e))return e}var be=function(t){var r=t.datasetId,n=t.visible,o=t.onCancel,a=(0,N.useState)({current:1,pageSize:50}),u=je(a,2),c=u[0],l=u[1],s=(0,ne.OA)(r),y=(0,ne.F8)("dataset-preview"),A=ve();if(!(s!=null&&s.isLocalOrRemoteDataset))return null;var E=s.data,h=E===void 0?[]:E,_=s.columns,g=_===void 0?[]:_,C=function(){var j=[{title:" \u5E8F\u53F7 ",width:70,fixed:"left",render:function(F,L,k){return"".concat((c.current-1)*c.pageSize+(k+1))}}];return g==null||g.forEach(function(D){j.push({key:D.name,dataIndex:D.name,width:150,ellipsis:!0,render:function(L){return Ae(L)==="object"?i().createElement(P.Tooltip,{title:JSON.stringify(L)},i().createElement("span",{className:I()("".concat(y,"__clamp"),A.datasetPreviewClamp)},JSON.stringify(L))):typeof L=="string"?L.length>20?i().createElement(P.Tooltip,{title:L},i().createElement("span",{className:I()("".concat(y,"__clamp"),A.datasetPreviewClamp)},L)):i().createElement("span",{className:I()("".concat(y,"__clamp"),A.datasetPreviewClamp)},L):i().createElement("span",{className:I()("".concat(y,"__clamp"),A.datasetPreviewClamp)},L)},title:function(){return i().createElement("div",{className:I()("".concat(y,"__clamp-title"),A.datasetPreviewClampTitle)},i().createElement(lt,{type:D.type}),i().createElement("span",{title:D.name},D.name))}})}),j};return i().createElement(P.Modal,{className:I()(y,A.datasetPreview),title:"".concat(s.metadata.name),open:n,destroyOnClose:!0,width:"calc(100vw - 200px)",footer:null,onCancel:function(){return o()}},i().createElement(P.Table,{className:I()("".concat(y,"__table"),A.datasetPreviewTable),dataSource:h,rowKey:function(j){return(0,oe.uniqueId)("location-insight".concat(j.id))},bordered:!0,sticky:!0,size:"small",columns:C(),scroll:{x:380,y:"calc(80vh - 100px)"},pagination:{showSizeChanger:!1,showQuickJumper:!0,showTitle:!0,pageSize:c.pageSize,onChange:function(j,D){l({current:j,pageSize:D})},showTotal:function(j){return i().createElement("span",null,j,"\u6761")}}}))},xe=be,ie=(0,Se.BP)({version:"v0.1",component:xe,metadata:{name:"DatasetPreview",displayName:"\u6570\u636E\u9884\u89C8",description:"\u9884\u89C8\u6570\u636E\u96C6"},container:{type:"Datasets",slot:"preview"}}),M=Q(16640),me=Q.n(M),H=Q(613);function X(e,t){return Le(e)||Pe(e,t)||le(e,t)||$()}function $(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function le(e,t){if(e){if(typeof e=="string")return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,t)}}function fe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pe(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Le(e){if(Array.isArray(e))return e}var Ze=function(t){var r,n=t.title,o=t.visible,a=t.onClose,u=t.onSubmit,c=(0,H._)(),l=c.containerSlotMap,s=((r=l.Datasets)===null||r===void 0?void 0:r.addDataset)||[],y=s[0].metadata.name,A=(0,N.useState)(y),E=X(A,2),h=E[0],_=E[1],g=s.map(function(x){return{label:x.metadata.displayName,value:x.metadata.name}}),C=s.find(function(x){return x.metadata.name===h}).component;return i().createElement(P.Modal,{title:n,width:"min-content",style:{minWidth:1e3},destroyOnClose:!0,open:o,footer:null,onCancel:a},g.length>1&&i().createElement(P.Segmented,{options:g,onChange:function(j){_(j)},defaultValue:h,style:{marginBottom:20}}),i().createElement(C,{onCancel:a,onSubmit:u}))},ge=Ze,_e=Q(6691),Oe=Q(42432);function Re(e){"@babel/helpers - typeof";return Re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Re(e)}function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ye(Object(r),!0).forEach(function(n){Xe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xe(e,t,r){return t=ze(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ze(e){var t=at(e,"string");return Re(t)=="symbol"?t:String(t)}function at(e,t){if(Re(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Re(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _t=function(t,r){return t.map(function(n){var o,a,u=(o=n.id)!==null&&o!==void 0?o:(0,Ie.getUniqueId)(),c=r?Ge(Ge({},n.metadata),{},{_autoCreateLayers:r}):n.metadata;return n.type==="local"?a=Ge(Ge({},n),{},{id:u,metadata:c,columns:[]}):a=Ge(Ge({},n),{},{id:u,metadata:c}),(0,Se.KE)(a)})},gt=function(t,r){return t.filter(Se.pw).map(function(n){var o=r.getImplementLayer(n.type),a=Ge(Ge({},o==null?void 0:o.defaultVisConfig),n.visConfig);return Ge(Ge({},n),{},{visConfig:a})})},bt=function(t,r,n){if(t.length!==0){var o=r.map(function(u){return new _e.r(u,n)}),a=(0,Oe.vI)(t,o);a&&(0,Se.Kk)(function(){n.fitMapBounds(a)})}},Ct=function(t){var r=t.visible,n=t.onClose,o=(0,ne.ox)(),a=o.appService,u=(0,ne.sZ)(),c=u.updateState,l=function(E){c(function(h){E.forEach(function(_){h.datasets.find(function(g){return g.id===_.id})||h.datasets.push(_)})})},s=function(E){c(function(h){E.forEach(function(_){h.layers.find(function(g){return g.id===_.id})||h.layers.push(_)})})},y=function(E,h){if(h){var _=_t(E),g=gt(h,a);l(_),s(g),(0,Se.Kk)(function(){bt(g,_,a)})}else{var C=_t(E,!0);l(C)}n()};return i().createElement(ge,{title:"\u65B0\u589E\u6570\u636E\u96C6",visible:r,onSubmit:y,onClose:n})},xt=Ct,It=Q(41991),Qt,Ut,Zt;function Ft(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var At=function(){return{titleName:(0,G.iv)(Qt||(Qt=Ft([`
      display: flex;
    `]))),titleNameText:(0,G.iv)(Ut||(Ut=Ft([`
      display: flex;
      align-items: center;
      cursor: pointer;
      justify-content: space-between;
      max-width: 180px;
    `]))),titleNameTitle:(0,G.iv)(Zt||(Zt=Ft([`
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    `])))}},Lt=At;function we(e,t){return We(e)||He(e,t)||he(e,t)||de()}function de(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function he(e,t){if(e){if(typeof e=="string")return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(e,t)}}function Me(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function He(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function We(e){if(Array.isArray(e))return e}var rt=function(e){var t=e.className,r=e.name,n=e.isEdit,o=e.onClick,a=e.onCancel,u=e.onChange,c=(0,N.useState)(""),l=we(c,2),s=l[0],y=l[1],A=P.message.useMessage(),E=we(A,2),h=E[0],_=E[1],g=(0,ne.F8)("title-name"),C=Lt(),x=(0,N.useCallback)(function(){if(!s){h.warning("\u8BF7\u8F93\u5165\u540D\u79F0");return}s===r?a():(u(s),h.success("\u540D\u79F0\u4FEE\u6539\u6210\u529F"))},[s,r,u]);return(0,N.useEffect)(function(){n&&y(r)},[n,r]),i().createElement("div",{className:I()("".concat(g),C.titleName,t)},_,n?i().createElement(P.Input,{autoFocus:!0,allowClear:!0,value:s,size:"small",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",suffix:i().createElement(M.EnterOutlined,null),onPressEnter:x,onChange:function(D){return y(D.target.value)},onBlur:a}):i().createElement("span",{className:I()("".concat(g,"__text"),C.titleNameText)},i().createElement("span",{className:I()("".concat(g,"__title"),C.titleNameTitle),onClick:o},i().createElement(P.Tooltip,{title:r},r))))},Ve,it,Et,wt,jt,Do,To,Tr;function Nt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Fo=function(){var t=(0,ne.Sr)(),r=t.antCls,n=t.colorBgContainer,o=t.colorSplit,a=t.colorPrimary,u=t.borderRadius;return{listCard:(0,G.iv)(Ve||(Ve=Nt([`
      position: relative;
      width: auto;
      padding: 8px;
      background-color: `,`;
      border: 1px solid `,`;
      border-left: 3px solid `,`;
      border-radius: `,`px;
      cursor: pointer;

      & + & {
        margin-top: 10px;
      }
    `])),n,o,a,u),listActions:(0,G.iv)(it||(it=Nt([`
      position: absolute;
      top: 0;
      right: 10px;
      height: 40px !important;
      padding-top: 6px;
      cursor: pointer;

      `,`-space-item {
        opacity: 1;
      }

      &:hover [data-comp='dataset-actions-item_hover-show'] {
        opacity: 1 !important;
      }
    `])),r),actionsItem:(0,G.iv)(Et||(Et=Nt([`
      opacity: 0;
    `]))),listInfo:(0,G.iv)(wt||(wt=Nt([`
      width: 200px;
      height: 100%;
      padding-top: 3px;
      overflow: hidden;

      > * {
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
      }
    `]))),infoName:(0,G.iv)(jt||(jt=Nt([`
      color: #979a9d;
      font-size: 12px;
    `]))),infoCount:(0,G.iv)(Do||(Do=Nt([`
      color: #979a9d;
    `]))),popconfirmTitle:(0,G.iv)(To||(To=Nt([`
      margin-bottom: 0;
      color: #bbb;
      font-size: 10px;
    `]))),popconfirmLayersCount:(0,G.iv)(Tr||(Tr=Nt([`
      color: #faad14;
    `])))}},Lo=Fo;function Jt(e){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jt(e)}function Fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fr(Object(r),!0).forEach(function(n){Vt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vt(e,t,r){return t=La(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function La(e){var t=Na(e,"string");return Jt(t)=="symbol"?t:String(t)}function Na(e,t){if(Jt(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qt(e,t){return ka(e)||Ba(e,t)||Ra(e,t)||Ma()}function Ma(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ra(e,t){if(e){if(typeof e=="string")return No(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return No(e,t)}}function No(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ba(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function ka(e){if(Array.isArray(e))return e}var Ya=function(t){var r=t.dataset,n=t.onReplaceDataset,o=t.onPreviewDataset,a=t.className,u=(0,ne.sZ)(),c=u.state,l=u.updateState,s=(0,ne.F8)("dataset-list"),y=Lo(),A=(0,N.useState)(!1),E=qt(A,2),h=E[0],_=E[1],g=(0,ne.OA)(r.id),C=g==null?void 0:g.isLocalOrRemoteDataset,x=P.message.useMessage(),j=qt(x,2),D=j[0],F=j[1],L=function(){n(r.id)},k=function(){var q=lr(lr({},r),{},{metadata:lr(lr({},r.metadata),{},{name:"".concat(r.metadata.name,"copy")}),id:(0,Ie.getUniqueId)(r.id)});l(function(ee){ee.datasets.push(q)}),D.success("\u590D\u5236\u6210\u529F")},Y=function(){if(C){var q=g.metadata;(0,It.Di)("".concat(q.name,".json"),JSON.stringify(g.data))}},Z=function(q){l(function(ee){var re=ee.datasets.findIndex(function(p){return p.id===r.id});ee.datasets[re].metadata.name=q,_(!1)})},B=function(q){return c.layers.filter(function(ee){return ee.sourceConfig.datasetId===q}).length},W=function(){l(function(q){var ee=q.datasets.findIndex(function(re){return re.id===r.id});q.layers=q.layers.filter(function(re){return re.sourceConfig.datasetId!==r.id}),q.datasets.splice(ee,1)})},z=[{key:"replaceDataset",label:i().createElement(i().Fragment,null,"\u66FF\u6362\u6570\u636E\u96C6"),onClick:function(){L()}},{key:"copyDataset",label:i().createElement(i().Fragment,null,"\u590D\u5236\u6570\u636E\u96C6"),onClick:function(){k()}},{key:"downloadDataset",label:i().createElement(i().Fragment,null,"\u5BFC\u51FA\u6570\u636E\u96C6"),onClick:function(){Y()}}];return i().createElement("div",{className:I()("".concat(s,"__card"),y.listCard,a)},i().createElement("div",{className:I()("".concat(s,"__info"),y.listInfo)},i().createElement(rt,{name:r.metadata.name,isEdit:h,onChange:Z,onCancel:function(){_(!1)}}),i().createElement("div",{className:I()("".concat(s,"__info-name"),y.infoName),onClick:function(q){q.stopPropagation()}},C?i().createElement(i().Fragment,null,"\u5171",i().createElement("span",{className:I()("".concat(s,"__info-count"),y.infoCount)},g.data.length),"\u884C\u6570\u636E"):g==null?void 0:g.metadata.description)),i().createElement(P.Space,{className:I()("".concat(s,"__actions"),y.listActions),onClick:function(q){return q.stopPropagation()}},i().createElement(P.Tooltip,{title:"\u70B9\u51FB\u4FEE\u6539\u6570\u636E\u96C6\u540D\u79F0"},i().createElement(M.FormOutlined,{"data-comp":"dataset-actions-item_hover-show",className:I()("".concat(s,"__actions-item"),y.actionsItem),onClick:function(){_(!0)}})),i().createElement(P.Popconfirm,{title:i().createElement("div",null,i().createElement("span",null,"\u4F60\u786E\u5B9A\u8981\u5220\u9664",r.metadata.name,"\u5417"),B(r.id)?i().createElement("p",{className:I()("".concat(s,"__popconfirm-title"),y.popconfirmTitle)},"\u5220\u6389\u6B64\u6570\u636E\u96C6\uFF0C\u4F1A\u5220\u9664\u4E0E\u6B64\u6570\u636E\u96C6\u5173\u8054\u7684",i().createElement("span",{className:I()("".concat(s,"__popconfirm-layers-count"),y.popconfirmLayersCount)},B(r.id)),"\u4E2A\u56FE\u5C42"):null),placement:"bottom",onConfirm:W,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},i().createElement(P.Tooltip,{title:"\u5220\u9664\u6570\u636E\u96C6",placement:"top"},i().createElement(M.DeleteOutlined,{"data-comp":"dataset-actions-item_hover-show",className:I()("".concat(s,"__actions-item"),y.actionsItem),onClick:function(q){return q.stopPropagation()}}))),C&&i().createElement(P.Tooltip,{title:"\u70B9\u51FB\u67E5\u770B\u6570\u636E\u96C6\u8BE6\u60C5"},i().createElement(M.InsertRowAboveOutlined,{onClick:function(){o(r.id)}})),i().createElement(P.Dropdown,{menu:{items:z}},i().createElement(M.MoreOutlined,null)),F))},Mo=Ya,Ro;function Wa(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ha=function(){return{datasetList:(0,G.iv)(Ro||(Ro=Wa([`
      width: 100%;
    `])))}},za=Ha;function Ua(e){var t=(0,ne.sZ)(),r=t.state,n=r.datasets,o=(0,ne.F8)("dataset-list"),a=za();return(0,oe.isEmpty)(n)?i().createElement(P.Empty,{image:P.Empty.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65E0\u6570\u636E\uFF0C\u8BF7\u5148\u6DFB\u52A0\u6570\u636E\u96C6"}):i().createElement("div",{className:I()(o,a.datasetList,e.className)},n.map(function(u){return i().createElement(Mo,{key:u.id,dataset:u,onReplaceDataset:e.onReplaceDataset,onPreviewDataset:e.onPreviewDataset})}))}var ur=function(t){var r,n=t.datasetId,o=t.visible,a=t.onClose,u=(0,H._)(),c=u.containerSlotMap,l=(r=c.Datasets)===null||r===void 0?void 0:r.preview[0].component;return i().createElement(l,{visible:o,onCancel:a,datasetId:n})},Bo=ur;function Xt(e){"@babel/helpers - typeof";return Xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(e)}function Va(e,t){return Qa(e)||Ka(e,t)||ko(e,t)||Ga()}function Ga(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ko(e,t){if(e){if(typeof e=="string")return Yo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yo(e,t)}}function Yo(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ka(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Qa(e){if(Array.isArray(e))return e}function Wo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Ho(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wo(Object(r),!0).forEach(function(n){cr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wo(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cr(e,t,r){return t=$t(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $t(e){var t=zo(e,"string");return Xt(t)=="symbol"?t:String(t)}function zo(e,t){if(Xt(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uo=function(t){var r=t.datasetId,n=t.visible,o=t.onClose,a=(0,ne.sZ)(),u=a.updateState,c=function(y){u(function(A){var E=A.datasets.findIndex(function(h){return h.id===r});E!==-1&&(A.datasets[E]=Ho(Ho({},A.datasets[E]),y))})},l=function(y){var A=y[0];if(A){var E=_t([A]),h=Va(E,1),_=h[0];_.id=r,c(_)}o()};return i().createElement(ge,{title:"\u66FF\u6362\u6570\u636E\u96C6",visible:n,onSubmit:l,onClose:o})},Za=Uo,Lr,Vo,Go,hr;function Sr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ja=function(){var t=(0,ne.Sr)(),r=t.colorSplit;return{datasetPanel:(0,G.iv)(Lr||(Lr=Sr([`
      position: relative;
      height: 100%;
    `]))),panelHeader:(0,G.iv)(Vo||(Vo=Sr([`
      margin: 0 20px;
      padding: 15px 0 15px;
      font-weight: 500;
      font-size: 16px;
      border-bottom: 1px solid `,`;
    `])),r),addDataset:(0,G.iv)(Go||(Go=Sr([`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
      font-size: 14px;
    `]))),datasetList:(0,G.iv)(hr||(hr=Sr([`
      height: calc(100% - 57px - 52px);
      padding: 0 20px 15px;
      overflow-y: auto;
    `])))}},Ko=Ja;function sr(e,t){return Xa(e)||qa(e,t)||Qo(e,t)||_r()}function _r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qo(e,t){if(e){if(typeof e=="string")return Nr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nr(e,t)}}function Nr(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qa(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Xa(e){if(Array.isArray(e))return e}var fr=function(t){var r=t.className,n=(0,ne.F8)("datasets-panel"),o=Ko(),a=(0,ne.sZ)(),u=a.state,c=(0,N.useState)(!1),l=sr(c,2),s=l[0],y=l[1],A=(0,N.useState)(""),E=sr(A,2),h=E[0],_=E[1],g=(0,N.useState)(!1),C=sr(g,2),x=C[0],j=C[1],D=(0,N.useState)(""),F=sr(D,2),L=F[0],k=F[1],Y=(0,N.useState)(!1),Z=sr(Y,2),B=Z[0],W=Z[1];return i().createElement("div",{className:I()(n,o.datasetPanel,r)},i().createElement("div",{className:I()("".concat(n,"__header"),o.panelHeader)},"\u6570\u636E"),i().createElement("div",{className:I()("".concat(n,"__add-dataset"),o.addDataset)},i().createElement("span",null,"\u6570\u636E\u96C6(",u.datasets.length,")"),i().createElement(P.Button,{type:"primary",icon:i().createElement(M.PlusOutlined,null),onClick:function(){y(!0)},id:"LITourAddDataset"},"\u65B0\u589E\u6570\u636E\u96C6")),i().createElement(Ua,{className:I()("".concat(n,"__dataset-list"),o.datasetList),onReplaceDataset:function(R){_(R),j(!0)},onPreviewDataset:function(R){k(R),W(!0)}}),i().createElement(xt,{visible:s,onClose:function(){return y(!1)}}),i().createElement(Za,{datasetId:h,visible:x,onClose:function(){return j(!1)}}),B&&i().createElement(Bo,{datasetId:L,visible:B,onClose:function(){return W(!1)}}))},$a=fr,ei=(0,Se.BP)({version:"v0.1",component:$a,metadata:{name:"DatasetsPanel",displayName:"\u6570\u636E\u96C6\u8BBE\u7F6E",description:"\u6570\u636E\u96C6\u9762\u677F"},container:{type:"SideNav",slot:"menuPanel"},menu:{name:"\u6570\u636E",key:"datasets",icon:i().createElement(M.DatabaseOutlined,null)}}),Mr,Zo,Rr,Jo;function Cr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var qo=function(){var t=(0,ne.Sr)(),r=t.colorText,n=t.colorSplit;return{contentItem:(0,G.iv)(Mr||(Mr=Cr([`
      display: flex;
    `]))),appTitle:(0,G.iv)(Zo||(Zo=Cr([`
      width: 185px;
      margin-right: 60px;
    `]))),appSubtitle:(0,G.iv)(Rr||(Rr=Cr([`
      color: rgb(160, 167, 180);
      font-size: 11px;
    `]))),appCodePre:(0,G.iv)(Jo||(Jo=Cr([`
      display: inline-block;
      width: 100%;
      max-width: 600px;
      height: 180px;
      overflow: hidden;
      overflow-y: auto;
      color: `,`;
      border: 1 solid `,`;
      border-radius: 2px;
    `])),r,n)}},ti=qo,ri=function(t){var r=t.visible,n=t.onVisbleChange,o=(0,ne.F8)("export-app"),a=ti(),u=(0,ne.ox)(),c=u.editorService,l=c.getApplicationConfig(),s=function(){n(!1)},y=function(){n(!1)};return i().createElement(P.Modal,{className:o,width:960,title:"\u5BFC\u51FA\u914D\u7F6E",open:r,onCancel:y,destroyOnClose:!0,footer:i().createElement(i().Fragment,null,i().createElement(P.Button,{onClick:y},"\u8FD4\u56DE"),i().createElement(P.Button,{type:"primary",onClick:s},i().createElement("a",{download:"li-app.json",href:"data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(l,null,2))),target:"_blank",rel:"noreferrer"},"\u5BFC\u51FA")))},i().createElement("div",{className:I()("".concat(o,"__content-item"),a.contentItem)},i().createElement("div",{className:I()("".concat(o,"__title"),a.appTitle)},i().createElement("div",null,"\u5E94\u7528\u914D\u7F6E"),i().createElement("div",{className:I()("".concat(o,"__subtitle"),a.appSubtitle)},"\u5E94\u7528\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u5BFC\u51FA\u540E\u53EF\u4EE5\u901A\u8FC7\u9879\u76EE\u65B9\u5F0F\u518D\u6B21\u5BFC\u5165\u3002")),i().createElement("pre",{className:I()("".concat(o,"__code-pre"),a.appCodePre)},JSON.stringify(l,null,"  "))))},ni=ri,mr=Q(59767),Br;function oi(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ai=function(){var t=(0,ne.Sr)(),r=t.antCls;return{exportPopover:(0,G.iv)(Br||(Br=oi([`
      `,`-popover-inner-content {
        padding: 0;
      }
    `])),r)}},ii=ai;function kr(e,t){return kt(e)||ui(e,t)||li(e,t)||Yr()}function Yr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function li(e,t){if(e){if(typeof e=="string")return Wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wr(e,t)}}function Wr(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ui(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function kt(e){if(Array.isArray(e))return e}var Xo=function(){var t=(0,ne.F8)("export-popover"),r=ii(),n=(0,N.useState)(!1),o=kr(n,2),a=o[0],u=o[1],c=(0,N.useState)(!1),l=kr(c,2),s=l[0],y=l[1],A=(0,N.useState)(!1),E=kr(A,2),h=E[0],_=E[1],g=function(){u(!0)},C=function(){y(!0)},x=i().createElement("div",{style:{display:"flex",flexDirection:"column"}},i().createElement(P.Button,{type:"text",size:"middle",icon:i().createElement(M.TableOutlined,{size:18}),onClick:g},"\u5BFC\u51FA\u6570\u636E"),i().createElement(P.Button,{type:"text",size:"middle",icon:i().createElement(M.CodeOutlined,{size:18}),onClick:C},"\u5BFC\u51FA\u914D\u7F6E"));return i().createElement(i().Fragment,null,i().createElement(P.Popover,{overlayClassName:I()(t,r.exportPopover),placement:"rightBottom",trigger:"click",arrow:!1,content:x,onOpenChange:function(D){D&&_(!1)}},i().createElement(P.Tooltip,{placement:"right",title:"\u5BFC\u51FA",open:h,onOpenChange:function(D){_(D)}},i().createElement(P.Button,{type:"text",size:"middle",shape:"circle",icon:i().createElement(M.DownloadOutlined,{size:18})}))),s&&i().createElement(ni,{visible:s,onVisbleChange:y}),a&&i().createElement(mr.Z,{visible:a,onVisbleChange:u}))},ci=Xo,si=(0,Se.BP)({version:"v0.1",component:ci,metadata:{name:"Export",displayName:"\u5BFC\u51FA",description:"\u6570\u636E\u5BFC\u51FA"},container:{type:"SideNav",slot:"bottom"}}),$o,Gt,Or,ea,Hr,ta,ra;function Mt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var fi=function(){var t=(0,ne.Sr)(),r=t.antCls,n=t.colorBorder;return{dynamicFormItem:(0,G.iv)($o||($o=Mt([`
      display: flex;
      flex: 1;
      justify-content: space-between;
      height: 42px;
      overflow: hidden;

      `,`-form-item {
        margin-bottom: 10px;
      }
    `])),r),itemField:(0,G.iv)(Gt||(Gt=Mt([`
      width: 200px;
    `]))),itemIcon:(0,G.iv)(Or||(Or=Mt([`
      width: 10px;
      color: `,`;
    `])),n),itemValue:(0,G.iv)(ea||(ea=Mt([`
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 450px;
      overflow: hidden;
    `]))),valueContent:(0,G.iv)(Hr||(Hr=Mt([`
      width: 100%;

      `,`-input-number {
        width: 100%;
      }

      `,`-input-number-input {
        vertical-align: baseline;
      }
    `])),r,r),valueType:(0,G.iv)(ta||(ta=Mt([`
      margin-left: 5px;
    `]))),dynamicFormAddBtn:(0,G.iv)(ra||(ra=Mt([`
      width: 100px;
      margin: 0;
    `])))}},na=fi;function Tt(e,t){return pi(e)||oa(e,t)||Er(e,t)||mi()}function mi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Er(e,t){if(e){if(typeof e=="string")return Rt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rt(e,t)}}function Rt(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oa(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function pi(e){if(Array.isArray(e))return e}var aa=function(t){var r=(0,N.useState)("string"),n=Tt(r,2),o=n[0],a=n[1],u=(0,N.useState)(),c=Tt(u,2),l=c[0],s=c[1],y=t.onChange,A=(0,ne.F8)("li-dynamic-form-item__item__value"),E=na(),h=function(C){s(C)},_=function(C){a(C)};return(0,N.useEffect)(function(){if(o==="expression"){var g=l?{type:"JSExpression",value:"".concat(l)}:null;return y==null?void 0:y(g)}return y==null?void 0:y(l)},[o,l]),i().createElement("div",{className:I()(A,E.itemValue)},i().createElement("div",{className:I()("".concat(A,"__content"),E.valueContent)},o==="string"&&i().createElement(P.Input,{placeholder:"\u8BF7\u8F93\u5165",onChange:function(C){return h(C.target.value)}}),o==="boolean"&&i().createElement(P.Switch,{onChange:h}),o==="number"&&i().createElement(P.InputNumber,{placeholder:"\u8BF7\u8F93\u5165",onChange:function(C){return h(Number(C))}}),o==="expression"&&i().createElement(P.Input,{prefix:"{{",suffix:"}}",placeholder:"\u8BF7\u8F93\u5165 JS \u8868\u8FBE\u5F0F",onChange:function(C){return h(C.target.value)}})),i().createElement("div",{className:I()("".concat(A,"__type"),E.valueType)},i().createElement(P.Select,{style:{width:"90px"},value:o,onChange:_,options:[{value:"string",label:"\u5B57\u7B26\u4E32"},{value:"boolean",label:"\u5E03\u5C14\u503C"},{value:"number",label:"\u6570\u503C"}]})))},yi=aa,Ll=["key","name"];function zr(){return zr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zr.apply(this,arguments)}function di(e,t){if(e==null)return{};var r=Nl(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Nl(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var Ml=function(t){var r=t.fieldName,n=(0,ne.F8)("dynamic-form-item"),o=na();return i().createElement(P.Form.List,{name:r},function(a,u){var c=u.add,l=u.remove;return i().createElement(i().Fragment,null,a.map(function(s){var y=s.key,A=s.name,E=di(s,Ll);return i().createElement(P.Space,{key:y,align:"baseline",className:I()("".concat(n,"__item"),o.dynamicFormItem)},i().createElement(P.Form.Item,zr({},E,{name:[A,"field"],className:I()("".concat(n,"__item__field"),o.itemField)}),i().createElement(P.Input,{placeholder:"name"})),i().createElement("div",{className:I()("".concat(n,"__item__icon"),o.itemIcon)},":"),i().createElement(P.Form.Item,zr({},E,{name:[A,"value"],className:I()("".concat(n,"__item__value"),o.itemValue)}),i().createElement(yi,null)),i().createElement(M.MinusCircleOutlined,{onClick:function(){return l(A)}}))}),i().createElement(P.Form.Item,{className:I()("".concat(n,"__add-btn"),o.dynamicFormAddBtn)},i().createElement(P.Button,{onClick:function(){return c()},block:!0,icon:i().createElement(M.PlusOutlined,null)},"\u6DFB\u52A0")))})},v=Ml,d;function O(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=function(){return{fetchDataset:(0,G.iv)(d||(d=O([`
      width: 800px;
    `])))}},te=T;function Ee(e,t){return ut(e)||Qe(e,t)||Ke(e,t)||De()}function De(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ke(e,t){if(e){if(typeof e=="string")return Be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Be(e,t)}}function Be(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qe(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function ut(e){if(Array.isArray(e))return e}var dt=function(t){if(!t||(0,oe.isEmpty)(t))return{};for(var r={},n=0;n<t.length;n++){var o;(o=t[n])!==null&&o!==void 0&&o.field&&(r[t[n].field]=t[n].value)}return r},mt=function(t){var r=t.url,n=t.method,o=t.body,a=t.headers,u=t.processingFunction,c=u||{},l=c.onComplete,s=c.onError,y=dt(a),A=dt(o);if(n==="GET"){if(!(0,oe.isEmpty)(A)){for(var E="",h=0,_=Object.entries(A);h<_.length;h++){var g=Ee(_[h],2),C=g[0],x=g[1];E+="&".concat(C,"=").concat(x)}var j=r+E.replace("&","?");return{url:j,requestOptions:{method:n,headers:y},onComplete:l,onError:s}}return{url:r,requestOptions:{method:n,headers:y},onComplete:l,onError:s}}return{url:r,requestOptions:{method:n,body:A,headers:y},onComplete:l,onError:s}},Ot=Q(57088),nt=function(t){var r={};return t.forEach(function(n){n.key==="success-func"?r.onComplete={value:n.value.toString(),type:"JSFunction"}:r.onError={value:n.value.toString(),type:"JSFunction"}}),r},ct,ht,pr,er;function ia(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Pp=function(){return{successAndErr:(0,G.iv)(ct||(ct=ia([`
      margin-top: 10px;
    `]))),content:(0,G.iv)(ht||(ht=ia([`
      display: flex;
      align-items: center;
      justify-content: center;
    `]))),contentJs:(0,G.iv)(pr||(pr=ia([`
      flex: 1;
      height: 100px;
    `]))),contentIcon:(0,G.iv)(er||(er=ia([`
      width: 30px;
      text-align: center;

      &:hover {
        cursor: pointer;
      }
    `])))}},Ip=Pp;function Ur(e){"@babel/helpers - typeof";return Ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ur(e)}function Rl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function la(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rl(Object(r),!0).forEach(function(n){jp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rl(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jp(e,t,r){return t=xp(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xp(e){var t=Dp(e,"string");return Ur(t)=="symbol"?t:String(t)}function Dp(e,t){if(Ur(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ur(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bl(e){return Lp(e)||Fp(e)||kl(e)||Tp()}function Tp(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fp(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lp(e){if(Array.isArray(e))return vi(e)}function Np(e,t){return Bp(e)||Rp(e,t)||kl(e,t)||Mp()}function Mp(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kl(e,t){if(e){if(typeof e=="string")return vi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vi(e,t)}}function vi(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rp(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Bp(e){if(Array.isArray(e))return e}var Yl=[{key:"success-func",label:"\u8BF7\u6C42\u6210\u529F\u5BF9\u7ED3\u679C\u7684\u5904\u7406\u51FD\u6570"},{key:"error-func",label:"\u8BF7\u6C42\u5931\u8D25\u5BF9\u5F02\u5E38\u7684\u5904\u7406\u51FD\u6570"}],kp=function(t){var r=t.onChange,n=(0,ne.F8)("provessing-function"),o=Ip(),a=(0,N.useState)(Yl),u=Np(a,2),c=u[0],l=u[1],s=(0,N.useRef)([]),y=function(g){s.current=Bl(g);var C=nt(g);r&&r(C);var x=g.map(function(D){return D.key}),j=Yl.filter(function(D){return D&&D.key&&typeof D.key=="string"&&!x.includes(D.key)});l(j)},A=function(g){var C=g.key==="success-func"?{name:g.label,value:`// \u51FD\u6570\u5FC5\u987B\u8FD4\u56DE Record<string, any>[] \u6570\u7EC4\u5BF9\u8C61\u6570\u636E\u7ED3\u6784
function onComplete(res) {
  return res.data;
}`,key:g.key}:{name:g.label,value:`function onError(err) {

}`,key:g.key},x=[].concat(Bl(s.current),[C]);y(x)},E=function(g){var C=s.current.filter(function(x){return x.key!==g});y(C)},h=function(g,C){var x=s.current.map(function(D){return D.key===C?la(la({},D),{},{value:g}):D}),j=nt(x);r&&r(j),s.current=x};return i().createElement("div",{className:n},i().createElement("div",{className:"".concat(n,"__btn")},i().createElement(P.Dropdown,{menu:{items:c.map(function(_){return la(la({},_),{},{onClick:function(){return A(_)}})})},disabled:c.length===0},i().createElement(P.Button,null,"\u9009\u62E9\u6DFB\u52A0 ",i().createElement(M.DownOutlined,null)))),s.current.map(function(_){return i().createElement("div",{className:I()("".concat(n,"__success-and-err"),o.successAndErr),key:_.key},i().createElement("p",null,_.name,":"),i().createElement("div",{className:I()("".concat(n,"__success-and-err__content"),o.content)},i().createElement("div",{className:I()("".concat(n,"__success-and-err__content-js"),o.contentJs)},i().createElement(Ot.ZP,{language:"javascript",options:{lineNumbers:"off",minimap:{enabled:!1},overviewRulerBorder:!1},onChange:function(C){return h(C,_.key)},theme:"vs-dark",defaultValue:_.value})),i().createElement("div",{className:I()("".concat(n,"__success-and-err__content-icon"),o.contentIcon)},i().createElement(M.MinusCircleOutlined,{onClick:function(){E(_.key)}}))))}))},Yp=kp;function ua(e){"@babel/helpers - typeof";return ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ua(e)}var Wp=["name"];function gi(){"use strict";gi=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(p,f,m){p[f]=m.value},a=typeof Symbol=="function"?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(p,f,m){return Object.defineProperty(p,f,{value:m,enumerable:!0,configurable:!0,writable:!0}),p[f]}try{s({},"")}catch(p){s=function(m,b,w){return m[b]=w}}function y(p,f,m,b){var w=f&&f.prototype instanceof x?f:x,S=Object.create(w.prototype),V=new ee(b||[]);return o(S,"_invoke",{value:W(p,m,V)}),S}function A(p,f,m){try{return{type:"normal",arg:p.call(f,m)}}catch(b){return{type:"throw",arg:b}}}t.wrap=y;var E="suspendedStart",h="suspendedYield",_="executing",g="completed",C={};function x(){}function j(){}function D(){}var F={};s(F,u,function(){return this});var L=Object.getPrototypeOf,k=L&&L(L(re([])));k&&k!==r&&n.call(k,u)&&(F=k);var Y=D.prototype=x.prototype=Object.create(F);function Z(p){["next","throw","return"].forEach(function(f){s(p,f,function(m){return this._invoke(f,m)})})}function B(p,f){function m(w,S,V,ce){var ye=A(p[w],p,S);if(ye.type!=="throw"){var Te=ye.arg,Fe=Te.value;return Fe&&ua(Fe)=="object"&&n.call(Fe,"__await")?f.resolve(Fe.__await).then(function(ke){m("next",ke,V,ce)},function(ke){m("throw",ke,V,ce)}):f.resolve(Fe).then(function(ke){Te.value=ke,V(Te)},function(ke){return m("throw",ke,V,ce)})}ce(ye.arg)}var b;o(this,"_invoke",{value:function(S,V){function ce(){return new f(function(ye,Te){m(S,V,ye,Te)})}return b=b?b.then(ce,ce):ce()}})}function W(p,f,m){var b=E;return function(w,S){if(b===_)throw new Error("Generator is already running");if(b===g){if(w==="throw")throw S;return{value:e,done:!0}}for(m.method=w,m.arg=S;;){var V=m.delegate;if(V){var ce=z(V,m);if(ce){if(ce===C)continue;return ce}}if(m.method==="next")m.sent=m._sent=m.arg;else if(m.method==="throw"){if(b===E)throw b=g,m.arg;m.dispatchException(m.arg)}else m.method==="return"&&m.abrupt("return",m.arg);b=_;var ye=A(p,f,m);if(ye.type==="normal"){if(b=m.done?g:h,ye.arg===C)continue;return{value:ye.arg,done:m.done}}ye.type==="throw"&&(b=g,m.method="throw",m.arg=ye.arg)}}}function z(p,f){var m=f.method,b=p.iterator[m];if(b===e)return f.delegate=null,m==="throw"&&p.iterator.return&&(f.method="return",f.arg=e,z(p,f),f.method==="throw")||m!=="return"&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+m+"' method")),C;var w=A(b,p.iterator,f.arg);if(w.type==="throw")return f.method="throw",f.arg=w.arg,f.delegate=null,C;var S=w.arg;return S?S.done?(f[p.resultName]=S.value,f.next=p.nextLoc,f.method!=="return"&&(f.method="next",f.arg=e),f.delegate=null,C):S:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,C)}function R(p){var f={tryLoc:p[0]};1 in p&&(f.catchLoc=p[1]),2 in p&&(f.finallyLoc=p[2],f.afterLoc=p[3]),this.tryEntries.push(f)}function q(p){var f=p.completion||{};f.type="normal",delete f.arg,p.completion=f}function ee(p){this.tryEntries=[{tryLoc:"root"}],p.forEach(R,this),this.reset(!0)}function re(p){if(p||p===""){var f=p[u];if(f)return f.call(p);if(typeof p.next=="function")return p;if(!isNaN(p.length)){var m=-1,b=function w(){for(;++m<p.length;)if(n.call(p,m))return w.value=p[m],w.done=!1,w;return w.value=e,w.done=!0,w};return b.next=b}}throw new TypeError(ua(p)+" is not iterable")}return j.prototype=D,o(Y,"constructor",{value:D,configurable:!0}),o(D,"constructor",{value:j,configurable:!0}),j.displayName=s(D,l,"GeneratorFunction"),t.isGeneratorFunction=function(p){var f=typeof p=="function"&&p.constructor;return!!f&&(f===j||(f.displayName||f.name)==="GeneratorFunction")},t.mark=function(p){return Object.setPrototypeOf?Object.setPrototypeOf(p,D):(p.__proto__=D,s(p,l,"GeneratorFunction")),p.prototype=Object.create(Y),p},t.awrap=function(p){return{__await:p}},Z(B.prototype),s(B.prototype,c,function(){return this}),t.AsyncIterator=B,t.async=function(p,f,m,b,w){w===void 0&&(w=Promise);var S=new B(y(p,f,m,b),w);return t.isGeneratorFunction(f)?S:S.next().then(function(V){return V.done?V.value:S.next()})},Z(Y),s(Y,l,"Generator"),s(Y,u,function(){return this}),s(Y,"toString",function(){return"[object Generator]"}),t.keys=function(p){var f=Object(p),m=[];for(var b in f)m.push(b);return m.reverse(),function w(){for(;m.length;){var S=m.pop();if(S in f)return w.value=S,w.done=!1,w}return w.done=!0,w}},t.values=re,ee.prototype={constructor:ee,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!f)for(var m in this)m.charAt(0)==="t"&&n.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=e)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var m=this;function b(Te,Fe){return V.type="throw",V.arg=f,m.next=Te,Fe&&(m.method="next",m.arg=e),!!Fe}for(var w=this.tryEntries.length-1;w>=0;--w){var S=this.tryEntries[w],V=S.completion;if(S.tryLoc==="root")return b("end");if(S.tryLoc<=this.prev){var ce=n.call(S,"catchLoc"),ye=n.call(S,"finallyLoc");if(ce&&ye){if(this.prev<S.catchLoc)return b(S.catchLoc,!0);if(this.prev<S.finallyLoc)return b(S.finallyLoc)}else if(ce){if(this.prev<S.catchLoc)return b(S.catchLoc,!0)}else{if(!ye)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return b(S.finallyLoc)}}}},abrupt:function(f,m){for(var b=this.tryEntries.length-1;b>=0;--b){var w=this.tryEntries[b];if(w.tryLoc<=this.prev&&n.call(w,"finallyLoc")&&this.prev<w.finallyLoc){var S=w;break}}S&&(f==="break"||f==="continue")&&S.tryLoc<=m&&m<=S.finallyLoc&&(S=null);var V=S?S.completion:{};return V.type=f,V.arg=m,S?(this.method="next",this.next=S.finallyLoc,C):this.complete(V)},complete:function(f,m){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&m&&(this.next=m),C},finish:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.finallyLoc===f)return this.complete(b.completion,b.afterLoc),q(b),C}},catch:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.tryLoc===f){var w=b.completion;if(w.type==="throw"){var S=w.arg;q(b)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(f,m,b){return this.delegate={iterator:re(f),resultName:m,nextLoc:b},this.method==="next"&&(this.arg=e),C}},t}function Hp(e,t){if(e==null)return{};var r=zp(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zp(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Wl(e,t,r,n,o,a,u){try{var c=e[a](u),l=c.value}catch(s){r(s);return}c.done?t(l):Promise.resolve(l).then(n,o)}function Up(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function u(l){Wl(a,n,o,u,c,"next",l)}function c(l){Wl(a,n,o,u,c,"throw",l)}u(void 0)})}}function Hl(e,t){return Qp(e)||Kp(e,t)||Gp(e,t)||Vp()}function Vp(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gp(e,t){if(e){if(typeof e=="string")return zl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zl(e,t)}}function zl(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kp(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Qp(e){if(Array.isArray(e))return e}function Zp(e){var t=e.onSubmit,r=e.onCancel,n=(0,ne.F8)("fetch-dataset"),o=te(),a=(0,ne.ox)(),u=a.appService,c=(0,N.useState)(),l=Hl(c,2),s=l[0],y=l[1],A=P.Form.useForm(),E=Hl(A,1),h=E[0],_=u.getImplementService("GET_FETCH_DATA_LIST"),g=s&&s.name&&s.url&&s.method,C=function(D,F){y(F)},x=function(){var j=Up(gi().mark(function D(){var F,L,k,Y,Z,B;return gi().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(!_||!s)){z.next=2;break}return z.abrupt("return");case 2:return z.prev=2,z.next=5,h.validateFields();case 5:z.next=10;break;case 7:return z.prev=7,z.t0=z.catch(2),z.abrupt("return");case 10:F=h.getFieldsValue(),L=F.name,k=Hp(F,Wp),Y=(0,Ie.getUniqueId)(),Z=mt(k),B={id:Y,type:"remote",metadata:{name:L},serviceType:_.metadata.name,properties:Z},t([B]);case 15:case"end":return z.stop()}},D,null,[[2,7]])}));return function(){return j.apply(this,arguments)}}();return(0,N.useEffect)(function(){h.setFieldsValue({method:"GET"})},[]),i().createElement(i().Fragment,null,i().createElement("div",{className:I()(n,o.fetchDataset)},i().createElement(P.Form,{requiredMark:!1,form:h,onValuesChange:C,labelCol:{span:3}},i().createElement(P.Form.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u6570\u636E\u96C6\u540D\u79F0"}]},i().createElement(P.Input,{placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u96C6\u540D\u79F0"})),i().createElement(P.Form.Item,{name:"url",label:"\u8BF7\u6C42\u5730\u5740",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BF7\u6C42\u5730\u5740"},{type:"url",message:"\u8BF7\u8F93\u5165\u5408\u6CD5\u7684\u8BF7\u6C42\u5730\u5740"}]},i().createElement(P.Input,{placeholder:"https://example.com/info.json"})),i().createElement(P.Form.Item,{name:"method",label:"\u8BF7\u6C42\u65B9\u6CD5",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u6CD5"}]},i().createElement(P.Select,{placeholder:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u5F0F",options:[{value:"GET",label:"GET"},{value:"POST",label:"POST"}]})),i().createElement(P.Form.Item,{label:"\u8BF7\u6C42\u53C2\u6570",name:"body"},i().createElement(v,{fieldName:"body"})),i().createElement(P.Form.Item,{label:"\u8BF7\u6C42\u5934\u4FE1\u606F",name:"headers"},i().createElement(v,{fieldName:"headers"})),i().createElement(P.Form.Item,{label:"\u6570\u636E\u5904\u7406\u51FD\u6570",name:"processingFunction"},i().createElement(Yp,null)))),i().createElement("div",{className:"li-fetch-dataset__footer ant-modal-footer"},i().createElement(P.Space,null,i().createElement(P.Button,{onClick:r},"\u8FD4\u56DE"),i().createElement(P.Button,{disabled:!g,type:"primary",htmlType:"submit",onClick:x},"\u6DFB\u52A0"))))}var Jp=(0,Se.BP)({version:"v0.1",component:Zp,metadata:{name:"FetchDataset",displayName:"HTTP \u8BF7\u6C42",description:"HTTP \u8BF7\u6C42"},container:{type:"Datasets",slot:"addDataset"}}),bi=function(){var t=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},qp=Q(99212),pt=Q.n(qp);function Vr(e){"@babel/helpers - typeof";return Vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vr(e)}function Ul(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Vl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ul(Object(r),!0).forEach(function(n){Xp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ul(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xp(e,t,r){return t=$p(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $p(e){var t=ey(e,"string");return Vr(t)=="symbol"?t:String(t)}function ey(e,t){if(Vr(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ty={"YYYY/MM/DD HH:mm:ss":{format:"YYYY/MM/DD HH:mm:ss",granularity:"second"},"YYYY-MM-DD HH:mm:ss":{format:"YYYY-MM-DD HH:mm:ss",granularity:"second"},"YYYY/MM/DD HH:mm":{format:"YYYY/MM/DD HH:mm:ss",granularity:"second"},"YYYY-MM-DD HH:mm":{format:"YYYY-MM-DD HH:mm:ss",granularity:"second"},"YYYY/MM/DD HH":{format:"YYYY/MM/DD HH:mm:ss",granularity:"hour"},"YYYY-MM-DD HH":{format:"YYYY-MM-DD HH:mm:ss",granularity:"hour"},"YYYY/MM/DD":{format:"YYYY/MM/DD HH:mm:ss",granularity:"day"},"YYYY-MM-DD":{format:"YYYY-MM-DD HH:mm:ss",granularity:"day"},"YYYY/MM":{format:"YYYY/MM/DD HH:mm:ss",granularity:"month"},"YYYY-MM":{format:"YYYY-MM-DD HH:mm:ss",granularity:"month"},YYYY:{format:"YYYY-MM-DD HH:mm:ss",granularity:"year"}},Gl=[{value:"YYYY/MM/DD HH:mm:ss",other:"YYYY-MM-DD HH:mm:ss",label:"\u79D2",granularity:"second"},{value:"YYYY/MM/DD HH:mm",other:"YYYY-MM-DD HH:mm",label:"\u5206\u949F",granularity:"minute"},{value:"YYYY/MM/DD HH",other:"YYYY-MM-DD HH",label:"\u5C0F\u65F6",granularity:"hour"},{value:"YYYY/MM/DD",other:"YYYY-MM-DD",label:"\u65E5",picker:"date",granularity:"day"},{value:"YYYY/MM",other:"YYYY-MM",label:"\u6708",picker:"month",granularity:"month"},{value:"YYYY",other:"YYYY",label:"\u5E74",picker:"year",granularity:"year"}],ry=function(t){var r=t.indexOf("/")!==-1,n=Gl.map(function(a){return Vl(Vl({},a),{},{value:r?a.value:a.other})}),o=Gl.findIndex(function(a){return a.value===t||a.other===t});return o===-1?n:n.slice(o)},Kl=function(t,r,n){var o=ty[r];if(!o)return t;if(typeof t=="string"){if(n==="<"){var a=pt()(t).format(o.format);return a}var u=pt()(t).endOf(o.granularity).format(o.format);return u}var c=[pt()(t[0]).format(o.format),pt()(t[1]).endOf(o.granularity).format(o.format)];return c};function ny(e,t){return ly(e)||iy(e,t)||ay(e,t)||oy()}function oy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ay(e,t){if(e){if(typeof e=="string")return Ql(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ql(e,t)}}function Ql(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iy(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function ly(e){if(Array.isArray(e))return e}var Gr="li-filter-item-filter-field-date",Zl=P.DatePicker.RangePicker,uy=function(t){var r=t.size,n=r===void 0?"middle":r,o=t.operator,a=t.value,u=t.format,c=t.defaultGranularity,l=c===void 0?"day":c,s=t.onChange,y=(0,N.useMemo)(function(){return ry(u)},[u]),A=(0,N.useState)(function(){return y.find(function(j){return j.granularity===l})}),E=ny(A,2),h=E[0],_=E[1],g=(0,N.useMemo)(function(){if((0,oe.isEmpty)(a))return null;if(typeof a=="string"){var j=pt()(a,u);return j}else{var D=[pt()(a[0],u),pt()(a[1],u)];return D}},[a]),C=function(D){var F=y.find(function(L){return L.value===D});F&&_(F)},x=function(D,F){var L=Kl(F,h.value,o);s(L,h.granularity)};return(0,N.useEffect)(function(){if(!(0,oe.isEmpty)(a)){var j=typeof a=="string"?pt()(a).format(h.value).toString():[pt()(a[0]).format(h.value).toString(),pt()(a[1]).format(h.value).toString()],D=Kl(j,h.value,o);s(D,h.granularity)}},[h,o]),i().createElement("div",{className:"".concat(Gr)},i().createElement(P.Select,{size:n,placeholder:"\u65F6\u95F4\u7C92\u5EA6",value:h.value,style:{marginRight:10},onChange:C,options:y,popupMatchSelectWidth:!1}),[">","<"].includes(o)&&i().createElement(i().Fragment,null,h.picker?i().createElement(P.DatePicker,{size:n,className:"".concat(Gr,"-picker"),value:g,picker:h.picker,format:h.value,onChange:x}):i().createElement(P.DatePicker,{size:n,className:"".concat(Gr,"-picker"),value:g,showTime:{format:h.value},format:h.value,onChange:x})),["BETWEEN"].includes(o)&&i().createElement(i().Fragment,null,h.picker?i().createElement(Zl,{size:n,className:"".concat(Gr,"-picker"),value:g,picker:h.picker,onChange:x,format:h.value}):i().createElement(Zl,{size:n,className:"".concat(Gr,"-picker"),value:g,showTime:{format:h.value},onChange:x,format:h.value})))};function Kr(e){"@babel/helpers - typeof";return Kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kr(e)}function hi(){return hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hi.apply(this,arguments)}function Jl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function cy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jl(Object(r),!0).forEach(function(n){sy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jl(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sy(e,t,r){return t=fy(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fy(e){var t=my(e,"string");return Kr(t)=="symbol"?t:String(t)}function my(e,t){if(Kr(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var py=function(t){var r=cy({},t),n=function(a){t.onChange(a)};return i().createElement("div",{className:"".concat(Si,"__one-way")},i().createElement(P.InputNumber,hi({},r,{value:t.value,onChange:function(a){return n(Number(a))}})))},yy=py;function Qr(e){"@babel/helpers - typeof";return Qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qr(e)}function ql(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function dy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ql(Object(r),!0).forEach(function(n){vy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ql(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vy(e,t,r){return t=gy(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gy(e){var t=by(e,"string");return Qr(t)=="symbol"?t:String(t)}function by(e,t){if(Qr(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hy=function(t){var r,n,o=dy({},t),a=(0,oe.isArray)(t.value)?t.value:t.defaultValue,u=function(l){t.onChange(l)};return i().createElement("div",{className:"".concat(Si,"__input-number")},i().createElement(P.InputNumber,{min:o.min,max:(r=a[1])!==null&&r!==void 0?r:o.max,style:{marginRight:10},size:o.size,value:a[0],onChange:function(l){return u([l||0,a[1]])}}),i().createElement(P.InputNumber,{min:(n=a[0])!==null&&n!==void 0?n:o.min,max:o.max,size:o.size,value:a[1],onChange:function(l){return u([a[0],l!=null?l:a[0]])}}))},Sy=hy,Xl=[0,100],Si="li-filter-item-filter-field-number",_y=function(t){var r=t.size,n=r===void 0?"middle":r,o=t.field,a=t.value,u=t.operator,c=t.onChange,l=(0,N.useMemo)(function(){return Xl},[o]),s=function(A){c(A)};return i().createElement("div",{className:"".concat(Si)},u!=="BETWEEN"?i().createElement(yy,{size:n,min:-1/0,max:1/0,defaultValue:l[0],value:a,onChange:function(A){return s(A)}}):i().createElement(Sy,{size:n,min:1/0,max:1/0,defaultValue:l,value:a,onChange:function(A){return s(A)}}))};function _i(e){"@babel/helpers - typeof";return _i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_i(e)}var $l="li-filter-item-filter-field-string",Cy=function(t){var r=t.size,n=r===void 0?"middle":r,o=t.field,a=t.value,u=t.operator,c=t.data,l=t.onChange,s=(0,N.useMemo)(function(){var A=c.map(function(h){return _i(h[o])==="object"?JSON.stringify(h[o]):h[o]}),E=(0,oe.uniq)(A).slice(0,3e3).map(function(h){return{label:h,value:h,title:h}});return E},[c,o]),y=function(E){l(E)};return i().createElement("div",{className:"".concat($l)},["IN","NOT_IN"].includes(u)&&i().createElement(P.Select,{showSearch:!0,className:"".concat($l,"__value"),mode:"multiple",size:n,placeholder:"\u8BF7\u9009\u62E9\u5B57\u6BB5",value:a,options:s,filterOption:function(E,h){var _;return((_=h==null?void 0:h.title)!==null&&_!==void 0?_:"").includes(E)},onChange:function(E){return y(E)}}),["LIKE","NOT_LIKE"].includes(u)&&i().createElement(P.Input,{placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57",value:a,onChange:function(E){return y(E.target.value)}}))},Oy=[{value:"IN",label:"\u7B49\u4E8E"},{value:"NOT_IN",label:"\u4E0D\u7B49\u4E8E"},{value:"LIKE",label:"\u5305\u542B\u5173\u952E\u5B57"},{value:"NOT_LIKE",label:"\u4E0D\u5305\u542B\u5173\u952E\u5B57"}],Ey=[{label:"\u5927\u4E8E",value:">"},{label:"\u5927\u4E8E\u7B49\u4E8E",value:">="},{label:"\u7B49\u4E8E",value:"="},{label:"\u5C0F\u4E8E",value:"<"},{label:"\u5C0F\u4E8E\u7B49\u4E8E",value:"<="},{label:"\u4ECB\u4E8E",value:"BETWEEN"}],Ay=[{label:"\u5927\u4E8E",value:">"},{label:"\u5C0F\u4E8E",value:"<"},{label:"\u4ECB\u4E8E",value:"BETWEEN"}],wy={string:Oy,number:Ey,date:Ay};function Zr(e){"@babel/helpers - typeof";return Zr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zr(e)}function eu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ca(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eu(Object(r),!0).forEach(function(n){Py(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Py(e,t,r){return t=Iy(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iy(e){var t=jy(e,"string");return Zr(t)=="symbol"?t:String(t)}function jy(e,t){if(Zr(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xy(e,t){return Ly(e)||Fy(e,t)||Ty(e,t)||Dy()}function Dy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ty(e,t){if(e){if(typeof e=="string")return tu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tu(e,t)}}function tu(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fy(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Ly(e){if(Array.isArray(e))return e}var Ny=P.theme.useToken,yr="li-filter-item",My=function(t){var r,n,o=t.showDeleteFilter,a=t.defaultValue,u=t.data,c=t.columns,l=t.selectedFields,s=l===void 0?[]:l,y=t.onDelField,A=t.size,E=A===void 0?"middle":A,h=(0,N.useState)(a),_=xy(h,2),g=_[0],C=_[1],x=(0,oe.isEmpty)(g.field)?void 0:g.field,j=Ny(),D=j.token,F=c.filter(function(B){return["string","number","date"].includes(B.type)}).map(function(B){return{label:i().createElement("span",null,i().createElement(P.Tag,{color:B.typeColor},(0,oe.isUndefined)(B.typeName)?B.type:B.typeName),B.displayName||B.name),title:B.displayName||B.name,value:B.name}}),L=wy[g.type],k=function(W,z){var R=ca(ca({},g),{},{value:W});R.type==="date"&&z&&(R.granularity=z),C(R),t.onChange(R)},Y=function(W){var z,R=(z=c.find(function(ee){return ee.name===W}))===null||z===void 0?void 0:z.type;if(R!==g.field){var q;R==="number"?q={id:g.id,type:"number",field:W,operator:">",value:0}:R==="date"?q={id:g.id,type:"date",field:W,operator:">",value:"",granularity:"day"}:q={id:g.id,type:"string",field:W,operator:"IN",value:[]},C(q),t.onChange(q)}},Z=function(W){var z="";g.type==="number"?W==="BETWEEN"?z=(0,oe.isArray)(g.value)&&g.value.length===2?g.value:Xl:z=(0,oe.isArray)(g.value)?g.value[0]:g.value:g.type==="date"?W==="BETWEEN"?z=(0,oe.isArray)(g.value)&&g.value.length===2?g.value:[]:z=(0,oe.isArray)(g.value)?g.value[0]:g.value:g.type==="string"&&(["IN","NOT_IN"].includes(W)?z=Array.isArray(g.value)?g.value:[g.value]:z=Array.isArray(g.value)?"":g.value);var R=ca(ca({},g),{},{operator:W,value:z});C(R),t.onChange(R)};return i().createElement("div",{className:"".concat(yr),style:{borderColor:D.colorBorder}},i().createElement("div",{className:"".concat(yr,"__filter-field")},i().createElement("span",null,"\u8FC7\u6EE4\u5B57\u6BB5"),o&&i().createElement("div",{className:"".concat(yr,"__del-filter")},i().createElement(P.Popconfirm,{title:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u7B5B\u9009\u5B57\u6BB5\uFF1F",onConfirm:y,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},i().createElement(M.DeleteOutlined,null)))),i().createElement("div",{className:"".concat(yr,"__field-operator")},i().createElement(P.Select,{showSearch:!0,className:"".concat(yr,"__select-field"),style:{marginRight:10},size:E,placeholder:"\u8BF7\u9009\u62E9\u7B5B\u9009\u5B57\u6BB5",value:x,options:F,popupMatchSelectWidth:!1,filterOption:function(W,z){var R;return((R=z==null?void 0:z.title)!==null&&R!==void 0?R:"").includes(W)},onChange:function(W){return Y(W)}}),i().createElement(P.Select,{className:"".concat(yr,"__select-operator"),size:E,placeholder:"\u8BF7\u9009\u62E9\u7B5B\u9009\u65B9\u5F0F",options:L,value:g.operator,onChange:function(W){return Z(W)}})),g.field&&i().createElement(i().Fragment,null,i().createElement("div",{className:"".concat(yr,"__filter-content-title")},i().createElement("span",null,"\u8FC7\u6EE4\u5185\u5BB9")),g.type==="number"&&i().createElement(_y,{size:E,field:g.field,operator:g.operator,value:g.value,onChange:function(W){return k(W)}}),g.type==="string"&&i().createElement(Cy,{size:E,field:g.field,data:u,operator:g.operator,value:g.value,onChange:function(W){return k(W)}}),g.type==="date"&&i().createElement(uy,{size:E,format:(r=(n=c.find(function(B){return B.name===g.field}))===null||n===void 0?void 0:n.format)!==null&&r!==void 0?r:"YYYY-MM-DD HH:mm:ss",defaultGranularity:g.granularity,operator:g.operator,value:g.value,onChange:function(W,z){return k(W,z)}})))};function Ry(e){return Yy(e)||ky(e)||ru(e)||By()}function By(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ky(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yy(e){if(Array.isArray(e))return Ci(e)}function Wy(e,t){return Uy(e)||zy(e,t)||ru(e,t)||Hy()}function Hy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ru(e,t){if(e){if(typeof e=="string")return Ci(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ci(e,t)}}function Ci(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zy(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Uy(e){if(Array.isArray(e))return e}var nu="li-filter-list",Vy=function(t){var r=t.data,n=t.showDeleteFilter,o=n===void 0?!0:n,a=t.showAddFilter,u=a===void 0?!0:a,c=t.columns,l=t.filterNodes,s=t.addFilterNode,y=t.updateFilterNode,A=t.removeFilterNode,E=(0,N.useState)(l),h=Wy(E,2),_=h[0],g=h[1],C=function(F,L){g(function(k){var Y=k.map(function(Z){return Z.id===L?F:Z});return Y}),!(0,oe.isEmpty)(F.field)&&(l.find(function(k){return k.id===L})?y(L,F):s(F))},x=function(){g([].concat(Ry(_),[{id:bi(),type:"string",field:"",operator:"IN",value:[]}]))},j=function(F){var L;(0,oe.isEmpty)((L=_.find(function(k){return k.id===F}))===null||L===void 0?void 0:L.field)||A(F),g(_.filter(function(k){return k.id!==F}))};return i().createElement(i().Fragment,null,_.map(function(D){return i().createElement(My,{key:D.id,showDeleteFilter:o,defaultValue:D,data:r,columns:c,onChange:function(L){return C(L,D.id)},onDelField:function(){return j(D.id)},size:"small"})}),u&&i().createElement("div",{className:"".concat(nu,"__add-btn")},i().createElement(M.PlusCircleOutlined,{className:"".concat(nu,"__add-icon"),onClick:x})))},ou,au;function iu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Gy=function(){var t=(0,ne.Sr)(),r=t.colorBgContainer;return{filterCard:(0,G.iv)(ou||(ou=iu([`
      width: 100%;
      margin-bottom: 10px;
      background-color: `,`;
    `])),r),filterCardSelect:(0,G.iv)(au||(au=iu([`
      width: 100%;
    `])))}},Ky=Gy;function Jr(e){"@babel/helpers - typeof";return Jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jr(e)}function lu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function uu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lu(Object(r),!0).forEach(function(n){Qy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qy(e,t,r){return t=Zy(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zy(e){var t=Jy(e,"string");return Jr(t)=="symbol"?t:String(t)}function Jy(e,t){if(Jr(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qy=P.theme.useToken,Xy=function(t){var r,n,o=t.id,a=t.datasetOptions,u=t.selectedDatasets,c=t.onDatasetIdChange,l=t.onDel,s=(0,ne.F8)("filter-widget-card"),y=Ky(),A=qy(),E=A.token,h=(0,ne.OA)(o),_=h==null?void 0:h.filter,g=(0,N.useMemo)(function(){return h?(0,Ie.getDatasetFields)(h.columns):[]},[h]),C=(0,N.useMemo)(function(){return h?h.data.slice(0,5e4):[]},[h]),x=(0,ne.sZ)(),j=x.updateState,D=function(q,ee){j(function(re){var p=re.datasets.findIndex(function(m){return m.id===o});if(p!==-1){var f=re.datasets[p];f.filter?f.filter.children.push(q):f.filter={relation:ee||"AND",children:[q]}}})},F=function(q,ee){j(function(re){var p=re.datasets.findIndex(function(b){return b.id===o});if(p!==-1){var f=re.datasets[p];if(f.filter){var m=f.filter.children.findIndex(function(b){return b.id===q});m!==-1&&(f.filter.children[m]=uu(uu({},f.filter.children[m]),ee))}}})},L=function(q){j(function(ee){var re=ee.datasets.findIndex(function(m){return m.id===o});if(re!==-1){var p=ee.datasets[re];if(p.filter){var f=p.filter.children.findIndex(function(m){return m.id===q});f!==-1&&p.filter.children.splice(f,1)}}})},k=(r=_==null?void 0:_.relation)!==null&&r!==void 0?r:"AND",Y=(n=_==null?void 0:_.children)!==null&&n!==void 0?n:[],Z=a.map(function(R){return{label:i().createElement("span",null,i().createElement(M.DatabaseOutlined,{style:{marginRight:5,color:E.colorPrimary}}),R.label),title:R.label,value:R.value,disabled:u.includes(R.value)&&R.value!==o}}),B=function(q){j(function(ee){var re=ee.datasets.findIndex(function(p){return p.id===o});re!==-1&&(ee.datasets[re].filter.relation=q)})},W=function(){l()},z=i().createElement(P.Select,{showSearch:!0,className:I()("".concat(s,"__select"),y.filterCardSelect),size:"small",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u96C6",value:o,options:Z,filterOption:function(q,ee){var re;return((re=ee==null?void 0:ee.title)!==null&&re!==void 0?re:"").includes(q)},onChange:function(q){return c(q)}});return i().createElement(P.Card,{className:I()(s,y.filterCard),title:z,headStyle:{padding:"0 16px",borderLeft:"3px solid ".concat(E.colorPrimary)},bodyStyle:{padding:0},extra:i().createElement(i().Fragment,null,i().createElement(P.Select,{value:k,size:"small",style:{width:65,marginLeft:10},options:[{label:"\u5E76\u4E14",value:"AND"},{label:"\u6216\u8005",value:"OR"}],onChange:function(q){return B(q)}}),i().createElement(P.Popconfirm,{title:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u7B5B\u9009\u5668\uFF1F",onConfirm:W,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},i().createElement(P.Button,{type:"link",icon:i().createElement(M.DeleteOutlined,{style:{color:"#c0c0c0",opacity:.6}})})))},i().createElement(Vy,{filterNodes:Y,data:C,columns:g,addFilterNode:D,updateFilterNode:F,removeFilterNode:L}))},$y=Xy,cu,su,fu,mu;function sa(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ed=function(){var t=(0,ne.Sr)(),r=t.colorSplit;return{filterPanel:(0,G.iv)(cu||(cu=sa([`
      position: relative;
      height: 100%;
    `]))),panelHeader:(0,G.iv)(su||(su=sa([`
      margin: 0 20px;
      padding: 15px 0 15px;
      font-weight: 500;
      font-size: 16px;
      border-bottom: 1px solid `,`;
    `])),r),addFilter:(0,G.iv)(fu||(fu=sa([`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
      font-size: 14px;
    `]))),filterList:(0,G.iv)(mu||(mu=sa([`
      max-height: calc(100% - 57px - 52px);
      padding: 0 15px 20px;
      overflow-y: auto;
    `])))}},td=ed;function qr(e){"@babel/helpers - typeof";return qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(e)}function pu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function yu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pu(Object(r),!0).forEach(function(n){rd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rd(e,t,r){return t=nd(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nd(e){var t=od(e,"string");return qr(t)=="symbol"?t:String(t)}function od(e,t){if(qr(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(qr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oi(e,t){return ud(e)||ld(e,t)||id(e,t)||ad()}function ad(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function id(e,t){if(e){if(typeof e=="string")return du(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return du(e,t)}}function du(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ld(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function ud(e){if(Array.isArray(e))return e}var cd=function(t){var r=t.className,n=(0,ne.F8)("filters-panel"),o=td(),a=(0,ne.sZ)(),u=a.state,c=a.updateState,l=(0,N.useState)(!1),s=Oi(l,2),y=s[0],A=s[1],E=(0,N.useMemo)(function(){var R=u.datasets.filter(function(q){return(0,Ie.isLocalOrRemoteDatasetSchema)(q)});return{datasetOptions:R.map(function(q){return{value:q.id,label:q.metadata.name}}),filteredDatasets:R.filter(function(q){return!(0,oe.isUndefined)(q==null?void 0:q.filter)}).map(function(q){var ee=q.id;return ee})}},[u.datasets]),h=E.datasetOptions,_=E.filteredDatasets,g=_,C=(0,N.useState)(""),x=Oi(C,2),j=x[0],D=x[1],F=(0,N.useState)(!1),L=Oi(F,2),k=L[0],Y=L[1],Z=function(q){c(function(ee){var re=ee.datasets.findIndex(function(p){return p.id===q});re!==-1&&(ee.datasets[re].filter={relation:"AND",children:[]})})},B=function(q,ee){c(function(re){var p=re.datasets.findIndex(function(w){return w.id===q});if(p!==-1){var f=re.datasets[p];f.filter=void 0}var m=re.datasets.findIndex(function(w){return w.id===ee});if(m!==-1){var b=re.datasets[m];b.filter={relation:"AND",children:[]}}})},W=function(q){c(function(ee){var re=ee.datasets.findIndex(function(p){return p.id===q});re!==-1&&(ee.datasets[re].filter=void 0)})},z=i().createElement("div",{className:I()("".concat(n,"__add-filter"),o.addFilter)},i().createElement("span",null,"\u7B5B\u9009\u5668(",_.length,")"),i().createElement(P.Popover,{placement:"bottomRight",destroyTooltipOnHide:!0,open:y,onOpenChange:function(q){return A(q)},content:i().createElement(P.Select,{showSearch:!0,placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u96C6",style:{width:200},options:h.map(function(R){return yu(yu({},R),{},{disabled:_.includes(R.value)})}),filterOption:function(q,ee){var re;return((re=ee==null?void 0:ee.label)!==null&&re!==void 0?re:"").includes(q)},onSelect:Z}),arrow:!1},i().createElement(P.Button,{type:"primary",icon:i().createElement(M.PlusOutlined,null),onClick:function(){A(!0)}},"\u65B0\u589E\u7B5B\u9009\u5668")));return i().createElement("div",{className:I()(n,o.filterPanel,r)},i().createElement("div",{className:I()("".concat(n,"__header"),o.panelHeader)},"\u7B5B\u9009"),z,i().createElement("div",{className:I()("".concat(n,"__filter-list"),o.filterList)},(0,oe.isEmpty)(_)?i().createElement(P.Empty,{image:P.Empty.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65E0\u6570\u636E\uFF0C\u8BF7\u5148\u6DFB\u52A0\u7B5B\u9009\u5668"}):_.map(function(R){return i().createElement($y,{key:R,id:R,selectedDatasets:g,datasetOptions:h,onDatasetIdChange:function(ee){return B(R,ee)},onDel:function(){return W(R)}})})),k&&i().createElement(Bo,{visible:k,onClose:function(){return Y(!1)},datasetId:j}))},sd=cd,fd=(0,Se.BP)({version:"v0.1",component:sd,metadata:{name:"FiltersPanel",displayName:"\u7B5B\u9009\u5668\u8BBE\u7F6E",description:"\u7B5B\u9009\u5668\u9762\u677F"},container:{type:"SideNav",slot:"menuPanel"},menu:{name:"\u7B5B\u9009",key:"filters",icon:i().createElement(M.FilterOutlined,null)}}),md=function(t){var r=(0,ne.sZ)(),n=r.state,o=r.updateState,a=n.collapsed,u=function(){o(function(l){l.collapsed=!l.collapsed})};return i().createElement(P.Tooltip,{placement:"right",title:a?"\u5C55\u5F00":"\u6298\u53E0"},i().createElement(P.Button,{block:!0,type:"text",size:"middle",shape:"circle",icon:i().createElement(M.LeftOutlined,{size:18,rotate:a?180:0}),onClick:u}))},pd=md,yd=(0,Se.BP)({version:"v0.1",component:pd,metadata:{name:"Folder",displayName:"\u6298\u53E0\u5668",description:"\u9762\u677F\u6298\u53E0\u5668"},container:{type:"SideNav",slot:"bottom"}});function dd(e,t){return hd(e)||bd(e,t)||gd(e,t)||vd()}function vd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gd(e,t){if(e){if(typeof e=="string")return vu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vu(e,t)}}function vu(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bd(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function hd(e){if(Array.isArray(e))return e}var Sd=function(t){var r,n=t.onClose,o=t.onSubmit,a=(0,ne.sZ)(),u=a.state,c=P.Form.useForm(),l=dd(c,1),s=l[0],y=function(){s.validateFields().then(function(E){var h,_=E.name,g=E.datasetId,C=(h=u.datasets.find(function(j){return j.id===g}))===null||h===void 0?void 0:h.metadata.name,x=(0,Ie.uniqueName)("".concat(C,"\u56FE\u5C42"));o(x,g),s.resetFields()}).catch()};return i().createElement(P.Form,{layout:"vertical",form:s,onFinish:y},i().createElement(P.Form.Item,{name:"datasetId",label:"\u6570\u636E\u6765\u6E90",rules:[{required:!0}]},i().createElement(P.Select,{placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6765\u6E90",style:{width:"100%"}},(r=u.datasets)===null||r===void 0?void 0:r.map(function(A){return i().createElement(P.Select.Option,{value:A.id,key:A.id},A.metadata.name)}))),i().createElement(P.Form.Item,{style:{textAlign:"right"}},i().createElement(P.Button,{htmlType:"button",onClick:function(){s.resetFields(),n()},style:{marginRight:10}},"\u53D6\u6D88"),i().createElement(P.Button,{type:"primary",htmlType:"submit"},"\u786E\u5B9A")))},_d=Sd,Cd=function(t,r){var n={id:(0,Ie.getUniqueId)(),type:"",metadata:{name:t},sourceConfig:{datasetId:r},visConfig:{visible:!0}};return n},gu,bu,hu,Su,_u;function Xr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Od=function(){var t=(0,ne.Sr)(),r=t.colorBorder,n=t.colorPrimaryHover;return{attributeHeader:(0,G.iv)(gu||(gu=Xr([`
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 57px;
      margin: 0 20px;
      overflow: hidden;
      font-weight: 500;
      font-size: 16px;
      border-bottom: 1px solid `,`;
    `])),r),attributeTitle:(0,G.iv)(bu||(bu=Xr([`
      display: flex;
      align-items: center;
    `]))),attributeBackIcon:(0,G.iv)(hu||(hu=Xr([`
      margin-right: 10px;
      cursor: pointer;

      &:hover {
        color: `,`;
      }
    `])),n),layerForm:(0,G.iv)(Su||(Su=Xr([`
      height: calc(100% - 57px);
      padding: 15px 20px;
    `]))),dropdownIcon:(0,G.iv)(_u||(_u=Xr([`
      font-size: 16px;
      cursor: pointer;
    `])))}},Ed=Od,vt=Q(81794),tr=Q(38969),$r=Q(64632),Je=Q(25728),st=Q(14838),Cu=Q(29270),Ad=Q(46587),qe=Q(96041);function en(e){"@babel/helpers - typeof";return en=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},en(e)}function fa(e,t,r){return t=wd(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wd(e){var t=Pd(e,"string");return en(t)=="symbol"?t:String(t)}function Pd(e,t){if(en(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(en(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Id=(0,qe.l)("form-collapse",function(e){var t=e.antCls,r=e.componentCls;return fa({},r,fa(fa({},"".concat(t,"-collapse-item"),fa({},"".concat(t,"-collapse-header"),{padding:"12px 0 !important"})),"".concat(t,"-collapse-content ").concat(t,"-collapse-content-box"),{padding:"5px 0 0 25px !important"}))}),jd=["formCollapse"];function tn(e){"@babel/helpers - typeof";return tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tn(e)}function ma(){return ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ma.apply(this,arguments)}function xd(e,t){return Ld(e)||Fd(e,t)||Td(e,t)||Dd()}function Dd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Td(e,t){if(e){if(typeof e=="string")return Ou(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ou(e,t)}}function Ou(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fd(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Ld(e){if(Array.isArray(e))return e}function Nd(e,t){if(e==null)return{};var r=Md(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Md(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Eu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Au(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Eu(Object(r),!0).forEach(function(n){Rd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rd(e,t,r){return t=Bd(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bd(e){var t=kd(e,"string");return tn(t)=="symbol"?t:String(t)}function kd(e,t){if(tn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(tn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yd=function(){var t=(0,st.useField)(),r=(0,st.useFieldSchema)(),n=[];return r.mapProperties(function(o,a){var u,c=t.query(t.address.concat(a)).take();if(!((c==null?void 0:c.display)==="none"||(c==null?void 0:c.display)==="hidden")&&((u=o["x-component"])===null||u===void 0?void 0:u.indexOf("CollapsePanel"))>-1){var l;n.push({name:a,props:Au(Au({},o==null?void 0:o["x-component-props"]),{},{key:(o==null||(l=o["x-component-props"])===null||l===void 0?void 0:l.key)||a}),schema:o})}}),n},wu=function(t){var r=(0,Cu.model)({activeKeys:t,setActiveKeys:function(o){r.activeKeys=o},hasActiveKey:function(o){if(Array.isArray(r.activeKeys)){if(r.activeKeys.includes(o))return!0}else if(r.activeKeys===o)return!0;return!1},addActiveKey:function(o){r.hasActiveKey(o)||(r.activeKeys=(0,Ad.toArr)(r.activeKeys).concat(o))},removeActiveKey:function(o){Array.isArray(r.activeKeys)?r.activeKeys=r.activeKeys.filter(function(a){return a!==o}):r.activeKeys=""},toggleActiveKey:function(o){r.hasActiveKey(o)?r.removeActiveKey(o):r.addActiveKey(o)}});return(0,Cu.markRaw)(r)},Wd=(0,st.observer)(function(e){var t=e.formCollapse,r=Nd(e,jd),n=(0,st.useField)(),o=Yd(),a=(0,Je.F)("formily-collapse",r),u=Id(a),c=xd(u,2),l=c[0],s=c[1],y=(0,N.useMemo)(function(){return t||wu(r.defaultActiveKey)},[]),A=function(){var _;return r.activeKey?r.activeKey:y!=null&&y.activeKeys?y==null?void 0:y.activeKeys:r.accordion?(_=o[0])===null||_===void 0?void 0:_.name:o.map(function(g){return g.name})},E=function(_,g){var C=n.form.queryFeedbacks({type:"error",address:"".concat(n.address.concat(_),".*")});return C.length?i().createElement(P.Badge,{size:"small",className:"errors-badge",count:C.length},g.header):g.header};return l(i().createElement(P.Collapse,ma({},r,{className:I()(a,r.className,s),activeKey:A(),onChange:function(_){var g,C;r==null||(g=r.onChange)===null||g===void 0||g.call(r,_),y==null||(C=y.setActiveKeys)===null||C===void 0||C.call(y,_)},expandIcon:function(_){var g=_.isActive;return i().createElement(M.CaretRightOutlined,{rotate:g?90:0})}}),o.map(function(h,_){var g=h.props,C=h.schema,x=h.name;return i().createElement(P.Collapse.Panel,ma({key:_},g,{header:E(x,g),forceRender:!0}),i().createElement(st.RecursionField,{schema:C,name:x}))})))}),Hd=function(t){var r=t.children;return i().createElement(N.Fragment,null,r)},zd=Object.assign(Wd,{CollapsePanel:Hd,createFormCollapse:wu}),Ei=zd,pa=Q(90158);function rn(e){"@babel/helpers - typeof";return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rn(e)}function ya(e,t,r){return t=Ud(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ud(e){var t=Vd(e,"string");return rn(t)=="symbol"?t:String(t)}function Vd(e,t){if(rn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gd=(0,qe.l)("field-select",function(e){var t=e.componentCls,r=e.controlItemBgActive,n=e.controlItemBgHover;return ya({},t,ya(ya(ya({},"".concat(t,"-dropdown"),{maxHeight:256,overflow:"auto",position:"relative"}),"".concat(t,"-dropdown-container"),{position:"absolute",minWidth:"100%",paddingTop:7}),"".concat(t,"-item"),{height:"32px",lineHeight:"32px",whiteSpace:"nowrap",padding:"0 12px",fontSize:"14px",borderRadius:4,cursor:"pointer","&:hover":{background:n},"&_selected":{background:r}}))});function nn(e){"@babel/helpers - typeof";return nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nn(e)}var Kd=["options","open"];function Ai(){return Ai=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ai.apply(this,arguments)}function Qd(e,t,r){return t=Zd(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zd(e){var t=Jd(e,"string");return nn(t)=="symbol"?t:String(t)}function Jd(e,t){if(nn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(nn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pu(e,t){return ev(e)||$d(e,t)||Xd(e,t)||qd()}function qd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xd(e,t){if(e){if(typeof e=="string")return Iu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Iu(e,t)}}function Iu(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $d(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function ev(e){if(Array.isArray(e))return e}function tv(e,t){if(e==null)return{};var r=rv(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rv(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var nv=function(t){var r=t.options,n=t.open,o=n===void 0?!1:n,a=tv(t,Kd),u=(0,Je.F)("formily-field-select"),c=Gd(u),l=Pu(c,2),s=l[0],y=l[1],A=(0,N.useState)(o),E=Pu(A,2),h=E[0],_=E[1],g=a.mode;(0,pa.Z)(function(){_(o)},[o]);var C=function(j){if(t.onChange){if(!g)t.onChange(j,r!=null?r:[]),_(!1);else if(!t.value)t.onChange([j],r!=null?r:[]);else if(Array.isArray(t.value)){var D=Array.from(new Set(t.value.concat(j)));t.onChange(D,r!=null?r:[])}}};return s(i().createElement(P.Select,Ai({},a,{popupClassName:I()("".concat(u),y),open:h,onDropdownVisibleChange:function(j){return _(j)},dropdownRender:function(){if(!(r!=null&&r.length))return i().createElement(P.Empty,{description:"\u6682\u65E0\u6570\u636E",image:P.Empty.PRESENTED_IMAGE_SIMPLE});var j=32*r.length<256?32*r.length+14:256;return i().createElement("div",{className:"".concat(u,"-dropdown"),style:{height:j}},i().createElement("div",{className:"".concat(u,"-dropdown-container")},r==null?void 0:r.map(function(D,F){var L,k=g?(L=t.value)===null||L===void 0?void 0:L.includes(D.value):D.value===t.value;return i().createElement("div",{className:I()("".concat(u,"-item"),y,Qd({},"".concat(u,"-item_selected"),k)),key:F,onClick:function(){return C(D.value)}},(0,oe.isUndefined)(D.type)?i().createElement(P.Tag,null,"\u672A\u77E5"):i().createElement(P.Tag,{color:D.typeColor},(0,oe.isUndefined)(D.typeName)?D.type:D.typeName),i().createElement("span",null,D.label))})))}}),r==null?void 0:r.map(function(x,j){return i().createElement(P.Select.Option,{value:x.value,key:j},i().createElement("div",{className:I()("".concat(u,"-item"),y)},(0,oe.isUndefined)(x.type)?i().createElement(P.Tag,null,"\u672A\u77E5"):i().createElement(P.Tag,{color:x.typeColor},(0,oe.isUndefined)(x.typeName)?x.type:x.typeName),i().createElement("span",{title:x.label},x.label)))})))},ju=nv;function on(e){"@babel/helpers - typeof";return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},on(e)}function xu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Du(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xu(Object(r),!0).forEach(function(n){ov(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ov(e,t,r){return t=av(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function av(e){var t=iv(e,"string");return on(t)=="symbol"?t:String(t)}function iv(e,t){if(on(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(on(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lv=(0,st.connect)(ju,(0,st.mapProps)({dataSource:"options",loading:!0},function(e,t){return Du(Du({},e),{},{suffixIcon:t!=null&&t.loading||t!=null&&t.validating?i().createElement(M.LoadingOutlined,null):e.suffixIcon})})),wi=lv;function Tu(e){return fv(e)||sv(e)||cv(e)||uv()}function uv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cv(e,t){if(e){if(typeof e=="string")return Pi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pi(e,t)}}function sv(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fv(e){if(Array.isArray(e))return Pi(e)}function Pi(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var mv=function(e,t){return{type:"object",properties:{collapseItem_base:{type:"void","x-component":"FormCollapse","x-component-props":{ghost:!0,destroyInactivePanel:!0,defaultActiveKey:["baseField"]},properties:{baseField:{type:"void","x-component":"FormCollapse.CollapsePanel","x-component-props":{header:"\u57FA\u7840"},properties:{datasetId:{type:"string",title:"\u6570\u636E\u6765\u6E90",required:!0,enum:Tu(e),"x-decorator":"FormItem","x-component":"Select","x-component-props":{placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6765\u6E90"},"x-decorator-props":{tooltip:"\u9009\u62E9\u4E00\u5F20\u6570\u636E\u8868\u4F5C\u4E3A\u56FE\u5C42\u6570\u636E\u6765\u6E90"}},visType:{type:"string",title:"\u53EF\u89C6\u5316\u7C7B\u578B",required:!0,"x-decorator":"FormItem","x-component":"VisTypeSelect","x-component-props":{placeholder:"\u8BF7\u9009\u62E9\u53EF\u89C6\u5316\u7C7B\u578B"},"x-decorator-props":{},enum:Tu(t)}}}}}}}},Fu="data:image/png;base64,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",Lu,Nu,Mu,Ru,Bu,ku,Yu,Wu;function rr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var pv=function(){var t=(0,ne.Sr)(),r=t.colorPrimaryActive,n=t.colorPrimaryHover,o=t.borderRadius;return{dropDown:(0,G.iv)(Lu||(Lu=rr([`
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-start;
      max-height: 280px;
      padding: 12px 5px;
      overflow-y: auto;
    `]))),selectItem:(0,G.iv)(Nu||(Nu=rr([`
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 60px;
      margin: 5px 0;
      cursor: pointer;
    `]))),itemIcon:(0,G.iv)(Mu||(Mu=rr([`
      width: 50px;
      height: 50px;
      line-height: 50px;
      color: rgb(106 116 133);
      background-image: url(`,`);
      background-repeat: no-repeat;
      border-radius: @border-radius;
      font-size: 50px;

      :hover {
        color: `,`;
      }
    `])),Fu,n),itemIconSelected:(0,G.iv)(Ru||(Ru=rr([`
      color: `,`;
    `])),r),itemLabel:(0,G.iv)(Bu||(Bu=rr([`
      height: 20px;
      line-height: 20px;
      text-align: center;
    `]))),selectedOption:(0,G.iv)(ku||(ku=rr([`
      display: flex;
      align-items: center;
      width: 100%;
      height: 100%;
      margin: 0;
    `]))),selectedIcon:(0,G.iv)(Yu||(Yu=rr([`
      width: 22px;
      height: 22px;
      line-height: 22px;
      color: `,`;
      background-image: url(`,`);
      background-repeat: no-repeat;
      background-size: 22px 22px;
      border-radius: `,`px;
      font-size: 22px;
    `])),r,Fu,o),selectedLabel:(0,G.iv)(Wu||(Wu=rr([`
      margin-left: 12px;
    `])))}},yv=pv;function an(e){"@babel/helpers - typeof";return an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},an(e)}var dv=["options","onChange"];function Ii(){return Ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ii.apply(this,arguments)}function Hu(e,t,r){return t=vv(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vv(e){var t=gv(e,"string");return an(t)=="symbol"?t:String(t)}function gv(e,t){if(an(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(an(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bv(e,t){return Cv(e)||_v(e,t)||Sv(e,t)||hv()}function hv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sv(e,t){if(e){if(typeof e=="string")return zu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zu(e,t)}}function zu(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _v(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Cv(e){if(Array.isArray(e))return e}function Ov(e,t){if(e==null)return{};var r=Ev(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ev(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var Av=function(t){var r=t.options,n=t.onChange,o=Ov(t,dv),a=t.className,u=(0,ne.F8)("vis-type-select"),c=yv(),l=(0,N.useState)(!1),s=bv(l,2),y=s[0],A=s[1],E=function(_){var g;(g=t.onChange)===null||g===void 0||g.call(t,_,r),A(!1)};return i().createElement(P.Select,Ii({},o,{open:y,virtual:!1,onDropdownVisibleChange:function(_){return A(_)},className:I()(u,a),dropdownRender:function(){return i().createElement("div",{className:I()("".concat(u,"__drop-down"),c.dropDown)},r==null?void 0:r.map(function(_,g){var C=_.value===o.value;return i().createElement("div",{className:I()("".concat(u,"__select-item"),c.selectItem),onClick:function(){return E(_.value)},key:g},i().createElement("div",{className:I()("".concat(u,"__item-icon"),c.itemIcon,Hu(Hu({},"".concat(u,"__item-icon_selected"),C),c.itemIconSelected,C))},i().createElement(me(),{component:_.icon})),i().createElement("span",{className:I()("".concat(u,"__item-label"),c.itemLabel)},_.label))}))}}),r==null?void 0:r.map(function(h,_){return i().createElement(P.Select.Option,{value:h.value,key:_},i().createElement("div",{className:I()("".concat(u,"__selected-option"),c.selectedOption)},i().createElement("div",{className:I()("".concat(u,"__selected-icon"),c.selectedIcon)},i().createElement(me(),{component:h.icon})),i().createElement("span",{className:I()("".concat(u,"__selected-label"),c.selectedLabel)},h.label)))}))},wv=Av,Pv=(0,st.connect)(wv,(0,st.mapProps)({dataSource:"options"},function(e){return e})),Iv=Pv,jv=(0,st.createSchemaField)({components:{FormItem:vt.FormItem,Input:vt.Input,Select:vt.Select,FormCollapse:Ei,FieldSelect:wi,Radio:vt.Radio,VisTypeSelect:Iv}}),xv=function(t){var r=(0,ne.ox)(),n=r.appService,o=(0,N.useMemo)(function(){var u=n.getImplementLayers(),c=u.map(function(l){return{value:l.metadata.name,label:l.metadata.displayName,type:l.metadata.name,icon:l.metadata.icon}});return c},[n]),a=(0,N.useMemo)(function(){return mv(t.sourceList,o)},[t.sourceList,o]);return i().createElement(jv,{schema:a})},Dv=xv,Uu;function Tv(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Fv=function(){var t=(0,ne.Sr)(),r=t.antCls,n=t.colorBgContainer,o=t.colorText,a=t.colorSplit,u=t.colorTextSecondary,c=t.borderRadius;return{layerForm:(0,G.iv)(Uu||(Uu=Tv([`
      overflow-y: auto;

      `,`-badge-count {
        color: `,`;
        box-shadow: none;
      }

      `,`-formily-item-label {
        color: `,`;
      }

      `,`-formily-item-asterisk {
        color: `,`;
      }

      `,`-formily-item-label-tooltip-icon {
        color: `,`;
      }

      `,"-collapse-item ",`-collapse-header {
        padding: 6px 13px !important;
        background-color: `,`;
        border: 1px solid `,`;
        border-radius: `,`px !important;
      }

      `,"-collapse-item ","-collapse-content ",`-collapse-content-box {
        padding: 10px 0 !important;
      }

      `,`-collapse {
        margin-bottom: 10px;
      }
    `])),r,o,r,o,r,u,r,u,r,r,n,a,c,r,r,r,r)}},Lv=Fv;function ln(e){"@babel/helpers - typeof";return ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ln(e)}function ji(e,t,r){return t=Nv(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nv(e){var t=Mv(e,"string");return ln(t)=="symbol"?t:String(t)}function Mv(e,t){if(ln(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ln(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rv=(0,qe.l)("offset",function(e){var t=e.componentCls,r=e.antCls;return ji({},t,ji({display:"inline-block",verticalAlign:"middle",width:"100%"},"".concat(t,"__input-group"),ji({display:"flex ",justifyContent:"space-between"},"".concat(r,"-input-number"),{width:"70px !important"})))});function Vu(e,t){return Wv(e)||Yv(e,t)||kv(e,t)||Bv()}function Bv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kv(e,t){if(e){if(typeof e=="string")return Gu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gu(e,t)}}function Gu(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yv(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Wv(e){if(Array.isArray(e))return e}var Hv=function(t){var r,n=(0,Je.F)("formily-offset"),o=Rv(n),a=Vu(o,2),u=a[0],c=a[1],l=(0,N.useState)((0,oe.isEmpty)(t.value)?[0,0]:(r=t.value)===null||r===void 0?void 0:r.map(function(h){return(0,oe.isFinite)(h)?h:0})),s=Vu(l,2),y=s[0],A=s[1],E=function(_){var g;A(_),(g=t.onChange)===null||g===void 0||g.call(t,_)};return u(i().createElement("div",{className:I()("".concat(n),c)},i().createElement("div",{className:"".concat(n,"__input-group")},i().createElement(P.InputNumber,{size:"small",value:y[0],onChange:function(_){E([_,y[1]])}}),i().createElement(P.InputNumber,{size:"small",value:y[1],onChange:function(_){E([y[0],_])}}))))},zv=(0,st.connect)(Hv),Uv=zv;function un(e){"@babel/helpers - typeof";return un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},un(e)}function xi(e,t,r){return t=Vv(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vv(e){var t=Gv(e,"string");return un(t)=="symbol"?t:String(t)}function Gv(e,t){if(un(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(un(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kv=(0,qe.l)("slider",function(e){var t=e.antCls,r=e.componentCls;return xi({},r,xi(xi({display:"flex",justifyItems:"center",alignItems:"center"},"".concat(t,"-slider"),{flex:1}),"".concat(t,"-input-number"),{width:"60px !important",height:"100% !important",marginLeft:"5px"}))});function cn(e){"@babel/helpers - typeof";return cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cn(e)}function Di(){return Di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Di.apply(this,arguments)}function Ku(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Qu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ku(Object(r),!0).forEach(function(n){Qv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ku(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qv(e,t,r){return t=Zv(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zv(e){var t=Jv(e,"string");return cn(t)=="symbol"?t:String(t)}function Jv(e,t){if(cn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zu(e,t){return eg(e)||$v(e,t)||Xv(e,t)||qv()}function qv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xv(e,t){if(e){if(typeof e=="string")return Ju(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ju(e,t)}}function Ju(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $v(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function eg(e){if(Array.isArray(e))return e}var tg={min:0,max:100,step:1},rg=function(t){var r,n=(0,Je.F)("formily-slider",t),o=Kv(n),a=Zu(o,2),u=a[0],c=a[1],l=Qu(Qu({},tg),t),s=(0,N.useState)((r=l.value)!==null&&r!==void 0?r:0),y=Zu(s,2),A=y[0],E=y[1],h=function(g){var C;E(g),(C=t.onChange)===null||C===void 0||C.call(t,g)};return u(i().createElement("div",{className:I()("".concat(n),c)},i().createElement(P.Slider,Di({range:!1},l,{value:A,onChange:function(g){h(g)}})),i().createElement(P.InputNumber,{size:"small",min:l.min,max:l.max,step:l.step||1,value:A,onChange:function(g){h(Number(g))},onBlur:function(){t.value||h(0)}})))},ng=(0,st.connect)(rg),og=ng,ag=Q(76750),ig={colors:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],isReversed:!1},qu=function(t){return!t||typeof t.name!="string"?null:t.name.replace(/\b[^a-zA-Z]+$/,"")};function sn(e){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sn(e)}function lg(e,t,r){return t=ug(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ug(e){var t=cg(e,"string");return sn(t)=="symbol"?t:String(t)}function cg(e,t){if(sn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sg=(0,qe.l)("formily-color-range-selector__color-palette-group",function(e){var t=e.componentCls,r=e.controlItemBgHover,n=e.controlItemBgActive,o=e.borderRadiusOuter;return lg({},t,{maxHeight:"200px",overflowY:"auto","&__item":{display:"flex",alignItems:"center",justifyContent:"space-between",height:"20px",padding:"10px 4px",cursor:"pointer",margin:"5px 0",span:{height:"10px",border:0},"span:first-child":{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"},"span:last-child":{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}},"&__item:hover":{background:r,borderRadius:o},"&__item--selected":{background:n,borderRadius:o}})});function fn(e){"@babel/helpers - typeof";return fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fn(e)}var fg=["color"];function Ti(){return Ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ti.apply(this,arguments)}function mg(e,t,r){return t=pg(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pg(e){var t=yg(e,"string");return fn(t)=="symbol"?t:String(t)}function yg(e,t){if(fn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dg(e,t){if(e==null)return{};var r=vg(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vg(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function gg(e,t){return _g(e)||Sg(e,t)||hg(e,t)||bg()}function bg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hg(e,t){if(e){if(typeof e=="string")return Xu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xu(e,t)}}function Xu(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sg(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function _g(e){if(Array.isArray(e))return e}var Cg=function(t){var r=(0,Je.F)("formily-color-range-selector__color-palette-group"),n=sg(r),o=gg(n,2),a=o[0],u=o[1],c=t.colorRange,l=t.selectedValue,s=t.isReversed,y=t.onChange,A=function(h){var _=h.color,g=dg(h,fg);return i().createElement("div",Ti({},g,{className:I()("".concat(r,"__item"),u,mg({},"".concat(r,"__item--selected"),_.toString()===l.toString()))}),_.map(function(C,x){return i().createElement("span",{key:"".concat(C,"-").concat(x),style:{backgroundColor:C,width:"".concat(100/_.length,"%")}})}))};return a(i().createElement("div",{className:I()(r,u)},c.map(function(E,h){return i().createElement(A,{key:h.toString(),color:s?E.colors.slice().reverse():E.colors,onClick:function(){return y(E.colors)}})})))},Og=Cg,$u=Q(75016),ec=Q(51953),tc=Q(30711),rc=Q(6304);function mn(e){"@babel/helpers - typeof";return mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(e)}function Kt(e,t,r){return t=Eg(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eg(e){var t=Ag(e,"string");return mn(t)=="symbol"?t:String(t)}function Ag(e,t){if(mn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wg=(0,qe.l)("color-range-selector__custom-range__range-item",function(e){var t=e.componentCls,r=e.antCls,n=e.colorTextSecondary,o=e.colorBorder,a=e.colorInfoTextHover,u=e.controlItemBgHover,c=e.borderRadius;return Kt(Kt(Kt(Kt(Kt({},t,Kt(Kt({display:"flex",alignItems:"center",margin:"5px 0",height:"32px"},"".concat(t,"__drag-icon"),{cursor:"move",opacity:0}),"".concat(t,"__infor"),{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",cursor:"pointer","&__color-content":{display:"flex",alignItems:"center",justifyContent:"space-between",height:"32px",paddingLeft:"3px","&:hover":{borderRadius:"".concat(c,"px"),background:u}},"&__color":{width:"18px",height:"18px"},"&__input":{flex:1,margin:"0 5px",cursor:"pointer",border:"1px solid rgba(0,0,0,0)",borderRadius:"4px",input:{color:n}},"&__input:hover":{borderColor:o},"&__delete-icon":{fontSize:"12px"},"&__delete-icon:hover":{color:a}})),"".concat(r,"-select-dropdown"),{zIndex:1}),"".concat(t,":hover"),Kt({},"".concat(t,"__drag-icon"),{opacity:1})),"".concat(r,"-popover"),Kt({zIndex:"4 !important"},"".concat(r,"-color-picker-presets ").concat(r,"-collapse-item ").concat(r,"-collapse-header"),{display:"none"})),"".concat(r,"-color-picker ").concat(r,"-color-picker-panel ").concat(r,"-color-picker-inner-panel-divider"),{margin:"3px 8px "})});function Fi(e,t){return xg(e)||jg(e,t)||Ig(e,t)||Pg()}function Pg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ig(e,t){if(e){if(typeof e=="string")return nc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nc(e,t)}}function nc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jg(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function xg(e){if(Array.isArray(e))return e}var oc=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3","#A9ABB1"],Dg=function(t){var r=t.index,n=t.id,o=t.color,a=t.onDelete,u=t.onChange,c=t.onChangeSort,l=(0,Je.F)("formily-color-range-selector__custom-range__range-item"),s=wg(l),y=Fi(s,2),A=y[0],E=y[1],h=(0,N.useRef)(null),_=(0,tc.L)({accept:"DragDropBox",hover:function(k){if(h.current){var Y=k.index,Z=r;Y!==Z&&(c(Y,Z),k.index=Z)}}}),g=Fi(_,2),C=g[1],x=(0,rc.c)({type:"DragDropBox",item:{id:n,index:r},isDragging:function(k){return r===k.getItem().index}}),j=Fi(x,2),D=j[1],F=function(k){u==null||u(k.toHexString())};return D(C(h)),A(i().createElement("div",{className:I()("".concat(l),E),ref:h},i().createElement("div",{className:"".concat(l,"__drag-icon")},i().createElement(M.HolderOutlined,null)),i().createElement("div",{className:"".concat(l,"__infor")},i().createElement("div",{className:"".concat(l,"__infor__color-content")},i().createElement("div",{onMouseDown:function(k){k.preventDefault(),k.stopPropagation()}},i().createElement(P.ColorPicker,{value:o||oc[0],onChange:F,presets:[{label:"\u63A8\u8350",colors:oc}]},i().createElement("div",{className:"".concat(l,"__infor__color"),style:{background:o}}))),i().createElement("div",{className:"".concat(l,"__infor__input")},i().createElement(P.Input,{bordered:!1,value:o,size:"small",onChange:function(k){return u(k.target.value)}}))),i().createElement("div",{className:"".concat(l,"__infor__delete-icon"),onClick:a},i().createElement(M.DeleteOutlined,null)))))},Tg=Dg;function pn(e){"@babel/helpers - typeof";return pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pn(e)}function dr(e,t,r){return t=Fg(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fg(e){var t=Lg(e,"string");return pn(t)=="symbol"?t:String(t)}function Lg(e,t){if(pn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ng=(0,qe.l)("color-range-selector__custom-range",function(e){var t=e.componentCls,r=e.lineWidth,n=e.lineType,o=e.colorTextSecondary,a=e.colorBorder,u=e.colorInfoTextHover;return dr({},t,dr(dr(dr(dr({},"".concat(t,"__selection-item"),dr(dr({display:"flex",alignItems:"center",height:"10px",margin:"5px 0",overflow:"hidden",borderRadius:"4px"},"".concat(t,"__selection-item-color:nth-child(1)"),{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}),"".concat(t,"__selection-item-color:last-child"),{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"})),"".concat(t,"__custon-item"),{maxHeight:"200px",overflowY:"auto",marginLeft:"-14px"}),"".concat(t,"__add-range-item"),{paddingLeft:"12px",cursor:"pointer",color:o,"&:hover":{color:u}}),"".concat(t,"__btn"),{display:"flex",alignItems:"center",justifyContent:"right",marginTop:"10px",padding:"10px 0",textAlign:"right",borderTop:"".concat(r,"px ").concat(n," ").concat(a),span:{marginLeft:"20px",color:o,cursor:"pointer"},"span:hover":{color:u}}))});function Mg(e){return kg(e)||Bg(e)||ic(e)||Rg()}function Rg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bg(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kg(e){if(Array.isArray(e))return Li(e)}function ac(e,t){return Hg(e)||Wg(e,t)||ic(e,t)||Yg()}function Yg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ic(e,t){if(e){if(typeof e=="string")return Li(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Li(e,t)}}function Li(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wg(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Hg(e){if(Array.isArray(e))return e}var zg=function(t){var r=t.ranges,n=t.onChange,o=t.className,a=(0,Je.F)("formily-color-range-selector__custom-range"),u=Ng(a),c=ac(u,2),l=c[0],s=c[1],y=(0,N.useState)([]),A=ac(y,2),E=A[0],h=A[1];(0,N.useEffect)(function(){if(r.length){var D=r.map(function(F){return{id:(0,oe.uniqueId)(),value:F}});h(D)}},[r]);var _=function(){var F={id:(0,oe.uniqueId)(),value:E[E.length-1].value},L=[].concat(Mg(E),[F]);h(L)},g=function(F){h(function(L){return L.filter(function(k){return k.id!==F})})},C=function(F){var L=E.map(function(k){return k.id===F.id?F:k});h(L)},x=function(F,L){var k=E.slice(),Y=k[Number(F)];k[Number(F)]=k[Number(L)],k[Number(L)]=Y,h(k)},j=function(){var F=E.map(function(L){return L.value});n(F)};return l(i().createElement("div",{className:I()("".concat(a),s,o)},i().createElement("div",{className:"".concat(a,"__selection-item")},E.map(function(D){return i().createElement("span",{key:D.id,className:"".concat(a,"__selection-item-color"),style:{backgroundColor:D.value,height:"10px",width:"".concat(100/E.length,"%")}})})),i().createElement("div",{className:"".concat(a,"__custon-item")},i().createElement($u.W,{backend:ec.PD},E.map(function(D,F){return i().createElement(Tg,{onChangeSort:x,index:F,id:D.id,key:"drag_card".concat(F),color:D.value,onDelete:function(){return g(D.id)},onChange:function(k){return C({id:D.id,value:k})}})}))),i().createElement("div",{onClick:_,className:"".concat(a,"__add-range-item")},i().createElement(M.PlusOutlined,null)," \u6DFB\u52A0"),i().createElement("div",{className:"".concat(a,"__btn")},i().createElement("span",{onClick:j},"\u5E94\u7528"))))},Ug=zg;function yn(e){"@babel/helpers - typeof";return yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yn(e)}function Ni(e,t,r){return t=Vg(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vg(e){var t=Gg(e,"string");return yn(t)=="symbol"?t:String(t)}function Gg(e,t){if(yn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kg=(0,qe.l)("color-range-selector__palette-config-item",function(e){var t=e.componentCls,r=e.colorTextSecondary;return Ni({},t,Ni(Ni({display:"flex",alignItems:"center",justifyContent:"space-between",height:"40px",color:r,borderRadius:"2px"},"".concat(t,"__name"),{minWidth:"60px"}),"".concat(t,"__select"),{width:"80px !important"}))});function dn(e){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dn(e)}function lc(e,t,r){return t=Qg(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qg(e){var t=Zg(e,"string");return dn(t)=="symbol"?t:String(t)}function Zg(e,t){if(dn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jg(e,t){return eb(e)||$g(e,t)||Xg(e,t)||qg()}function qg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xg(e,t){if(e){if(typeof e=="string")return uc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uc(e,t)}}function uc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $g(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function eb(e){if(Array.isArray(e))return e}var tb=function(t){var r=(0,Je.F)("formily-color-range-selector__palette-config-item"),n=Kg(r),o=Jg(n,2),a=o[0],u=o[1],c=t.id,l=t.label,s=t.type,y=t.config,A=t.value,E=t.onChange;return a(i().createElement("div",{className:I()("".concat(r),u),key:c},i().createElement("span",{className:"".concat(r,"__name")}," ",l),s==="select"&&i().createElement(P.Select,{className:"".concat(r,"__select"),value:A,options:y.options,onChange:function(_){return E(lc({},c,_))},onMouseDown:function(_){_.preventDefault(),_.stopPropagation()}}),s==="switch"&&i().createElement(P.Switch,{checked:A,onChange:function(_){return E(lc({},c,_))}})))},rb=tb;function vn(e){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vn(e)}function Mi(){return Mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mi.apply(this,arguments)}function cc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function sc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cc(Object(r),!0).forEach(function(n){nb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nb(e,t,r){return t=ob(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ob(e){var t=ab(e,"string");return vn(t)=="symbol"?t:String(t)}function ab(e,t){if(vn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fc(e,t){return cb(e)||ub(e,t)||lb(e,t)||ib()}function ib(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lb(e,t){if(e){if(typeof e=="string")return mc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mc(e,t)}}function mc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ub(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function cb(e){if(Array.isArray(e))return e}var sb=function(t){var r,n=t.isOpen,o=t.colorRanges,a=t.selectedValue,u=o.find(function(B){var W=a.isReversed?a.colors.slice().reverse():a.colors;return B.colors.toString()===W.toString()}),c=(0,N.useState)({type:(r=u==null?void 0:u.type)!==null&&r!==void 0?r:"all",steps:a.colors.length||6}),l=fc(c,2),s=l[0],y=l[1],A=u===void 0,E=(0,N.useState)(A),h=fc(E,2),_=h[0],g=h[1],C=(0,N.useMemo)(function(){var B=[];return B=o.filter(function(W){var z;return((z=W.colors)===null||z===void 0?void 0:z.length)===s.steps}),s.type!=="all"&&(B=B.filter(function(W){return W.type===s.type})),B},[o,s]),x=(0,N.useMemo)(function(){var B=[],W=s.type==="all"?o:o.filter(function(z){return z.type===s.type});return W.forEach(function(z){var R,q;B.findIndex(function(ee){var re;return ee.value===((re=z.colors)===null||re===void 0?void 0:re.length)})===-1&&B.push({value:(R=z.colors)===null||R===void 0?void 0:R.length,label:(q=z.colors)===null||q===void 0?void 0:q.length})}),B},[s.type,o]),j=function(W){y(function(z){return sc(sc({},z),W)})},D=(0,$r.Z)(function(B){var W,z=B.isReversed;(W=t.onChange)===null||W===void 0||W.call(t,{isReversed:z,colors:a.colors.slice().reverse()})}),F=function(W){var z;(z=t.onChange)===null||z===void 0||z.call(t,{isReversed:a.isReversed,colors:a.isReversed?W.slice().reverse():W})},L=function(W){var z=W.customPalette;g(z)},k=function(W){var z;(z=t.onChange)===null||z===void 0||z.call(t,{isReversed:a.isReversed,colors:W})};(0,N.useEffect)(function(){if(a.colors.length!==s.steps){var B=a.isReversed?a.colors.slice().reverse():a.colors,W=o.find(function(ee){return ee.colors.toString()===B.toString()}),z=W&&qu(W);if(!z)return;var R=C.find(function(ee){return qu(ee)===z});if(R){var q;(q=t.onChange)===null||q===void 0||q.call(t,{isReversed:a.isReversed,colors:a.isReversed?R.colors.slice().reverse():R.colors})}}},[C]);var Y=(0,N.useMemo)(function(){var B=[{id:"type",label:"\u7C7B\u578B",type:"select",value:s.type,config:{options:[{value:"all",label:"\u5168\u90E8"},{value:"sequential",label:"\u8FDE\u7EED"},{value:"singlehue",label:"\u5355\u8272"},{value:"qualitative",label:"\u5206\u7C7B"},{value:"diverging",label:"\u53D1\u6563"}]},onChange:j},{id:"steps",label:"\u6570\u91CF",type:"select",value:s.steps,config:{options:x},onChange:j},{id:"isReversed",label:"\u53CD\u8F6C",type:"switch",value:a.isReversed,config:{},onChange:D},{id:"customPalette",label:"\u81EA\u5B9A\u4E49",type:"switch",value:_,config:{},onChange:L}];return _?B.filter(function(W){return W.id==="customPalette"}):B},[x,s,a,_,D]),Z=(0,N.useMemo)(function(){var B;return _?i().createElement(Ug,{ranges:a.colors,onChange:k,onCancel:function(){L({customPalette:!1})}}):i().createElement(Og,{colorRange:C,selectedValue:a.colors,isReversed:(B=a.isReversed)!==null&&B!==void 0?B:!1,onChange:function(z){F(z)}})},[C,_,a]);return n?i().createElement("div",{style:{padding:"0 10px"}},Y.map(function(B){return i().createElement(rb,Mi({key:B.id},B))}),i().createElement(P.Divider,{style:{margin:" 0 0 10px"}}),Z):null},fb=sb;function gn(e){"@babel/helpers - typeof";return gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gn(e)}function bn(e,t,r){return t=mb(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mb(e){var t=pb(e,"string");return gn(t)=="symbol"?t:String(t)}function pb(e,t){if(gn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yb=(0,qe.l)("color-range-selector",function(e){var t=e.componentCls,r=e.antCls;return bn(bn({},t,bn({maxWidth:260,display:"inline-block",verticalAlign:"middle"},"".concat(t,"__selection-item"),bn(bn({display:"flex",alignItems:"center",height:"100%"},"".concat(t,"__selection-item-color:nth-child(1)"),{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}),"".concat(t,"__selection-item-color:last-child"),{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}))),"".concat(r,"-select-dropdown"),{maxHeight:"400px",overflowY:"auto"})});function pc(e,t){return bb(e)||gb(e,t)||vb(e,t)||db()}function db(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vb(e,t){if(e){if(typeof e=="string")return yc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yc(e,t)}}function yc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gb(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function bb(e){if(Array.isArray(e))return e}var hb=function(t){var r=(0,Je.F)("formily-color-range-selector"),n=yb(r),o=pc(n,2),a=o[0],u=o[1],c=t.options&&t.options.length?t.options:ag.A,l=(0,N.useMemo)(function(){return(0,oe.isUndefined)(t.value)||(0,oe.isUndefined)(t.value.colors)?ig:t.value},[t.value]),s=(0,N.useState)(!1),y=pc(s,2),A=y[0],E=y[1],h=function(g){t.onChange&&t.onChange(g)};return a(i().createElement(P.Select,{disabled:t.disabled,className:I()("".concat(r),u),open:A,onDropdownVisibleChange:function(g){return E(g)},value:l.colors.toString(),dropdownStyle:{display:A?"block":"none"},dropdownRender:function(){return i().createElement(fb,{isOpen:A,colorRanges:c,selectedValue:l,onChange:h})}},[l].map(function(_){var g=_.colors;if(g.length!==0)return i().createElement(P.Select.Option,{key:g.toString(),value:g.toString()},i().createElement("div",{className:"".concat(r,"__selection-item")},g.map(function(C,x){return i().createElement("span",{key:"".concat(C).concat(x),className:"".concat(r,"__selection-item-color"),style:{backgroundColor:C,height:"22px",width:"".concat(100/g.length,"%")}})})))})))},Sb=hb,_b=(0,st.connect)(Sb,(0,st.mapProps)({dataSource:"options",loading:!0})),Cb=_b;function hn(e){"@babel/helpers - typeof";return hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hn(e)}function Sn(e,t,r){return t=Ob(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ob(e){var t=Eb(e,"string");return hn(t)=="symbol"?t:String(t)}function Eb(e,t){if(hn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ab=(0,qe.l)("color-picker",function(e){var t=e.antCls,r=e.componentCls,n=e.lineWidth,o=e.lineType,a=e.colorBorder,u=e.borderRadius;return Sn(Sn({},r,Sn({display:"flex",alignItems:"center",boxSizing:"border-box",width:"100%",height:" 32px",padding:"0 5px",backgroundColor:"initial",borderWidth:"".concat(n,"px"),borderStyle:o,borderColor:a,borderRadius:"".concat(u,"px")},"".concat(r,"__color-block"),{width:"35px",height:"20px",borderRadius:"".concat(u,"px"),cursor:"pointer"})),"".concat(t,"-popover"),Sn(Sn({},"".concat(t,"-color-picker-inner-panel-divider"),{margin:"3px 8px !important"}),"".concat(t,"-color-picker-presets ").concat(t,"-collapse-item ").concat(t,"-collapse-header"),{display:"none"}))});function wb(e,t){return xb(e)||jb(e,t)||Ib(e,t)||Pb()}function Pb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ib(e,t){if(e){if(typeof e=="string")return dc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dc(e,t)}}function dc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jb(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function xb(e){if(Array.isArray(e))return e}var Ri=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3","#A9ABB1"],Db=i().memo(function(e){var t=e.onChange,r=e.value,n=e.disable,o=n===void 0?!1:n,a=(0,Je.F)("formily-color-picker"),u=Ab(a),c=wb(u,2),l=c[0],s=c[1],y=(0,N.useCallback)(function(A){t==null||t(A.toHexString())},[t]);return l(i().createElement("div",{className:I()("".concat(a),s),style:{pointerEvents:o?"none":"auto"}},i().createElement(P.ColorPicker,{value:r||Ri[0],onChange:y,presets:[{label:"\u63A8\u8350",colors:Ri}]},i().createElement("div",{className:"".concat(a,"__color-block"),style:{background:r||Ri[0]}}))))}),Tb=(0,st.connect)(Db),Fb=Tb;function _n(e){"@babel/helpers - typeof";return _n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_n(e)}function da(e,t,r){return t=Lb(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lb(e){var t=Nb(e,"string");return _n(t)=="symbol"?t:String(t)}function Nb(e,t){if(_n(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_n(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mb=(0,qe.l)("slider-range",function(e){var t=e.antCls,r=e.componentCls;return da({},r,da(da(da({display:"inline-block",width:"100%"},"".concat(r,"__input-number"),{display:"flex",justifyContent:"space-between"}),"".concat(t,"-slider"),{flex:1}),"".concat(t,"-input-number"),{width:"60px !important",margin:0}))});function Cn(e){"@babel/helpers - typeof";return Cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cn(e)}var Rb=["showSlider"];function Bi(){return Bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bi.apply(this,arguments)}function vc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function gc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vc(Object(r),!0).forEach(function(n){Bb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bb(e,t,r){return t=kb(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kb(e){var t=Yb(e,"string");return Cn(t)=="symbol"?t:String(t)}function Yb(e,t){if(Cn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wb(e,t){return Vb(e)||Ub(e,t)||zb(e,t)||Hb()}function Hb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zb(e,t){if(e){if(typeof e=="string")return bc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bc(e,t)}}function bc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ub(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Vb(e){if(Array.isArray(e))return e}function Gb(e,t){if(e==null)return{};var r=Kb(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Kb(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var Qb={min:0,max:100,step:1},Zb=function(t){var r,n,o=(0,Je.F)("formily-slider-range",t),a=t.showSlider,u=a===void 0?!0:a,c=Gb(t,Rb),l=Mb(o),s=Wb(l,2),y=s[0],A=s[1],E=gc(gc({},Qb),c),h=(0,oe.isArray)(t.value)?t.value:t.defaultValue||[0,100],_=function(C){var x;(x=t.onChange)===null||x===void 0||x.call(t,C)};return y(i().createElement("div",{className:I()("".concat(o),A)},u&&i().createElement(P.Slider,Bi({},E,{range:!0,onChange:function(C){var x;(x=t.onChange)===null||x===void 0||x.call(t,C)}})),i().createElement("div",{className:"".concat(o,"__input-number")},i().createElement(P.InputNumber,{min:E.min,max:(r=h[1])!==null&&r!==void 0?r:E.max,size:"small",value:h[0],onChange:function(C){Number(C)<=h[1]&&_([Number(C),h[1]])}}),i().createElement(P.InputNumber,{min:(n=h[0])!==null&&n!==void 0?n:E.min,max:E.max,size:"small",value:h[1],onChange:function(C){Number(C)>=h[0]&&_([h[0],Number(C)])}}))))},Jb=(0,st.connect)(Zb),qb=Jb,hc="custom",Xb=[{label:"\u7B49\u95F4\u8DDD",value:"quantize",type:"number"},{label:"\u7B49\u5206\u4F4D",value:"quantile",type:"number"},{label:"\u679A\u4E3E",value:"cat",type:"string"},{label:"\u81EA\u5B9A\u4E49\u5206\u7C7B",value:"custom",type:"string"},{label:"\u81EA\u5B9A\u4E49\u5206\u6BB5",value:"custom",type:"number"}],$b={string:["#bdd7e7","#6baed6","#3182bd"],number:["#ffeda0","#feb24c","#f03b20"]};function On(e){"@babel/helpers - typeof";return On=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},On(e)}function Sc(e,t,r){return t=eh(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eh(e){var t=th(e,"string");return On(t)=="symbol"?t:String(t)}function th(e,t){if(On(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(On(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rh=(0,qe.l)("scale-selector__custom-input__number",function(e){var t=e.componentCls,r=e.antCls;return Sc({},t,{width:"100%",textAlign:"right",display:"flex",flex:1,justifyContent:"space-between","&__input":Sc({"&-desc":{fontSize:"12px !important",width:"50px"}},"".concat(r,"-input-number-input-wrap"),{input:{fontSize:"12px"}})})});function _c(e,t){return ih(e)||ah(e,t)||oh(e,t)||nh()}function nh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oh(e,t){if(e){if(typeof e=="string")return Cc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cc(e,t)}}function Cc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ah(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function ih(e){if(Array.isArray(e))return e}var lh=function(t){var r=t.size,n=r===void 0?"middle":r,o=t.value,a=t.min,u=a===void 0?-1/0:a,c=t.max,l=c===void 0?1/0:c,s=t.position,y=t.onChange,A=(0,Je.F)("formily-scale-selector__custom-input__number"),E=rh(A),h=_c(E,2),_=h[0],g=h[1],C=(0,N.useState)(o),x=_c(C,2),j=x[0],D=x[1],F=function(Y){var Z=(j==null?void 0:j.length)===2?[Y,j[1]]:[Y,1/0];y(Z),D(Z)},L=function(Y){if(s==="first"){var Z=[-1/0,Y];y(Z),D(Z)}else if(s==="last"){var B=[Y,1/0];y(B),D(B)}else{var W=(j==null?void 0:j.length)>0?[j[0],Y]:[-1/0,Y];y(W),D(W)}};return(0,N.useEffect)(function(){D(o)},[o]),_(i().createElement("div",{className:I()("".concat(A),g)},s==="first"&&i().createElement(i().Fragment,null,i().createElement(P.Input,{size:n,value:"MIN",bordered:!1,className:"".concat(A,"__input-desc")}),i().createElement("span",{style:{margin:"0 2px"}},"-"),i().createElement(P.Tooltip,{title:j==null?void 0:j[1]},i().createElement(P.InputNumber,{controls:!1,size:n,min:u,max:l,value:j==null?void 0:j[1],className:"".concat(A,"__input"),onChange:function(Y){return L(Y)}}))),s==="last"&&i().createElement(i().Fragment,null,i().createElement(P.Tooltip,{title:j==null?void 0:j[0]},i().createElement(P.InputNumber,{controls:!1,size:n,min:u,max:l,value:j==null?void 0:j[0],className:"".concat(A,"__input"),onChange:function(Y){return L(Y)}})),i().createElement("span",{style:{margin:"0 2px"}},"-"),i().createElement(P.Input,{size:n,value:"MAX",bordered:!1,className:"".concat(A,"__input-desc")})),!s&&i().createElement(i().Fragment,null,i().createElement(P.Tooltip,{title:j==null?void 0:j[0]},i().createElement(P.InputNumber,{controls:!1,size:n,min:u,max:j==null?void 0:j[1],value:j==null?void 0:j[0],className:"".concat(A,"__input"),onChange:function(Y){return F(Y)}})),i().createElement("span",{style:{margin:"0 2px"}},"-"),i().createElement(P.Tooltip,{title:j==null?void 0:j[1]},i().createElement(P.InputNumber,{controls:!1,size:n,min:j==null?void 0:j[0],max:l,value:j==null?void 0:j[1],className:"".concat(A,"__input"),onChange:function(Y){return L(Y)}})))))},uh=lh;function En(e){"@babel/helpers - typeof";return En=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},En(e)}function Ar(e,t,r){return t=ch(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ch(e){var t=sh(e,"string");return En(t)=="symbol"?t:String(t)}function sh(e,t){if(En(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(En(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fh=(0,qe.l)("scale-selector__custom-content__custom-number__input",function(e){var t=e.componentCls,r=e.antCls,n=e.colorTextDescription,o=e.colorBorder,a=e.lineType;return Ar(Ar(Ar(Ar({},t,Ar({display:"flex",alignItems:"center",padding:"5px 0",borderRadius:"4px"},"".concat(t,"__infor"),{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",cursor:"pointer","&__color":{width:"18px",height:"18px",border:"1px ".concat(o," ").concat(a),borderRadius:"4px"},"&__content":{flex:1,width:"100%",overflow:"hidden",margin:"0 3px"},"&__delete-icon":{width:"14px",padding:0,color:n}})),"".concat(r,"-select-dropdown"),{zIndex:1}),"".concat(r,"-popover"),Ar({zIndex:"4 !important"},"".concat(r,"-color-picker-presets ").concat(r,"-collapse-item ").concat(r,"-collapse-header"),{display:"none"})),"".concat(r,"-color-picker ").concat(r,"-color-picker-panel ").concat(r,"-color-picker-inner-panel-divider"),{margin:"3px 8px "})});function mh(e,t){return vh(e)||dh(e,t)||yh(e,t)||ph()}function ph(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yh(e,t){if(e){if(typeof e=="string")return Oc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oc(e,t)}}function Oc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dh(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function vh(e){if(Array.isArray(e))return e}var gh=function(t){var r=t.position,n=t.color,o=t.value,a=t.delDisable,u=a===void 0?!1:a,c=t.min,l=c===void 0?-1/0:c,s=t.max,y=s===void 0?1/0:s,A=t.onDelete,E=t.onChange,h=(0,Je.F)("formily-scale-selector__custom-content__custom-number__input"),_=fh(h),g=mh(_,2),C=g[0],x=g[1],j=function(L){E==null||E(o,L.toHexString())},D=function(L){E==null||E(L,n)};return C(i().createElement("div",{className:I()("".concat(h),x)},i().createElement("div",{className:"".concat(h,"__infor")},i().createElement("div",{onMouseDown:function(L){L.preventDefault(),L.stopPropagation()}},i().createElement(P.ColorPicker,{value:n||"#5B8FF9",onChange:j},i().createElement("div",{className:"".concat(h,"__infor__color"),style:{background:n}}))),i().createElement("div",{className:"".concat(h,"__infor__content")},i().createElement(uh,{size:"small",min:l,max:y,value:o,position:r,onChange:D})),i().createElement(P.Button,{type:"link",disabled:u,className:"".concat(h,"__infor__delete-icon")},i().createElement(M.DeleteOutlined,{onClick:A})))))},bh=gh;function An(e){"@babel/helpers - typeof";return An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An(e)}function Ec(e,t,r){return t=hh(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hh(e){var t=Sh(e,"string");return An(t)=="symbol"?t:String(t)}function Sh(e,t){if(An(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(An(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _h=(0,qe.l)("color-range-selector__custom-number",function(e){var t=e.componentCls,r=e.colorTextSecondary,n=e.colorInfoTextHover;return Ec({},t,Ec({},"".concat(t,"__add-range-item"),{cursor:"pointer",color:r,padding:"5px","&:hover":{color:n}}))});function wn(e){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wn(e)}function Ac(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ac(Object(r),!0).forEach(function(n){Ch(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ac(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ch(e,t,r){return t=Oh(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oh(e){var t=Eh(e,"string");return wn(t)=="symbol"?t:String(t)}function Eh(e,t){if(wn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ah(e){return Ih(e)||Ph(e)||wc(e)||wh()}function wh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ph(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ih(e){if(Array.isArray(e))return ki(e)}function jh(e,t){return Th(e)||Dh(e,t)||wc(e,t)||xh()}function xh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wc(e,t){if(e){if(typeof e=="string")return ki(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ki(e,t)}}function ki(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dh(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Th(e){if(Array.isArray(e))return e}var Fh=function(t){var r=t.value,n=r===void 0?[]:r,o=t.domain,a=t.onChange,u=t.className,c=(0,Je.F)("formily-color-range-selector__custom-number"),l=_h(c),s=jh(l,2),y=s[0],A=s[1],E=function(){var C,x;if(n.length===0){var j=Number(((Number(o[1])-Number(o[0]))/2).toFixed(2)),D=[{id:(0,oe.uniqueId)(),value:[-1/0,j],color:"#bdd7e7"},{id:(0,oe.uniqueId)(),value:[j,1/0],color:"#6baed6"}];a(D);return}var F=n.length===1?o:[Number(n[n.length-1].value[0]),o[1]],L=Number(((Number(F[1])-Number(F[0]))/2).toFixed(2)),k=[Number(F[0]),Number((L+F[0]).toFixed(2))],Y=[{id:n[n.length-1].id,value:[F[0],k[1]],color:(C=n[n.length-1].color)!==null&&C!==void 0?C:"#5B8FF9"},{id:(0,oe.uniqueId)(),value:[k[1],1/0],color:(x=n[n.length-1].color)!==null&&x!==void 0?x:"#5B8FF9"}],Z=[].concat(Ah(n.slice(0,-1)),Y);a(Z)},h=function(C,x){var j=n[C],D=n.map(function(F,L){return C===L?F:x!=="last"?C+1===L?Yt(Yt({},F),{},{value:[j.value[0],F.value[1]]}):F:C-1===L?Yt(Yt({},F),{},{value:[F.value[0],1/0]}):F}).filter(function(F,L){return L!==C});a(D)},_=function(C,x,j){var D=n.map(function(F,L){return j===L?Yt(Yt({},F),{},{value:C,color:x}):j-1===L?Yt(Yt({},F),{},{value:[F.value[0],C[0]]}):j+1===L?Yt(Yt({},F),{},{value:[C[1],F.value[1]]}):F});a(D)};return y(i().createElement("div",{className:I()("".concat(c),A,u)},n.map(function(g,C){var x,j=C===0?"first":C===n.length-1?"last":null,D=j==="first"?-1/0:n[C-1].value[0],F=j==="last"?1/0:(x=n[C+1])===null||x===void 0||(x=x.value)===null||x===void 0?void 0:x[1];return i().createElement(bh,{key:"custom-input-number".concat(C),color:g.color,value:g.value,min:D,max:F,position:j,delDisable:n.length<=2,onDelete:function(){return h(C,j)},onChange:function(k,Y){return _(k,Y,C)}})}),i().createElement("div",{onClick:E,className:"".concat(c,"__add-range-item")},i().createElement(M.PlusOutlined,null)," \u6DFB\u52A0")))},Pc=Fh;function Lh(e,t){return Bh(e)||Rh(e,t)||Mh(e,t)||Nh()}function Nh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mh(e,t){if(e){if(typeof e=="string")return Ic(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ic(e,t)}}function Ic(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rh(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Bh(e){if(Array.isArray(e))return e}var kh=function(t){var r=t.size,n=r===void 0?"middle":r,o=t.value,a=t.options,u=t.onChange,c=(0,Je.F)("formily-scale-selector__custom-content__custom-item__item-string"),l=(0,N.useState)(o),s=Lh(l,2),y=s[0],A=s[1],E=function(_){A(_),u(_)};return(0,N.useEffect)(function(){A(o)},[o]),i().createElement("div",{className:c},i().createElement(P.Select,{size:n,mode:"tags",maxTagCount:1,popupMatchSelectWidth:!1,allowClear:!0,style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9",value:y,onChange:E,options:a,onMouseDown:function(_){_.preventDefault(),_.stopPropagation()}}))},Yh=kh;function Pn(e){"@babel/helpers - typeof";return Pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pn(e)}function wr(e,t,r){return t=Wh(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wh(e){var t=Hh(e,"string");return Pn(t)=="symbol"?t:String(t)}function Hh(e,t){if(Pn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zh=(0,qe.l)("scale-selector__custom-string",function(e){var t=e.componentCls,r=e.antCls,n=e.colorInfoTextHover;return wr(wr(wr(wr({},t,wr({display:"flex",alignItems:"center",padding:"5px 0",borderRadius:"4px"},"".concat(t,"__infor"),{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",cursor:"pointer","&__color":{width:"18px",height:"18px",borderRadius:"4px"},"&__content":{flex:1,width:"100%",overflow:"hidden",margin:"0 3px"},"&__delete-icon":{width:"14px"},"&__delete-icon:hover":{color:n}})),"".concat(r,"-select-dropdown"),{zIndex:1}),"".concat(r,"-popover"),wr({zIndex:"4 !important"},"".concat(r,"-color-picker-presets ").concat(r,"-collapse-item ").concat(r,"-collapse-header"),{display:"none"})),"".concat(r,"-color-picker ").concat(r,"-color-picker-panel ").concat(r,"-color-picker-inner-panel-divider"),{margin:"3px 8px "})});function Uh(e,t){return Qh(e)||Kh(e,t)||Gh(e,t)||Vh()}function Vh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gh(e,t){if(e){if(typeof e=="string")return jc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jc(e,t)}}function jc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kh(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Qh(e){if(Array.isArray(e))return e}var Zh=function(t){var r=t.selectedOption,n=t.selectOptions,o=t.color,a=t.value,u=t.onDelete,c=t.onChange,l=(0,Je.F)("formily-scale-selector__custom-string"),s=zh(l),y=Uh(s,2),A=y[0],E=y[1],h=(0,N.useMemo)(function(){if(!r.length&&!a.length)return n;var C=r.filter(function(x){return x&&!a.includes(x)});return n.filter(function(x){return!C.includes(x.value)})},[r,n,a]),_=function(x){c==null||c(a,x.toHexString())},g=function(x){c==null||c(x,o)};return A(i().createElement("div",{className:I()("".concat(l),E)},i().createElement("div",{className:"".concat(l,"__infor")},i().createElement("div",{onMouseDown:function(x){x.preventDefault(),x.stopPropagation()}},i().createElement(P.ColorPicker,{value:o||"#5B8FF9",onChange:_},i().createElement("div",{className:"".concat(l,"__infor__color"),style:{background:o}}))),i().createElement("div",{className:"".concat(l,"__infor__content")},i().createElement(Yh,{size:"small",value:a,onChange:g,options:h})),i().createElement("div",{className:"".concat(l,"__infor__delete-icon"),onClick:u},i().createElement(M.DeleteOutlined,null)))))},Jh=Zh;function In(e){"@babel/helpers - typeof";return In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},In(e)}function xc(e,t,r){return t=qh(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qh(e){var t=Xh(e,"string");return In(t)=="symbol"?t:String(t)}function Xh(e,t){if(In(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(In(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $h=(0,qe.l)("color-range-selector__custom-string",function(e){var t=e.componentCls,r=e.colorTextSecondary,n=e.colorInfoTextHover;return xc({},t,xc({},"".concat(t,"__add-range-item"),{cursor:"pointer",color:r,padding:"5px","&:hover":{color:n}}))});function jn(e){"@babel/helpers - typeof";return jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jn(e)}function Pr(e,t,r){return t=e0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e0(e){var t=t0(e,"string");return jn(t)=="symbol"?t:String(t)}function t0(e,t){if(jn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r0=(0,qe.l)("scale-selector__custom-string-unknown",function(e){var t=e.componentCls,r=e.antCls,n=e.colorBorder,o=e.lineType;return Pr(Pr(Pr(Pr({},t,Pr({display:"flex",alignItems:"center",padding:"5px 0",borderRadius:"4px"},"".concat(t,"__infor"),{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",cursor:"pointer","&__color":{width:"18px",height:"18px",border:"1px ".concat(n," ").concat(o),borderRadius:"4px"},"&__content":{flex:1,width:"100%",overflow:"hidden",margin:"0 3px"},"&__delete-icon":{width:"14px"}})),"".concat(r,"-select-dropdown"),{zIndex:1}),"".concat(r,"-popover"),Pr({zIndex:"4 !important"},"".concat(r,"-color-picker-presets ").concat(r,"-collapse-item ").concat(r,"-collapse-header"),{display:"none"})),"".concat(r,"-color-picker ").concat(r,"-color-picker-panel ").concat(r,"-color-picker-inner-panel-divider"),{margin:"3px 8px "})});function n0(e,t){return l0(e)||i0(e,t)||a0(e,t)||o0()}function o0(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a0(e,t){if(e){if(typeof e=="string")return Dc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dc(e,t)}}function Dc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i0(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function l0(e){if(Array.isArray(e))return e}var u0=function(t){var r=t.color,n=t.onChange,o=(0,Je.F)("formily-scale-selector__custom-string-unknown"),a=r0(o),u=n0(a,2),c=u[0],l=u[1],s=function(A){n==null||n(A.toHexString())};return c(i().createElement("div",{className:I()("".concat(o),l)},i().createElement("div",{className:"".concat(o,"__infor")},i().createElement("div",{onMouseDown:function(A){A.preventDefault(),A.stopPropagation()}},i().createElement(P.ColorPicker,{value:r||"#5B8FF9",onChange:s},i().createElement("div",{className:"".concat(o,"__infor__color"),style:{background:r}}))),i().createElement("div",{className:"".concat(o,"__infor__content")},i().createElement(P.Select,{size:"small",style:{width:"100%"},disabled:!0,placeholder:"\u5176\u4ED6"})),i().createElement("div",{className:"".concat(o,"__infor__delete-icon")}))))},c0=u0;function xn(e){"@babel/helpers - typeof";return xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xn(e)}function Tc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Fc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tc(Object(r),!0).forEach(function(n){s0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s0(e,t,r){return t=f0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f0(e){var t=m0(e,"string");return xn(t)=="symbol"?t:String(t)}function m0(e,t){if(xn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p0(e){return v0(e)||d0(e)||Lc(e)||y0()}function y0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d0(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function v0(e){if(Array.isArray(e))return Yi(e)}function g0(e,t){return S0(e)||h0(e,t)||Lc(e,t)||b0()}function b0(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lc(e,t){if(e){if(typeof e=="string")return Yi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yi(e,t)}}function Yi(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h0(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function S0(e){if(Array.isArray(e))return e}var _0=function(t){var r=t.value,n=r===void 0?[]:r,o=t.unknown,a=o===void 0?"#f000":o,u=t.domain,c=t.onChange,l=t.onUnknownChange,s=t.className,y=(0,Je.F)("formily-color-range-selector__custom-string"),A=$h(y),E=g0(A,2),h=E[0],_=E[1],g=(0,N.useMemo)(function(){if(n.length){var F=n.map(function(L){return L.value}).flat();return F}return[]},[n]),C=(0,N.useMemo)(function(){return u.map(function(F){return{label:F,value:F}})},[u]),x=function(){var L,k,Y={id:(0,oe.uniqueId)(),value:[],color:(L=(k=n[n.length-1])===null||k===void 0?void 0:k.color)!==null&&L!==void 0?L:"#5B8FF9"},Z=[].concat(p0(n),[Y]);c(Z)},j=function(L){var k=n.filter(function(Y,Z){return Z!==L});c(k)},D=function(L,k,Y){var Z=n.map(function(B,W){return Y===W?Fc(Fc({},B),{},{value:L,color:k}):B});c(Z)};return h(i().createElement("div",{className:I()("".concat(y),_,s)},n.map(function(F,L){return i().createElement(Jh,{key:"custom-input-string".concat(L),color:F.color,value:F.value,selectedOption:g,selectOptions:C,onDelete:function(){return j(L)},onChange:function(Y,Z){return D(Y,Z,L)}})}),i().createElement(c0,{color:a,onChange:l}),i().createElement("div",{onClick:x,className:"".concat(y,"__add-range-item")},i().createElement(M.PlusOutlined,null)," \u6DFB\u52A0")))},C0=_0;function Dn(e){"@babel/helpers - typeof";return Dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dn(e)}function Wi(e,t,r){return t=O0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O0(e){var t=E0(e,"string");return Dn(t)=="symbol"?t:String(t)}function E0(e,t){if(Dn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A0=(0,qe.l)("color-range-selector__custom-range",function(e){var t=e.componentCls,r=e.lineWidth,n=e.lineType,o=e.colorTextSecondary,a=e.colorBorder,u=e.colorInfoTextHover;return Wi({},t,Wi(Wi({},"".concat(t,"_custom-content"),{maxHeight:"200px",overflow:"hidden",overflowY:"auto"}),"".concat(t,"__btn"),{display:"flex",alignItems:"center",justifyContent:"right",marginTop:"10px",paddingTop:"10px",textAlign:"right",borderTop:"".concat(r,"px ").concat(n," ").concat(a),span:{marginLeft:"20px",color:o,cursor:"pointer"},"span:hover":{color:u}}))});function Tn(e){"@babel/helpers - typeof";return Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tn(e)}function Nc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function w0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nc(Object(r),!0).forEach(function(n){P0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P0(e,t,r){return t=I0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I0(e){var t=j0(e,"string");return Tn(t)=="symbol"?t:String(t)}function j0(e,t){if(Tn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hi(e,t){return F0(e)||T0(e,t)||D0(e,t)||x0()}function x0(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D0(e,t){if(e){if(typeof e=="string")return Mc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mc(e,t)}}function Mc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T0(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function F0(e){if(Array.isArray(e))return e}var L0=function(t){var r,n=t.dataType,o=n===void 0?"string":n,a=t.domain,u=t.value,c=t.onChange,l=t.className,s=(0,Je.F)("formily-color-range-selector__custom-range"),y=A0(s),A=Hi(y,2),E=A[0],h=A[1],_=(0,N.useState)([]),g=Hi(_,2),C=g[0],x=g[1],j=(0,N.useState)((r=t.unknown)!==null&&r!==void 0?r:"#f000"),D=Hi(j,2),F=D[0],L=D[1];(0,N.useEffect)(function(){var Z;if(u!=null&&(Z=u.list)!==null&&Z!==void 0&&Z.length){var B=u.list.map(function(W){return w0({id:(0,oe.uniqueId)()},W)});x(B)}},[u]);var k=function(B){x(B)},Y=function(){var B=C.map(function(W){return{value:W.value,color:W.color}});c({type:o,list:B,unknown:F})};return E(i().createElement("div",{className:I()("".concat(s),h,l)},i().createElement("div",{className:I()("".concat(s,"_custom-content"),h,l)},o==="number"&&i().createElement(Pc,{value:C,domain:a,onChange:k}),o==="string"&&i().createElement(C0,{domain:a,value:C,onChange:k,unknown:F,onUnknownChange:function(B){L(B)}})),i().createElement("div",{className:"".concat(s,"__btn")},i().createElement("span",{onClick:Y},"\u5E94\u7528"))))},N0=L0;function M0(e){return k0(e)||B0(e)||Rc(e)||R0()}function R0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B0(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function k0(e){if(Array.isArray(e))return zi(e)}function Y0(e,t){return z0(e)||H0(e,t)||Rc(e,t)||W0()}function W0(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rc(e,t){if(e){if(typeof e=="string")return zi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zi(e,t)}}function zi(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function H0(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function z0(e){if(Array.isArray(e))return e}var Bc=function(t){var r=[];return t.forEach(function(n){n.value.forEach(function(o){o&&r.push({color:n.color,value:typeof o=="string"?o:o.toString()})})}),{domain:r.map(function(n){return n.value}),range:r.map(function(n){return n.color})}},kc=function(t,r,n){if(t==="number"){var o=Y0(r,2),a=o[0],u=o[1],c=(Number(u)-Number(a))/n.length,l=n.length-1>0?n.length-1:0,s=(0,oe.fill)(Array(l),void 0).map(function(C,x){var j=Number(a)+c*(x+1);return j%1===0?Number(j):Number(j.toFixed(2))}),y={isCustom:!0,type:"threshold",domain:s,range:n,unknown:"#f000"};return y}else{var A=n.map(function(C,x){return x+1===n.length?{color:C,value:r.slice(x)}:{color:C,value:[r[x]]}}),E=Bc(A),h=E.domain,_=E.range,g={isCustom:!0,type:"cat",domain:h,range:_,unknown:"#f000"};return g}},U0=function(t){var r=t.type,n=t.list,o=t.unknown,a=o===void 0?"#f000":o;if(r==="number"){var u=n.map(function(h){return h.color}),c=n.map(function(h){return Number(h.value[1])}).slice(0,-1),l={isCustom:!0,type:"threshold",domain:c,range:u,unknown:a};return l}var s=Bc(n),y=s.domain,A=s.range,E={isCustom:!0,type:"cat",domain:y,range:A,unknown:a};return E},V0=function(t,r){if(r.isCustom){var n=r.domain,o=n===void 0?[]:n,a=r.range,u=a===void 0?[]:a;if(t==="number"){var c=u.map(function(_,g){var C,x;return{value:[(C=o[g-1])!==null&&C!==void 0?C:-1/0,(x=o[g])!==null&&x!==void 0?x:1/0],color:_}}),l={type:hc,list:c};return l}for(var s=o.map(function(_,g){return{value:_,color:u[g]}}),y={},A=0;A<s.length;A++){var E=s[A];y[E.color]?y[E.color]=[].concat(M0(y[E.color]),[E.value]):y[E.color]=[E.value]}var h={type:hc,list:Object.keys(y).map(function(_){return{color:_,value:y[_]}})};return h}};function Fn(e){"@babel/helpers - typeof";return Fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fn(e)}function Yc(e,t,r){return t=G0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G0(e){var t=K0(e,"string");return Fn(t)=="symbol"?t:String(t)}function K0(e,t){if(Fn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q0=(0,qe.l)("scale-selector",function(e){var t=e.componentCls,r=e.controlItemBgHover,n=e.controlItemBgActive,o=e.colorTextBase;return Yc(Yc({},"".concat(t,"-select-option"),{cursor:"pointer",height:"32px",padding:"5px",borderRadius:"4px",fontSize:"14px",color:o,"&:hover":{background:r}}),"".concat(t,"-select-option-selected"),{background:n})});function Ln(e){"@babel/helpers - typeof";return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ln(e)}function Z0(e){return X0(e)||q0(e)||zc(e)||J0()}function J0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q0(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function X0(e){if(Array.isArray(e))return Gi(e)}function Wc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Ui(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wc(Object(r),!0).forEach(function(n){Hc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hc(e,t,r){return t=$0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $0(e){var t=eS(e,"string");return Ln(t)=="symbol"?t:String(t)}function eS(e,t){if(Ln(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ln(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vi(e,t){return nS(e)||rS(e,t)||zc(e,t)||tS()}function tS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zc(e,t){if(e){if(typeof e=="string")return Gi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gi(e,t)}}function Gi(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rS(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function nS(e){if(Array.isArray(e))return e}var oS=function(t){var r=(0,Je.F)("formily-scale-selector"),n=t.dataType,o=t.value,a=t.domain,u=a===void 0?[]:a,c=t.onChange,l=(0,N.useRef)(null),s=Q0(r),y=Vi(s,2),A=y[0],E=y[1],h=(0,N.useMemo)(function(){return t.defaultColors?t.defaultColors:$b[n]},[t.defaultColors]),_=(0,N.useMemo)(function(){if(o)return V0(n,o)},[o]),g=(0,N.useState)(!1),C=Vi(g,2),x=C[0],j=C[1],D=(0,N.useState)(o!=null&&o.isCustom?"custom":o==null?void 0:o.type),F=Vi(D,2),L=F[0],k=F[1],Y=(0,N.useMemo)(function(){var W=["string","number"].includes(n)?n:"string";return Xb.filter(function(z){return z.type===W})},[n]),Z=function(z){var R=U0(z);c==null||c(Ui({},R)),j(!1)},B=function(z){if(k(z),z==="custom"){var R=kc(n,u,h);c&&c(Ui({},R))}else c==null||c({isCustom:!1,type:z}),j(!1)};return(0,N.useEffect)(function(){var W;if(!l.current){o?l.current={dataType:n,domain:u}:(W=Y[0].value,k(W),c==null||c({isCustom:!1,type:W}),l.current={dataType:n,domain:u});return}if(l.current.dataType!==n){W=Y[0].value,k(W),c==null||c({isCustom:!1,type:W}),l.current={dataType:n,domain:u};return}if(l.current.domain.toString()!==u.toString()){if(o&&o!==null&&o!==void 0&&o.domain&&o.domain.length!==0){var z=o.range&&o.range.length?Z0(new Set(o.range)):h,R=kc(n,u,z);c&&c(Ui({},R))}l.current={dataType:n,domain:u};return}},[n,u.toString()]),A(i().createElement(P.Select,{value:L,open:x,className:I()("".concat(r),E),onDropdownVisibleChange:function(z){return j(z)},dropdownRender:function(){return i().createElement("div",{className:I()("".concat(r,"-dropdown"),E)},Y.map(function(z){var R;return i().createElement("div",{className:I()("".concat(r,"-select-option"),E,Hc({},"".concat(r,"-select-option-selected"),z.value===L)),key:z==null||(R=z.value)===null||R===void 0?void 0:R.toString(),onClick:function(){return B(z.value)}},z.label)}),L==="custom"&&_&&i().createElement(i().Fragment,null,i().createElement(P.Divider,{style:{margin:"10px 0"}}),i().createElement(N0,{dataType:n,domain:u,value:_,unknown:o==null?void 0:o.unknown,onChange:function(R){return Z(R)}})))},options:Y}))},aS=(0,st.connect)(oS),iS=aS,Uc=[{label:"\u7B49\u95F4\u8DDD",value:"quantize"},{label:"\u679A\u4E3E",value:"cat"},{label:"\u7EBF\u6027\u8FDE\u7EED",value:"linear"},{label:"\u81EA\u5B9A\u4E49\u5206\u7C7B",value:"custom"}];function lS(e,t){return fS(e)||sS(e,t)||cS(e,t)||uS()}function uS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cS(e,t){if(e){if(typeof e=="string")return Vc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vc(e,t)}}function Vc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sS(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function fS(e){if(Array.isArray(e))return e}var mS=function(t){var r=t.size,n=r===void 0?"middle":r,o=t.value,a=t.min,u=t.max,c=t.onChange,l=(0,N.useState)(o),s=lS(l,2),y=s[0],A=s[1],E=function(_){c([_]),A([_])};return(0,N.useEffect)(function(){A(o)},[o]),i().createElement(P.InputNumber,{size:n,min:a,max:u,value:y==null?void 0:y[0],style:{width:"100%"},onChange:function(_){return(0,oe.isNumber)(_)&&E(_)}})},pS=mS;function Nn(e){"@babel/helpers - typeof";return Nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nn(e)}function Ir(e,t,r){return t=yS(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yS(e){var t=dS(e,"string");return Nn(t)=="symbol"?t:String(t)}function dS(e,t){if(Nn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Nn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vS=(0,qe.l)("rester-scale-selector__custom-input",function(e){var t=e.componentCls,r=e.antCls,n=e.colorInfoTextHover;return Ir(Ir(Ir(Ir({},t,Ir({display:"flex",alignItems:"center",padding:"5px 0",borderRadius:"4px"},"".concat(t,"__infor"),{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",cursor:"pointer","&__color":{width:"18px",height:"18px"},"&__content":{flex:1,width:"100%",overflow:"hidden",margin:"0 3px"},"&__delete-icon":{width:"14px"},"&__delete-icon:hover":{color:n}})),"".concat(r,"-select-dropdown"),{zIndex:1}),"".concat(r,"-popover"),Ir({zIndex:"4 !important"},"".concat(r,"-color-picker-presets ").concat(r,"-collapse-item ").concat(r,"-collapse-header"),{display:"none"})),"".concat(r,"-color-picker ").concat(r,"-color-picker-panel ").concat(r,"-color-picker-inner-panel-divider"),{margin:"3px 8px "})});function gS(e,t){return _S(e)||SS(e,t)||hS(e,t)||bS()}function bS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hS(e,t){if(e){if(typeof e=="string")return Gc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gc(e,t)}}function Gc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function SS(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function _S(e){if(Array.isArray(e))return e}var CS=function(t){var r=t.color,n=t.value,o=t.min,a=o===void 0?-1/0:o,u=t.max,c=u===void 0?1/0:u,l=t.onDelete,s=t.onChange,y=(0,Je.F)("formily-rester--scale-selector__custom-input"),A=vS(y),E=gS(A,2),h=E[0],_=E[1],g=function(j){s==null||s(n,j.toHexString())},C=function(j){s==null||s(j,r)};return h(i().createElement("div",{className:I()("".concat(y),_)},i().createElement("div",{className:"".concat(y,"__infor")},i().createElement("div",{onMouseDown:function(j){j.preventDefault(),j.stopPropagation()}},i().createElement(P.ColorPicker,{value:r||"#5B8FF9",onChange:g},i().createElement("div",{className:"".concat(y,"__infor__color"),style:{background:r}}))),i().createElement("div",{className:"".concat(y,"__infor__content")},i().createElement(pS,{size:"small",min:a,max:c,value:n,onChange:C})),i().createElement("div",{className:"".concat(y,"__infor__delete-icon"),onClick:l},i().createElement(M.DeleteOutlined,null)))))},OS=CS;function Mn(e){"@babel/helpers - typeof";return Mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mn(e)}function Kc(e,t,r){return t=ES(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ES(e){var t=AS(e,"string");return Mn(t)=="symbol"?t:String(t)}function AS(e,t){if(Mn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wS=(0,qe.l)("color-range-selector__custom-string",function(e){var t=e.componentCls,r=e.colorTextSecondary,n=e.colorInfoTextHover;return Kc({},t,Kc({},"".concat(t,"__add-range-item"),{cursor:"pointer",color:r,padding:"5px","&:hover":{color:n}}))});function Rn(e){"@babel/helpers - typeof";return Rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rn(e)}function Qc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Zc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qc(Object(r),!0).forEach(function(n){PS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PS(e,t,r){return t=IS(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IS(e){var t=jS(e,"string");return Rn(t)=="symbol"?t:String(t)}function jS(e,t){if(Rn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xS(e){return FS(e)||TS(e)||Jc(e)||DS()}function DS(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TS(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FS(e){if(Array.isArray(e))return Ki(e)}function LS(e,t){return RS(e)||MS(e,t)||Jc(e,t)||NS()}function NS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jc(e,t){if(e){if(typeof e=="string")return Ki(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ki(e,t)}}function Ki(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MS(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function RS(e){if(Array.isArray(e))return e}var BS=function(t){var r=t.value,n=r===void 0?[]:r,o=t.onChange,a=t.className,u=(0,Je.F)("formily-color-range-selector__custom-string"),c=wS(u),l=LS(c,2),s=l[0],y=l[1],A=function(){var g,C,x={id:(0,oe.uniqueId)(),value:[],color:(g=(C=n[n.length-1])===null||C===void 0?void 0:C.color)!==null&&g!==void 0?g:"#5B8FF9"},j=[].concat(xS(n),[x]);o(j)},E=function(g){var C=n.filter(function(x,j){return j!==g});o(C)},h=function(g,C,x){var j=n.map(function(D,F){if(x===F){var L=Zc(Zc({},D),{},{value:g,color:C});return L}return D});o(j)};return s(i().createElement("div",{className:I()("".concat(u),y,a)},n.map(function(_,g){return i().createElement(OS,{key:"custom-input-cat".concat(g),color:_.color,value:_.value,onDelete:function(){return E(g)},onChange:function(x,j){return h(x,j,g)}})}),i().createElement("div",{onClick:A,className:"".concat(u,"__add-range-item")},i().createElement(M.PlusOutlined,null)," \u6DFB\u52A0")))},kS=BS;function Bn(e){"@babel/helpers - typeof";return Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bn(e)}function Qi(e,t,r){return t=YS(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YS(e){var t=WS(e,"string");return Bn(t)=="symbol"?t:String(t)}function WS(e,t){if(Bn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HS=(0,qe.l)("rester-color-range-selector__custom-range",function(e){var t=e.componentCls,r=e.lineWidth,n=e.lineType,o=e.colorTextSecondary,a=e.colorBorder,u=e.colorInfoTextHover;return Qi({},t,Qi(Qi({},"".concat(t,"_custom-content"),{maxHeight:"200px",overflow:"hidden",overflowY:"auto"}),"".concat(t,"__btn"),{display:"flex",alignItems:"center",justifyContent:"right",marginTop:"10px",paddingTop:"10px",textAlign:"right",borderTop:"".concat(r,"px ").concat(n," ").concat(a),span:{marginLeft:"20px",color:o,cursor:"pointer"},"span:hover":{color:u}}))});function kn(e){"@babel/helpers - typeof";return kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kn(e)}function qc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function zS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qc(Object(r),!0).forEach(function(n){US(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function US(e,t,r){return t=VS(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VS(e){var t=GS(e,"string");return kn(t)=="symbol"?t:String(t)}function GS(e,t){if(kn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(kn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xc(e,t){return JS(e)||ZS(e,t)||QS(e,t)||KS()}function KS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QS(e,t){if(e){if(typeof e=="string")return $c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $c(e,t)}}function $c(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ZS(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function JS(e){if(Array.isArray(e))return e}var qS=function(t){var r=t.type,n=r===void 0?"cat":r,o=t.domain,a=t.value,u=t.onChange,c=t.className,l=(0,Je.F)("formily-rester-color-range-selector__custom-range"),s=HS(l),y=Xc(s,2),A=y[0],E=y[1],h=(0,N.useState)([]),_=Xc(h,2),g=_[0],C=_[1];(0,N.useEffect)(function(){var D;if(a!=null&&(D=a.list)!==null&&D!==void 0&&D.length){var F=a.list.map(function(L){return zS({id:(0,oe.uniqueId)()},L)});C(F)}},[a]);var x=function(){var F=g.map(function(L){return{value:L.value,color:L.color}});u({type:n,list:F})},j=function(F){C(F)};return A(i().createElement("div",{className:I()("".concat(l),E,c)},i().createElement("div",{className:I()("".concat(l,"_custom-content"),E,c)},["cat","linear"].includes(n)&&i().createElement(kS,{value:g,onChange:j}),n==="custom"&&i().createElement(Pc,{domain:o,value:g,onChange:function(F){return j(F)}})),i().createElement("div",{className:"".concat(l,"__btn")},i().createElement("span",{onClick:x},"\u5E94\u7528"))))},XS=qS;function $S(e,t){return n_(e)||r_(e,t)||t_(e,t)||e_()}function e_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t_(e,t){if(e){if(typeof e=="string")return es(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return es(e,t)}}function es(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r_(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function n_(e){if(Array.isArray(e))return e}var o_=function(t,r,n){var o=$S(r,2),a=o[0],u=o[1],c=(Number(u)-Number(a))/n.length,l=n.length-1>0?n.length:0;if(t==="custom"){var s=(0,oe.fill)(Array(l-1),void 0).map(function(E,h){var _=Number(a)+c*(h+1);return _%1===0?Number(_):Number(_.toFixed(2))});return{type:t,positions:s,colors:n}}else{var y=(0,oe.fill)(Array(l),void 0).map(function(E,h){var _=c>h?Number(a)+h:+Number(a)+c*h;return _%1===0?Number(_):Number(_.toFixed(2))}),A={type:t,positions:y,colors:n};return A}},a_=function(t){var r=t.type,n=t.list,o=n.map(function(s){return s.color});if(r==="custom"){var a=n.map(function(s){return Number(s.value[1])}).slice(0,-1),u={type:r,positions:a,colors:o};return u}var c=n.map(function(s){return Number(s.value[0])}),l={type:r,positions:c,colors:o};return l},i_=function(t){var r=t.type,n=t.positions,o=n===void 0?[]:n,a=t.colors,u=a===void 0?[]:a;if(r==="custom"){var c=u.map(function(A,E){var h,_;return{value:[(h=o[E-1])!==null&&h!==void 0?h:-1/0,(_=o[E])!==null&&_!==void 0?_:1/0],color:A}}),l={type:r,list:c};return l}if(r==="cat"||r==="linear"){var s=u.map(function(A,E){return{color:A,value:[o[E]]}}),y={type:r,list:s};return y}};function Yn(e){"@babel/helpers - typeof";return Yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yn(e)}function va(e,t,r){return t=l_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l_(e){var t=u_(e,"string");return Yn(t)=="symbol"?t:String(t)}function u_(e,t){if(Yn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Yn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c_=(0,qe.l)("rester-scale-selector",function(e){var t=e.componentCls,r=e.controlItemBgHover,n=e.controlItemBgActive,o=e.colorTextBase;return va(va(va({},"".concat(t,"-dropdown"),va({},"".concat(t,"-custom"),{display:"flex",justifyContent:"space-between",alignItems:"center"})),"".concat(t,"-select-option"),{cursor:"pointer",height:"32px",padding:"5px 12px",borderRadius:"4px",fontSize:"14px",color:o,"&:hover":{background:r}}),"".concat(t,"-select-option-selected"),{background:n})});function Wn(e){"@babel/helpers - typeof";return Wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wn(e)}function ts(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function rs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ts(Object(r),!0).forEach(function(n){ns(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ts(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ns(e,t,r){return t=s_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s_(e){var t=f_(e,"string");return Wn(t)=="symbol"?t:String(t)}function f_(e,t){if(Wn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Wn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zi(e,t){return d_(e)||y_(e,t)||p_(e,t)||m_()}function m_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p_(e,t){if(e){if(typeof e=="string")return os(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return os(e,t)}}function os(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y_(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function d_(e){if(Array.isArray(e))return e}var v_=function(t){var r,n=(0,Je.F)("formily-rester-scale-selector"),o=t.value,a=t.domain,u=a===void 0?[]:a,c=t.defaultColors,l=c===void 0?["#f00","#ff0","#00f","#faa"]:c,s=t.onChange,y=c_(n),A=Zi(y,2),E=A[0],h=A[1],_=(0,N.useState)(!1),g=Zi(_,2),C=g[0],x=g[1],j=(0,N.useState)((r=o==null?void 0:o.type)!==null&&r!==void 0?r:"quantize"),D=Zi(j,2),F=D[0],L=D[1],k=(0,N.useMemo)(function(){if(o&&(o==null?void 0:o.type)!=="quantize")return i_(o)},[o]),Y=function(W){var z=a_(W);s==null||s(rs({},z)),x(!1)},Z=function(W){var z;if(L(W),W==="quantize"){s==null||s({type:W}),x(!1);return}var R=o_(W,u,(z=o==null?void 0:o.colors)!==null&&z!==void 0?z:l);s&&s(rs({},R))};return E(i().createElement(P.Select,{value:F,open:C,className:I()("".concat(n),h),onDropdownVisibleChange:function(W){return x(W)},dropdownRender:function(){return i().createElement("div",{className:I()("".concat(n,"-dropdown"),h)},Uc.map(function(W){var z;return i().createElement("div",{className:I()("".concat(n,"-select-option"),h,ns({},"".concat(n,"-select-option-selected"),W.value===F)),key:W==null||(z=W.value)===null||z===void 0?void 0:z.toString(),onClick:function(){return Z(W.value)}},W.label)}),F!=="quantize"&&k&&i().createElement(i().Fragment,null,i().createElement(P.Divider,{style:{margin:"10px 0"}}),i().createElement(XS,{className:"".concat(n,"-customcontent"),type:F,domain:u,value:k,onChange:function(z){return Y(z)}})))},options:Uc}))},g_=(0,st.connect)(v_),b_=g_,Wt=Q(47019);function Hn(e){"@babel/helpers - typeof";return Hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(e)}function h_(e,t,r){return t=S_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S_(e){var t=__(e,"string");return Hn(t)=="symbol"?t:String(t)}function __(e,t){if(Hn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C_=(0,qe.l)("icon-scale-selector-icon-panel",function(e){var t=e.componentCls;return h_({},t,{"&__icon-content":{marginBottom:"10px","&__header":{fontWeight:500},"&__img":{display:"flex",flexWrap:"wrap","&:hover":{cursor:"pointer"},img:{width:"20px",height:"20px",margin:"5px"}}}})});function O_(e,t){return P_(e)||w_(e,t)||A_(e,t)||E_()}function E_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A_(e,t){if(e){if(typeof e=="string")return as(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return as(e,t)}}function as(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w_(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function P_(e){if(Array.isArray(e))return e}var I_=function(t){var r=(0,Je.F)("formily-icon-scale-selector-icon-panel"),n=C_(r),o=O_(n,2),a=o[0],u=o[1],c=t.iconList,l=c===void 0?[]:c,s=t.onChange,y=function(E){s(E)};return a(i().createElement("div",{className:I()(r,u)},l.map(function(A){if(A.icons.length!==0)return i().createElement("div",{className:I()("".concat(r,"__icon-content"),u),key:A.type},i().createElement("div",{className:I()("".concat(r,"__icon-content__header"),u)},A.type),i().createElement("div",{className:I()("".concat(r,"__icon-content__img"),u)},A.icons.map(function(E){return i().createElement(P.Tooltip,{title:E.name,key:E.id},i().createElement("img",{key:E.id,src:E.url,onClick:function(){return y(E)}}))})))})))},is=I_;function zn(e){"@babel/helpers - typeof";return zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(e)}function ls(e,t,r){return t=j_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j_(e){var t=x_(e,"string");return zn(t)=="symbol"?t:String(t)}function x_(e,t){if(zn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D_=(0,qe.l)("icon-selector",function(e){var t=e.componentCls,r=e.antCls;return ls({},t,ls({position:"relative",display:"flex",alignItems:"center",cursor:"pointer"},"".concat(r,"-select-selection-item"),{display:"flex",justifyContent:"left",img:{width:"20px",marginRight:"10px"}}))});function us(e,t){return N_(e)||L_(e,t)||F_(e,t)||T_()}function T_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F_(e,t){if(e){if(typeof e=="string")return cs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cs(e,t)}}function cs(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L_(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function N_(e){if(Array.isArray(e))return e}var M_=function(t){var r,n=t.value,o=t.onChange,a=(0,Je.F)("formily-icon-selector"),u=D_(a),c=us(u,2),l=c[0],s=c[1],y=(0,N.useState)(!1),A=us(y,2),E=A[0],h=A[1],_=(0,N.useMemo)(function(){var C;if(!n)return[];var x=(C=Wt.K.find(function(j){return(j==null?void 0:j.id)===n}))===null||C===void 0?void 0:C.url;return[{value:n,label:x}]},[n]),g=function(x){o(x.id),h(!1)};return l(i().createElement(P.Select,{placeholder:"\u8BF7\u9009\u62E9\u56FE\u6807",open:E,className:I()("".concat(a),s),onDropdownVisibleChange:function(x){return h(x)},dropdownRender:function(){return i().createElement(is,{iconList:Wt.J,onChange:g})},value:(r=_[0])===null||r===void 0?void 0:r.value},_.length&&_.map(function(C){return i().createElement(P.Select.Option,{key:C.toString(),value:C.value},i().createElement("img",{src:C.label}))})))},R_=(0,st.connect)(M_),B_=R_;function Un(e){"@babel/helpers - typeof";return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Un(e)}function k_(e,t,r){return t=Y_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y_(e){var t=W_(e,"string");return Un(t)=="symbol"?t:String(t)}function W_(e,t){if(Un(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Un(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H_=(0,qe.l)("icon-scale-selector-icon-item",function(e){var t=e.componentCls,r=e.controlItemBgHover,n=e.controlItemBgActive,o=e.borderRadius,a=e.colorTextDescription,u=e.zIndexPopupBase;return k_({},t,{width:"100%",display:"flex",alignItems:"center",height:"28px","&__select":{width:"100%"},"&__icon":{verticalAlign:"middle",marginRight:"5px",zIndex:u+50,"&__img":{width:"20px",height:"20px",display:"flex",justifyContent:"center",background:r,verticalAlign:"middle",borderRadius:"".concat(o,"px"),border:0,cursor:"pointer","&:hover":{background:n}}},"&__icon-popover":{width:"250px",maxHeight:"350px",overflowY:"auto"},"&__value":{flex:1,overflow:"hidden",textOverflow:"ellipsis"},"&__delete":{width:"14px",padding:0,color:a,"&-visible":{visibility:"hidden"}}})});function Vn(e){"@babel/helpers - typeof";return Vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(e)}function ss(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ss(Object(r),!0).forEach(function(n){z_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ss(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z_(e,t,r){return t=U_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U_(e){var t=V_(e,"string");return Vn(t)=="symbol"?t:String(t)}function V_(e,t){if(Vn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fs(e,t){return Z_(e)||Q_(e,t)||K_(e,t)||G_()}function G_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K_(e,t){if(e){if(typeof e=="string")return ms(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ms(e,t)}}function ms(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q_(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Z_(e){if(Array.isArray(e))return e}var J_=function(t){var r=(0,Je.F)("formily-icon-scale-selector-icon-item"),n=H_(r),o=fs(n,2),a=o[0],u=o[1],c=t.value,l=t.disabled,s=l===void 0?!1:l,y=t.iconList,A=y===void 0?[]:y,E=t.fieldList,h=E===void 0?[]:E,_=t.size,g=_===void 0?"middle":_,C=t.onChange,x=t.onDelete,j=(0,N.useState)(!1),D=fs(j,2),F=D[0],L=D[1],k=function(W){var z=ga(ga({},c),W);C(z),L(!1)},Y=function(W){var z=ga(ga({},c),{},{value:W});C(z)},Z=function(){return i().createElement("div",{className:I()("".concat(r,"__icon-popover"),u),onMouseDown:function(z){z.preventDefault(),z.stopPropagation()}},i().createElement(is,{iconList:A,onChange:k}))};return a(i().createElement("div",{className:I()(r,u)},i().createElement("div",{className:I()("".concat(r,"__icon"),u)},i().createElement(P.Popover,{open:F,arrow:!1,content:Z,trigger:"click",overlayClassName:I()("".concat(r,"__icon"),u),onOpenChange:function(W){L(W)}},i().createElement("img",{className:I()("".concat(r,"__icon__img"),u),src:c.url}))),i().createElement("div",{className:I()("".concat(r,"__value"),u)},i().createElement(P.Select,{className:I()("".concat(r,"__select"),u),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",size:g,value:c.value,popupMatchSelectWidth:!1,options:h,onMouseDown:function(W){W.preventDefault(),W.stopPropagation()},onChange:function(W){return Y(W)}})),i().createElement(P.Button,{type:"link",disabled:s,className:I()("".concat(r,"__delete"),u)},i().createElement(M.DeleteOutlined,{onClick:x}))))},q_=J_,X_=function(t){var r=t.length>5?t.slice(0,5):t,n=r.map(function(o,a){return{id:Wt.K[a].id,value:o,name:Wt.K[a].name,url:Wt.K[a].url}});return n},ps=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n={domain:t.map(function(o){return o.value}),range:t.map(function(o){return o.id}),unknown:r};return n},$_=function(t){var r=t.domain,n=r===void 0?[]:r,o=t.range,a=o===void 0?[]:o,u=a.map(function(c,l){var s=Wt.K.find(function(y){return y.id===c})||Wt.K[0];return{id:s.id,url:s.url,name:s.name,value:n==null?void 0:n[l]}});return u};function Gn(e){"@babel/helpers - typeof";return Gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gn(e)}function Kn(e,t,r){return t=eC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eC(e){var t=tC(e,"string");return Gn(t)=="symbol"?t:String(t)}function tC(e,t){if(Gn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rC=(0,qe.l)("icon-scale-selector",function(e){var t=e.antCls,r=e.componentCls,n=e.lineWidth,o=e.lineType,a=e.colorBorder,u=e.colorTextSecondary,c=e.colorInfoTextHover;return Kn(Kn(Kn(Kn({},r,Kn({},"".concat(t,"-select-selection-item"),{display:"flex",img:{width:"20px",marginRight:"10px"}})),"".concat(r,"__customItem"),{margin:"10px 0"}),"".concat(r,"__add-item"),{paddingLeft:"0 !important",cursor:"pointer",color:u,"&:hover":{color:"".concat(c," !important")}}),"".concat(r,"__btn"),{display:"flex",alignItems:"center",justifyContent:"right",marginTop:"10px",paddingTop:"10px",textAlign:"right",borderTop:"".concat(n,"px ").concat(o," ").concat(a),span:{marginLeft:"20px",color:u,cursor:"pointer"},"span:hover":{color:c}})});function ba(e,t){return iC(e)||aC(e,t)||oC(e,t)||nC()}function nC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oC(e,t){if(e){if(typeof e=="string")return ys(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ys(e,t)}}function ys(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aC(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function iC(e){if(Array.isArray(e))return e}var lC="unknown_icon",uC=function(t){var r,n=(0,Je.F)("formily-icon-scale-selector"),o=rC(n),a=ba(o,2),u=a[0],c=a[1],l=t.domain,s=l===void 0?[]:l,y=t.value,A=t.onChange,E=(0,N.useState)(!1),h=ba(E,2),_=h[0],g=h[1],C=(0,N.useState)(lC),x=ba(C,2),j=x[0],D=x[1],F=(0,N.useMemo)(function(){return y&&y.range?$_(y):[]},[y]),L=(0,N.useState)(F),k=ba(L,2),Y=k[0],Z=k[1];(0,N.useEffect)(function(){if(!y||!y.range){var re=X_(s);Z(re);var p=ps(re,j);A(p)}},[F,y]);var B=function(){var p=Y.map(function(b){return b.id}),f=Wt.K.filter(function(b){return!p.includes(b.id)}),m=f[0]||Wt.K[0];Z(function(b){return b.concat({id:m.id,url:m.url,value:"",name:m.id})})},W=function(p,f){var m=Y.map(function(b,w){return w===f?p:b});Z(m)},z=function(p){var f=Y.filter(function(m,b){return b!==p});Z(f)},R=function(){var p=ps(Y,j);A(p),g(!1)},q=(0,N.useMemo)(function(){return s.length?s.map(function(re){return{label:re,value:re}}):[]},[s]),ee=(0,N.useMemo)(function(){return Y?[{value:"selectedIcon",label:Y.map(function(re){return re.url})}]:[]},[Y]);return u(i().createElement(P.Select,{className:I()("".concat(n),c),open:_,onDropdownVisibleChange:function(p){return g(p)},dropdownRender:function(){return i().createElement(i().Fragment,null,Y==null?void 0:Y.map(function(p,f){var m=Y.map(function(w){if(w.value!==p.value)return w.value}),b=q.filter(function(w){return!m.includes(w.value)});return i().createElement("div",{className:I()("".concat(n,"__customItem"),c),key:p.id},i().createElement(q_,{key:p.id,size:"small",value:p,disabled:Y.length<=1,iconList:Wt.J,fieldList:b,onChange:function(S){return W(S,f)},onDelete:function(){return z(f)}}))}),i().createElement(P.Button,{className:I()("".concat(n,"__add-item"),c),size:"small",type:"link",onClick:B},i().createElement(M.PlusOutlined,null)," \u6DFB\u52A0"),i().createElement("div",{className:I()("".concat(n,"__btn"),c)},i().createElement("span",{onClick:R},"\u5E94\u7528")))},value:(r=ee[0])===null||r===void 0?void 0:r.value},ee.map(function(re){return i().createElement(P.Select.Option,{key:re.value,value:re.value},re.label.map(function(p,f){return i().createElement("img",{src:p,key:f})}))})))},cC=(0,st.connect)(uC),sC=cC;function Qn(e){"@babel/helpers - typeof";return Qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qn(e)}function ds(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function vs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ds(Object(r),!0).forEach(function(n){fC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ds(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fC(e,t,r){return t=mC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mC(e){var t=pC(e,"string");return Qn(t)=="symbol"?t:String(t)}function pC(e,t){if(Qn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yC=function(t){var r=t.initialValues,n=t.implementLayer,o=t.datasetFields,a=t.onChange,u=(0,N.useMemo)(function(){return{datasetFields:o}},[o]),c=(0,N.useMemo)(function(){var E=n.registerForm,h=typeof E=="function"?E(u):E;return h},[n==null?void 0:n.registerForm,u]),l=(0,N.useMemo)(function(){return(0,st.createSchemaField)({components:vs({FormItem:vt.FormItem,Input:vt.Input,Select:vt.Select,FormCollapse:Ei,Offset:Uv,NumberPicker:vt.NumberPicker,Switch:vt.Switch,Slider:og,Radio:vt.Radio,ColorRangeSelector:Cb,ColorPicker:Fb,FieldSelect:wi,SliderRange:qb,ScaleSelector:iS,ResterScaleSelector:b_,IconSelector:B_,IconScaleSelector:sC},c.components)})},[c.components]),s=(0,$r.Z)((0,oe.debounce)(function(E){E.submit().then(function(h){var _=c.fromValues?c.fromValues(h):h;a(_)}).catch(function(h){})})),y=(0,N.useMemo)(function(){var E=c.toValues?c.toValues(r):r,h=(0,tr.createForm)({initialValues:E,effects:function(){(0,tr.onFormValuesChange)(s),(0,tr.onFormMount)(s)}});return h},[r,c]),A=(0,N.useMemo)(function(){return{type:"void",properties:vs({},c.schema)}},[c.schema]);return i().createElement(vt.Form,{form:y,labelCol:8,wrapperCol:16,colon:!1,layout:"horizontal",labelAlign:"left",wrapperAlign:"right",feedbackLayout:"terse"},i().createElement(l,{schema:A}))},dC=yC;function Zn(e){"@babel/helpers - typeof";return Zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zn(e)}function gs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gs(Object(r),!0).forEach(function(n){vC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gs(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vC(e,t,r){return t=gC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gC(e){var t=bC(e,"string");return Zn(t)=="symbol"?t:String(t)}function bC(e,t){if(Zn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qi(e,t){return CC(e)||_C(e,t)||SC(e,t)||hC()}function hC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SC(e,t){if(e){if(typeof e=="string")return bs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bs(e,t)}}function bs(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _C(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function CC(e){if(Array.isArray(e))return e}var OC=function(t){var r=t.className,n=t.config,o=t.onChange,a=(0,ne.F8)("layer-form"),u=Lv(),c=(0,ne.sZ)(),l=c.state,s=(0,N.useState)(n.type),y=qi(s,2),A=y[0],E=y[1],h=(0,N.useState)(n.sourceConfig.datasetId),_=qi(h,2),g=_[0],C=_[1],x=(0,ne.OA)(g),j=(0,N.useMemo)(function(){return x?x.columns:[]},[x]),D=(0,N.useState)((0,oe.pick)(n,["sourceConfig","visConfig"])),F=qi(D,2),L=F[0],k=F[1],Y=(0,ne.ox)(),Z=Y.appService,B=Z.getImplementLayer(A),W=(0,N.useMemo)(function(){var f=l.datasets.map(function(m){return{label:m.metadata.name,value:m.id}});return f},[l.datasets]),z=(0,N.useMemo)(function(){return(0,Ie.getDatasetFields)(j)},[j]),R=(0,N.useMemo)(function(){return z.map(function(f){var m=x==null?void 0:x.getColumnDomain(f.name);return Ji(Ji({},f),{},{domain:m})})},[z,x]),q=function(m,b,w){w.sourceConfig&&b&&(w.sourceConfig.datasetId=b);var S=Ji({type:m},w);o(S)},ee=(0,$r.Z)(function(f){var m=Z.getImplementLayerDefaultVis(f),b={sourceConfig:{datasetId:g},visConfig:m};E(f),k(b)}),re=(0,$r.Z)(function(f){q(A,g,f)}),p=(0,N.useMemo)(function(){var f=(0,tr.createForm)({initialValues:{datasetId:g,visType:A},effects:function(){(0,tr.onFieldValueChange)("datasetId",function(b){var w=b==null?void 0:b.value;C(w)}),(0,tr.onFieldValueChange)("visType",function(b){var w=b.value;ee(w)})}});return f},[]);return i().createElement("div",{className:I()(a,u.layerForm,r)},i().createElement(vt.Form,{form:p,labelCol:8,wrapperCol:16,colon:!1,layout:"horizontal",labelAlign:"left",wrapperAlign:"right",feedbackLayout:"terse"},i().createElement(Dv,{sourceList:W})),B&&i().createElement(dC,{initialValues:L,implementLayer:B,datasetFields:R,onChange:re}))},EC=OC;function hs(e,t){return IC(e)||PC(e,t)||wC(e,t)||AC()}function AC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wC(e,t){if(e){if(typeof e=="string")return Ss(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ss(e,t)}}function Ss(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function PC(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function IC(e){if(Array.isArray(e))return e}var jC=function(t){var r,n=t.className,o=t.onBack,a=t.config,u=(0,ne.F8)("layer-attribute"),c=Ed(),l=(0,ne.sZ)(),s=l.updateState,y=(0,ne.ox)().appService,A=(0,N.useRef)(a.id),E=(0,N.useState)(!1),h=hs(E,2),_=h[0],g=h[1],C=(0,N.useState)(a==null||(r=a.metadata)===null||r===void 0?void 0:r.name),x=hs(C,2),j=x[0],D=x[1],F=function(){y.handleLayerFitBounds(A.current)},L=function(W){s(function(z){var R=z.layers.findIndex(function(q){return q.id===A.current});R!==-1&&(z.layers[R].metadata.name=W,D(W),g(!1))})},k=function(){s(function(W){var z=W.layers.findIndex(function(R){return R.id===A.current});z!==-1&&W.layers.splice(z,1)}),o()},Y=(0,N.useCallback)(function(B){s(function(W){var z=W.layers.findIndex(function(R){return R.id===A.current});z!==-1&&(W.layers[z].type!==B.type&&(A.current=(0,Ie.getUniqueId)(B.type)),B.visConfig.visible||(B.visConfig.visible=!0),W.layers[z].id=A.current,W.layers[z].type=B.type,W.layers[z].sourceConfig=B.sourceConfig,W.layers[z].visConfig=B.visConfig)})},[]),Z=[{key:"editLayerName",label:"\u4FEE\u6539\u540D\u79F0",onClick:function(){g(!0)}},{key:"deleteLayerName",label:"\u5220\u9664\u56FE\u5C42",onClick:k}];return i().createElement("div",{className:I()(u,n)},i().createElement("div",{className:I()("".concat(u,"__header"),c.attributeHeader)},i().createElement("div",{className:I()("".concat(u,"__title"),c.attributeTitle)},i().createElement(M.ArrowLeftOutlined,{className:I()("".concat(u,"__back-icon"),c.attributeBackIcon),onClick:o}),i().createElement(rt,{name:j,onChange:L,onCancel:function(){return g(!1)},isEdit:_})),i().createElement(P.Space,null,i().createElement(P.Tooltip,{title:"\u5B9A\u4F4D\u5230\u56FE\u5C42"},i().createElement(P.Button,{type:"text",size:"middle",shape:"circle",icon:i().createElement(M.FullscreenExitOutlined,{style:{fontSize:"14px"}}),onClick:F})),i().createElement(P.Dropdown,{menu:{items:Z}},i().createElement(M.MoreOutlined,{className:I()("".concat(u,"__dropdown-icon"),c.dropdownIcon)})))),i().createElement(EC,{className:I()("".concat(u,"__layer-form"),c.layerForm),config:a,onChange:Y}))},xC=jC,Xi=Q(53524),_s,Cs;function Os(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var DC=function(){return{dragItem:(0,G.iv)(_s||(_s=Os([`
      &:hover [data-comp='drag-item-icon'] {
        opacity: 1 !important;
      }
    `]))),itemIcon:(0,G.iv)(Cs||(Cs=Os([`
      cursor: move;
      opacity: 0;
    `])))}},TC=DC;function Jn(e){"@babel/helpers - typeof";return Jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jn(e)}function qn(){return qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qn.apply(this,arguments)}function Es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function As(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Es(Object(r),!0).forEach(function(n){$i(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Es(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $i(e,t,r){return t=FC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FC(e){var t=LC(e,"string");return Jn(t)=="symbol"?t:String(t)}function LC(e,t){if(Jn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NC(e,t){return BC(e)||RC(e,t)||ws(e,t)||MC()}function MC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RC(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function BC(e){if(Array.isArray(e))return e}function kC(e){return HC(e)||WC(e)||ws(e)||YC()}function YC(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ws(e,t){if(e){if(typeof e=="string")return el(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return el(e,t)}}function WC(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function HC(e){if(Array.isArray(e))return el(e)}function el(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zC(e){var t=e.children,r=e.itemStyle,n=e.items,o=e.onDrag,a=e.dragIcon,u=(0,ne.F8)("drag-list"),c=TC(),l=(0,N.useCallback)(function(s){if(s.destination){var y=kC(n),A=s.source.index,E=s.destination.index,h=y.splice(A,1),_=NC(h,1),g=_[0];y.splice(E,0,g),o(y)}},[n,o]);return i().createElement(Xi.Z5,{onDragEnd:l},i().createElement(Xi.bK,{droppableId:"dropable",direction:"vertical"},function(s){return i().createElement("div",qn({className:u,ref:s.innerRef},s.droppableProps),n.map(function(y,A){return i().createElement(Xi._l,{key:y.id,draggableId:y.id,index:A},function(E,h){var _;return i().createElement("div",qn({},E.draggableProps,{ref:E.innerRef,className:I()("".concat(u,"__item"),c.dragItem,$i($i({},"".concat(u,"__item"),h.isDragging),c.dragItem,h.isDragging)),style:As(As({},r instanceof Function?r(y):r),(_=E.draggableProps.style)!==null&&_!==void 0?_:{}),key:y.id}),t(y,i().createElement("i",qn({"data-comp":"drag-item-icon",className:I()("".concat(u,"__item-icon"),c.itemIcon)},E.dragHandleProps),a)))})}),s.placeholder)}))}var UC=zC,VC="data:image/png;base64,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",Ps,Is,js,xs,Ds,Ts,Fs;function vr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var GC=function(){var t=(0,ne.Sr)(),r=t.antCls,n=t.colorBgContainer,o=t.colorSplit,a=t.colorPrimary,u=t.borderRadius;return{layerItem:(0,G.iv)(Ps||(Ps=vr([`
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      background: `,`;
      border: 1px solid `,`;
      border-left: 3px solid;
      border-radius: `,`px;
      padding: 0 8px;
    `])),n,o,u),dragIcon:(0,G.iv)(Is||(Is=vr([`
      margin: 3px;
    `]))),itemInfor:(0,G.iv)(js||(js=vr([`
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      padding: 15px 0;
      .li-title-name__title {
        width: 140px !important;
      }
    `]))),itemTitle:(0,G.iv)(xs||(xs=vr([`
      display: flex;
      flex: 1;
      align-items: center;
      cursor: pointer;
    `]))),itemTag:(0,G.iv)(Ds||(Ds=vr([`
      width: 30px;
      height: 30px;
      line-height: 30px;
      margin-right: 10px;
      color: `,`;
      background-image: url(`,`);
      background-repeat: no-repeat;
      border-radius: 2;
      font-size: 30px;
    `])),a,VC),itemActions:(0,G.iv)(Ts||(Ts=vr([`
      float: right;
      height: 100%;
      cursor: pointer;

      `,`-space-item:last-child {
        margin-left: -5px !important;
      }

      &:hover [data-comp='layer-actions-item_hover-show'] {
        opacity: 1;
      }
    `])),r),actionsItem:(0,G.iv)(Fs||(Fs=vr([`
      opacity: 0;
    `])))}},KC=GC;function Xn(e){"@babel/helpers - typeof";return Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xn(e)}function Ls(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ha(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ls(Object(r),!0).forEach(function(n){QC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ls(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QC(e,t,r){return t=ZC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZC(e){var t=JC(e,"string");return Xn(t)=="symbol"?t:String(t)}function JC(e,t){if(Xn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ns(e,t){return eO(e)||$C(e,t)||XC(e,t)||qC()}function qC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XC(e,t){if(e){if(typeof e=="string")return Ms(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ms(e,t)}}function Ms(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $C(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function eO(e){if(Array.isArray(e))return e}var tO={icon:function(){return i().createElement("span",null)},color:"gray"},rO=function(t){var r,n,o,a=t.layer,u=t.dragIcon,c=t.onClickLayer,l=(0,ne.F8)("layer-item"),s=KC(),y=(0,ne.sZ)(),A=y.updateState,E=(0,ne.ox)(),h=E.appService,_=h.getImplementLayer(a.type),g=(r=_==null?void 0:_.metadata)!==null&&r!==void 0?r:tO,C=(0,N.useState)(!1),x=Ns(C,2),j=x[0],D=x[1],F=P.message.useMessage(),L=Ns(F,2),k=L[0],Y=L[1],Z=function(re){A(function(p){var f=p.layers.findIndex(function(m){return m.id===a.id});f!==-1&&(p.layers[f].metadata.name=re,D(!1))})},B=function(){A(function(re){var p=re.layers.findIndex(function(f){return f.id===a.id});re.layers[p].visConfig.visible=!a.visConfig.visible}),k.success(a.visConfig.visible?"\u56FE\u5C42\u5DF2\u9690\u85CF":"\u56FE\u5C42\u5DF2\u663E\u793A",1)},W=function(re){A(function(p){var f=p.layers.findIndex(function(m){return m.id===re.id});f!==-1&&p.layers.splice(f,1)})},z=function(re){var p=ha(ha({},re),{},{metadata:ha(ha({},re.metadata),{},{name:"\u590D\u5236 ".concat(re.metadata.name)}),id:(0,Ie.getUniqueId)()});A(function(f){var m=f.layers.findIndex(function(b){return b.id===re.id});m!==-1?f.layers.splice(m+1,0,p):f.layers.push(p)}),k.success("\u590D\u5236\u6210\u529F")},R=[{key:"edit",label:"\u7F16\u8F91\u56FE\u5C42",onClick:function(){c(a)}},{key:"copy",label:"\u590D\u5236\u56FE\u5C42",onClick:function(){z(a)}},{key:"delete",label:i().createElement(P.Popconfirm,{title:"\u786E\u8BA4\u662F\u5426\u5220\u9664\uFF1F",placement:"bottom",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onConfirm:function(){W(a)}},"\u5220\u9664\u56FE\u5C42")}],q=function(re){h.handleLayerFitBounds(re.id)};return i().createElement("div",{className:I()(l,s.layerItem),style:{borderLeftColor:g==null?void 0:g.color}},i().createElement("div",{className:I()("".concat(l,"__drag-icon"),s.dragIcon)},u),i().createElement("div",{className:I()("".concat(l,"__infor"),s.itemInfor),onClick:function(re){return re.stopPropagation()}},i().createElement("div",{className:I()("".concat(l,"__title"),s.itemTitle),onClick:function(){j||c(a)}},i().createElement("div",{className:I()("".concat(l,"__tag"),s.itemTag)},typeof(g==null?void 0:g.icon)=="function"?i().createElement(me(),{component:g.icon}):null),i().createElement(rt,{name:a.metadata.name,onChange:Z,onClick:function(){j||c(a)},onCancel:function(){return D(!1)},isEdit:j})),Y,i().createElement(P.Space,{className:I()("".concat(l,"__actions"),s.itemActions)},i().createElement(P.Tooltip,{title:"\u70B9\u51FB\u4FEE\u6539\u56FE\u5C42\u540D\u79F0"},i().createElement(M.FormOutlined,{"data-comp":"layer-actions-item_hover-show",className:I()("".concat(l,"__actions-item"),s.actionsItem),onClick:function(){D(!0)}})),i().createElement(P.Tooltip,{title:"\u70B9\u51FB\u5B9A\u4F4D\u5230\u56FE\u5C42"},i().createElement(M.FullscreenExitOutlined,{"data-comp":"layer-actions-item_hover-show",className:I()("".concat(l,"__actions-item"),s.actionsItem),onClick:function(){return q(a)}})),i().createElement(P.Tooltip,{title:"\u70B9\u51FB".concat(a!=null&&(n=a.visConfig)!==null&&n!==void 0&&n.visible?"\u9690\u85CF":"\u663E\u793A","\u56FE\u5C42")},a!=null&&(o=a.visConfig)!==null&&o!==void 0&&o.visible?i().createElement(M.EyeOutlined,{onClick:B}):i().createElement(M.EyeInvisibleOutlined,{onClick:B})),i().createElement(P.Dropdown,{menu:{items:R}},i().createElement(M.MoreOutlined,null)))))},nO=rO;function $n(e){"@babel/helpers - typeof";return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(e)}function Rs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Sa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rs(Object(r),!0).forEach(function(n){oO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rs(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oO(e,t,r){return t=aO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aO(e){var t=iO(e,"string");return $n(t)=="symbol"?t:String(t)}function iO(e,t){if($n(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($n(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lO=function(t){var r=t.onClickLayer,n=(0,ne.F8)("layer-list"),o=(0,ne.sZ)(),a=o.state,u=o.updateState,c=(0,N.useMemo)(function(){return a.layers.slice().reverse()},[a.layers]),l=function(y){var A=y.length-1,E=y.map(function(h,_){return Sa(Sa({},h),{},{visConfig:Sa(Sa({},h.visConfig),{},{zIndex:A-_})})}).reverse();u(function(h){h.layers=E})};return(0,oe.isEmpty)(c)?i().createElement(P.Empty,{className:"".concat(n,"__empty"),image:P.Empty.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65E0\u56FE\u5C42\uFF0C\u8BF7\u5148\u65B0\u589E\u56FE\u5C42"}):i().createElement("div",{className:I()(n,t.className)},i().createElement(UC,{items:c,onDrag:l,dragIcon:i().createElement(M.HolderOutlined,null)},function(s,y){return i().createElement(nO,{dragIcon:y,layer:s,onClickLayer:r})}))},uO=lO,Bs,ks,Ys,Ws,Hs,zs,Us,Vs;function nr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var cO=function(){var t=(0,ne.Sr)(),r=t.colorSplit,n=t.antCls;return{layerPanel:(0,G.iv)(Bs||(Bs=nr([`
      position: relative;
      height: 100%;
    `]))),panelContent:(0,G.iv)(ks||(ks=nr([`
      height: 100%;
    `]))),panelContentHidden:(0,G.iv)(Ys||(Ys=nr([`
      display: none;
    `]))),panelHeader:(0,G.iv)(Ws||(Ws=nr([`
      margin: 0 20px;
      padding: 15px 0 15px;
      font-weight: 500;
      font-size: 16px;
      border-bottom: 1px solid `,`;
    `])),r),addLayer:(0,G.iv)(Hs||(Hs=nr([`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
      font-size: 14px;
    `]))),addLayerPopover:(0,G.iv)(zs||(zs=nr([`
      `,`-popover-inner-content {
        `,`-form-item {
          margin-bottom: 20px !important;
        }

        `,`-form-item:last-child {
          margin-bottom: 8px !important;
        }
      }
    `])),n,n,n),layerList:(0,G.iv)(Us||(Us=nr([`
      height: calc(100% - 57px - 52px);
      padding: 0 20px 15px;
      overflow-y: auto;
    `]))),layerAttribute:(0,G.iv)(Vs||(Vs=nr([`
      height: 100%;
    `])))}},sO=cO;function eo(e){"@babel/helpers - typeof";return eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eo(e)}function Gs(e,t,r){return t=fO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fO(e){var t=mO(e,"string");return eo(t)=="symbol"?t:String(t)}function mO(e,t){if(eo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(eo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tl(e,t){return vO(e)||dO(e,t)||yO(e,t)||pO()}function pO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yO(e,t){if(e){if(typeof e=="string")return Ks(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ks(e,t)}}function Ks(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dO(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function vO(e){if(Array.isArray(e))return e}var gO=function(t){var r=(0,ne.F8)("layers-panel"),n=sO(),o=(0,N.useState)(!1),a=tl(o,2),u=a[0],c=a[1],l=(0,N.useState)(),s=tl(l,2),y=s[0],A=s[1],E=(0,ne.sZ)(),h=E.state,_=E.updateState,g=(0,N.useState)(!1),C=tl(g,2),x=C[0],j=C[1],D=function(Y){A(Y),c(!0)},F=function(){c(!1)},L=function(Y,Z){var B=Cd(Y,Z);_(function(W){W.layers.push(B)}),j(!1),D(B)};return i().createElement("div",{className:I()(r,t.className,n.layerPanel)},i().createElement("div",{className:I()("".concat(r,"__content"),n.panelContent,Gs(Gs({},"".concat(r,"__content_hidden"),u),n.panelContentHidden,u))},i().createElement("div",{className:I()("".concat(r,"__header"),n.panelHeader)},"\u56FE\u5C42"),i().createElement("div",{className:I()("".concat(r,"__add-layer"),n.addLayer)},"\u56FE\u5C42(",h.layers.length,")",i().createElement(P.Popover,{placement:"bottomLeft",trigger:"click",open:x,onOpenChange:function(Y){return j(Y)},overlayClassName:I()("".concat(r,"l__add-layer-popver"),n.addLayerPopover),content:i().createElement(_d,{onSubmit:L,onClose:function(){j(!1)}})},i().createElement(P.Button,{type:"primary",icon:i().createElement(M.PlusOutlined,null),onClick:function(){j(!0)},id:"LITourAddVisualLayer"},"\u65B0\u589E\u56FE\u5C42"))),i().createElement(uO,{className:I()("".concat(r,"__layer-list"),n.layerList),onClickLayer:D})),u&&y&&i().createElement(xC,{className:I()("".concat(r,"__layer-attribute"),n.layerAttribute),onBack:F,config:y}))},bO=gO,hO=function(){return i().createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor"},i().createElement("path",{d:"M494.72 100.032a38.528 38.528 0 0 1 28.992-2.24l5.568 2.304 375.872 189.44c13.248 6.72 22.848 19.904 22.848 34.56 0 12.48-7.04 23.936-17.408 31.168l-5.44 3.2-119.04 59.52 119.04 59.52a42.24 42.24 0 0 1 20.608 22.4l1.664 5.952L928 512c0 12.48-7.04 24-17.408 31.232l-5.44 3.2-119.04 59.52 119.04 59.52a42.24 42.24 0 0 1 20.608 22.4l1.664 5.952 0.576 6.144c0 12.48-7.04 24-17.408 31.168l-5.44 3.264-383.68 191.744a18.496 18.496 0 0 1-6.976 1.856H512a18.944 18.944 0 0 1-9.344-1.856l-7.808-3.776-375.936-187.968c-13.248-6.656-22.848-19.84-22.848-34.432 0-12.544 7.04-24 17.408-31.232l5.44-3.2 118.912-59.584-118.912-59.52a42.24 42.24 0 0 1-20.608-22.4l-1.664-5.888L96 512c0-12.48 7.04-24 17.408-31.232l5.44-3.2 118.912-59.52-118.912-59.52a42.24 42.24 0 0 1-20.608-22.4l-1.664-5.952-0.576-6.144c0-12.48 7.04-24 17.408-31.168l5.44-3.264L494.72 100.032z m205.184 548.992L529.28 734.4a38.592 38.592 0 0 1-28.864 2.24l-5.568-2.24-170.752-85.376-101.824 50.88L512 844.8l289.728-144.896-101.76-50.88z m0-187.968L529.28 546.432a38.592 38.592 0 0 1-28.864 2.304l-5.568-2.304-170.752-85.376-101.824 50.88L512 656.832l289.728-144.896-101.76-50.88zM512 177.536L222.08 324.032 512 468.864l289.792-144.96L512 177.6z"}))},SO=(0,Se.BP)({version:"v0.1",component:bO,metadata:{name:"LayersPanel",displayName:"\u56FE\u5C42\u914D\u7F6E",description:"\u56FE\u5C42\u9762\u677F"},container:{type:"SideNav",slot:"menuPanel"},menu:{name:"\u56FE\u5C42",key:"layers",icon:i().createElement(me(),{component:hO})}}),Dt=Q(84533),_O=function(){return i().createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},i().createElement("path",{d:"M889.18 180.37l-224-66.81a24 24 0 0 0-12.85-0.26L396.32 179l-245.51-53.23A32 32 0 0 0 112 157v666.2a32 32 0 0 0 25 31.22l255.27 57.33a24 24 0 0 0 11.17-0.15l253.89-64.24L870.68 912A32 32 0 0 0 912 881.4V211a32 32 0 0 0-22.82-30.63zM840 827.41l-180.93-54.77L433 829.84V516a36 36 0 0 0-72 0v314.94l-177-39.73V206.68L397.68 253 622 195.41V512a36 36 0 0 0 72 0V197.3l146 43.5z"}))},CO=[{text:"\u6807\u51C6",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-nqiT6Vu948AAAAAAAAAAAAAARQnAQ",type:"normal"},{text:"\u6708\u5149\u94F6",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*J_wYQL_PaUEAAAAAAAAAAAAAARQnAQ",type:"light"},{text:"\u5E7B\u5F71\u9ED1",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*U7M9QI1yat4AAAAAAAAAAAAAARQnAQ",type:"dark"},{text:"\u8349\u8272\u9752",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*T-oBT4hB5ucAAAAAAAAAAAAAARQnAQ",type:"fresh"},{text:"\u96C5\u58EB\u7070",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*OREXQ4vgQRIAAAAAAAAAAAAAARQnAQ",type:"grey"},{text:"\u6D82\u9E26",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*4UApTKmeiy4AAAAAAAAAAAAAARQnAQ",type:"graffiti"},{text:"\u9A6C\u5361\u9F99",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*0GrCQLtDjNcAAAAAAAAAAAAAARQnAQ",type:"macaron"},{text:"\u6781\u591C\u84DD",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*uWxqSZQlPkkAAAAAAAAAAAAAARQnAQ",type:"darkblue"},{text:"\u9171\u7C7D",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*OFPrTbg3an0AAAAAAAAAAAAAARQnAQ",type:"wine"}],OO=[{text:"\u8857\u9053",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*AnfJTbIBJOkAAAAAAAAAAAAAARQnAQ",type:"normal"},{text:"\u6D45\u8272",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*gnuiQIok9qIAAAAAAAAAAAAAARQnAQ",type:"light"},{text:"\u6DF1\u8272",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*NwG-TbOlBH0AAAAAAAAAAAAAARQnAQ",type:"dark"}],rl=Q(46488),Qs,Zs,Js;function nl(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var EO=function(){var t=(0,ne.Sr)(),r=t.colorBgContainer,n=t.borderRadius,o=t.colorBgElevated,a=t.colorText;return{mapCenter:(0,G.iv)(Qs||(Qs=nl([`
      width: 14px;
      height: 14px;
      position: absolute;
      top: calc(50% - 9px);
      left: calc(50% - 9px);
      background: #1a90ff;
      border-radius: 50%;
      border: solid 2px #fff;
      pointer-events: none;
    `]))),control:(0,G.iv)(Zs||(Zs=nl([`
      .larkmap-location-search {
        background-color: `,`;
        border-radius: `,`px;
      }

      .larkmap-select-selection-search {
        color: `,`;

        .larkmap-select-selection-search-input {
          color: `,`;
        }
      }

      .larkmap-select-clear {
        display: none !important;
      }
    `])),r,n,a,a),locationSearch:(0,G.iv)(Js||(Js=nl([`
      width: 200px;
      background-color: `,`;

      .larkmap-select-item-empty,
      .larkmap-location-search__option-name {
        color: `,`;
      }

      .larkmap-select-item-option-active {
        background: `,`;
      }
    `])),r,a,o)}},AO=EO,wO=["currentMapCenter","larkMap","onSubmit","zoomValue","setZoomValue","mapCenterModalOpen"];function _a(){return _a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_a.apply(this,arguments)}function Ca(e,t){return xO(e)||jO(e,t)||IO(e,t)||PO()}function PO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IO(e,t){if(e){if(typeof e=="string")return qs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qs(e,t)}}function qs(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jO(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function xO(e){if(Array.isArray(e))return e}function DO(e,t){if(e==null)return{};var r=TO(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function TO(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var Xs=function(){return{AMAP_KEY:"d76a81e912e36130d498216d1085db31",PRIVATE_KEY:atob("ZWJkZmNjNjkzOTI1Nzg2NGJjOTEzMmY3NDE4MTEwNDM")}},$s=function(t){var r=t.currentMapCenter,n=t.larkMap,o=t.onSubmit,a=t.zoomValue,u=t.setZoomValue,c=t.mapCenterModalOpen,l=DO(t,wO),s=(0,ne.F8)("map-setting"),y=AO(),A=(0,N.useState)(null),E=Ca(A,2),h=E[0],_=E[1],g=(0,N.useState)(null),C=Ca(g,2),x=C[0],j=C[1],D=P.message.useMessage(),F=Ca(D,2),L=F[0],k=F[1],Y=function(q){_(q),q.setZoomAndCenter(a,r)};(0,N.useEffect)(function(){if(c&&r){var R=Ca(r,2),q=R[0],ee=R[1];j({lng:q,lat:ee}),h==null||h.setZoomAndCenter(a,r)}},[c]);var Z=function(){h&&j(h.getCenter())},B=function(){h&&j(h.getCenter())},W=function(){if(x){var q=x.lng,ee=x.lat;o([q,ee])}h&&u(h.getZoom())},z=function(q,ee){if(ee&&h){var re=ee.longitude,p=ee.latitude;h.setZoomAndCenter(16,[re,p]),j({lng:re,lat:p}),L.success("\u5730\u56FE\u79FB\u52A8\u81F3 ".concat(q))}};return i().createElement(P.Modal,_a({},l,{onOk:W}),i().createElement(rl.LarkMap,_a({},n,{onSceneLoaded:Y,onDragEnd:Z,onZoomEnd:B}),i().createElement("div",{className:I()("".concat(s,"__map-center"),y.mapCenter)}),i().createElement(rl.CustomControl,{className:I()("".concat(s,"__control"),y.control)},k,i().createElement(rl.LocationSearch,{searchParams:{key:Xs().AMAP_KEY,privateKey:Xs().PRIVATE_KEY},showDistrict:!0,showAddress:!0,autoFocus:!0,bordered:!1,value:null,notFoundContent:i().createElement(P.Empty,{image:P.Empty.PRESENTED_IMAGE_SIMPLE,description:!1}),onChange:z,popupClassName:I()("".concat(s,"__location-search"),y.locationSearch)}))))};$s.defaultProps={width:900,title:"\u7ED8\u5236\u6570\u636E",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",maskClosable:!1,destroyOnClose:!1,larkMap:{mapType:"Gaode",mapOptions:{style:"dark",jogEnable:!1},style:{height:400}}};var ef,tf,rf,nf,of,af,lf,uf,cf,sf,ff,mf,pf,yf,df,vf,gf,bf;function St(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var FO=function(){var t=(0,ne.Sr)(),r=t.antCls,n=t.colorSplit,o=t.colorPrimaryText,a=t.colorTextSecondary,u=t.borderRadius;return{mapSetting:(0,G.iv)(ef||(ef=St([`
      display: flex;
      justify-content: space-between;
      padding-top: 10px !important;

      `,`-form-item {
        margin-bottom: 10px !important;
      }

      ,
      `,`-input-number {
        width: 100px;
      }
    `])),r,r),settingDesc:(0,G.iv)(tf||(tf=St([`
      margin-bottom: 0;
      color: `,`;
      font-size: 12px;
    `])),a),settingBtn:(0,G.iv)(rf||(rf=St([`
      width: 100%;
      margin-bottom: 10px;
    `]))),mapContent:(0,G.iv)(nf||(nf=St([`
      display: flex;
      align-items: center;
    `]))),selectMapCenter:(0,G.iv)(of||(of=St([`
      display: flex;
      justify-content: flex-end;
      margin-bottom: 20px;
    `]))),selectMapCenterText:(0,G.iv)(af||(af=St([`
      color: `,`;
    `])),o),mapType:(0,G.iv)(lf||(lf=St([`
      display: flex;
      align-items: center;
      justify-content: space-between;
    `]))),viewMode:(0,G.iv)(uf||(uf=St([`
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    `]))),viewAngle:(0,G.iv)(cf||(cf=St([`
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    `]))),viewAngleItem:(0,G.iv)(sf||(sf=St([`
      display: flex;
      align-items: center;
    `]))),viewAngleItemInput:(0,G.iv)(ff||(ff=St([`
      display: flex;
      justify-content: space-between;
      width: 100px;
      margin-left: 10px;
    `]))),settingStyle:(0,G.iv)(mf||(mf=St([`
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      max-height: 250px;
      margin-top: 10px;
      overflow-y: auto;
    `]))),settingStyleContent:(0,G.iv)(pf||(pf=St([`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0 12px 12px 0;
      cursor: pointer;

      &:hover {
        box-shadow: 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08),
          0 9px 28px 8px rgba(0, 0, 0, 0.05);
      }
    `]))),settingStyleItem:(0,G.iv)(yf||(yf=St([`
      border: solid 1px `,`;
      border-radius: `,`px;

      &:nth-child(3n) {
        margin-right: 0;
      }
    `])),n,u),settingStyleItemActive:(0,G.iv)(df||(df=St([`
      box-sizing: content-box;
      border: solid 1px `,`;
      border-radius: 4px;
    `])),o),settingStyleItemText:(0,G.iv)(vf||(vf=St([`
      display: flex;
      flex-direction: column;
      align-items: center;
    `]))),settingStyleItemTextActive:(0,G.iv)(gf||(gf=St([`
      display: flex;
      flex-direction: column;
      align-items: center;
      color: `,`;
    `])),o),settingStyleItemImg:(0,G.iv)(bf||(bf=St([`
      border-radius: `,`px;
    `])),u)}},LO=FO;function to(e){"@babel/helpers - typeof";return to=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},to(e)}function hf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Sf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hf(Object(r),!0).forEach(function(n){NO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NO(e,t,r){return t=MO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MO(e){var t=RO(e,"string");return to(t)=="symbol"?t:String(t)}function RO(e,t){if(to(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(to(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ol(){return ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ol.apply(this,arguments)}function Ht(e,t){return WO(e)||YO(e,t)||kO(e,t)||BO()}function BO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kO(e,t){if(e){if(typeof e=="string")return _f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _f(e,t)}}function _f(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function YO(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function WO(e){if(Array.isArray(e))return e}var HO=function(t){var r=(0,N.useState)(!1),n=Ht(r,2),o=n[0],a=n[1],u=function(){a(!0)},c=function(){a(!1)};return i().createElement(i().Fragment,null,i().createElement(P.Tooltip,{placement:"right",title:"\u5730\u56FE\u521D\u59CB\u5316\u914D\u7F6E"},i().createElement(P.Button,{onClick:u,type:"text",size:"middle",shape:"circle",icon:i().createElement(me(),{component:_O,style:{fontSize:"18px"}})})),i().createElement(zO,ol({},t,{open:o,onClose:c})))};function zO(e){var t=e.AMAP_KEY,r=t===void 0?Dt.C_:t,n=e.MAPBOX_TOKEN,o=n===void 0?Dt.c3:n,a=e.open,u=e.onClose,c=(0,ne.F8)("map-setting"),l=LO(),s=(0,ne.sZ)(),y=(0,ne.ox)().appService,A=(0,N.useState)(!1),E=Ht(A,2),h=E[0],_=E[1],g=(0,N.useState)(s.state.map.config.zoom),C=Ht(g,2),x=C[0],j=C[1],D=(0,N.useState)(s.state.map.config.center),F=Ht(D,2),L=F[0],k=F[1],Y=(0,N.useState)(s.state.map.config.style),Z=Ht(Y,2),B=Z[0],W=Z[1],z=(0,N.useState)(s.state.map.basemap),R=Ht(z,2),q=R[0],ee=R[1],re=(0,N.useState)(s.state.map.config.viewMode||"2D"),p=Ht(re,2),f=p[0],m=p[1],b=(0,N.useState)(s.state.map.config.pitch||50),w=Ht(b,2),S=w[0],V=w[1],ce=(0,N.useState)(s.state.map.config.rotation||20),ye=Ht(ce,2),Te=ye[0],Fe=ye[1],ke=P.message.useMessage(),Ap=Ht(ke,2),Tj=Ap[0],Fj=Ap[1],Lj=function(){var ft=y.getMapViewState();if(ft){var Fl=ft.zoom,Fa=ft.center;j(Fl),k([Fa.lng,Fa.lat]),Tj.success("\u62FE\u53D6\u6210\u529F")}},Nj=function(){s.updateState(function(ft){var Fl=q&&["Mapbox","Map"].includes(q)?{preserveDrawingBuffer:!0}:{WebGLParams:{preserveDrawingBuffer:!0}};ft.map.basemap=q;var Fa=q!=="Map"?q==="Mapbox"?o:r:void 0,Vj=f==="2D"?0:q==="Gaode"?Te:360-Te;ft.map.config=Sf(Sf({},ft.map.config),{},{token:Fa,zoom:x,center:L,style:q==="Map"?void 0:B,pitch:f==="2D"?0:S,rotation:Vj,viewMode:q==="Gaode"?f:void 0,dragRotate:!(q==="Mapbox"&&f==="2D"),pitchWithRotate:!(q==="Mapbox"&&f==="2D")},Fl)}),u()},Mj=function(){u()},Rj=function(ft){ft&&(_(!1),k(ft))},Bj=function(){_(!1)},kj=function(ft){ft&&j(ft)},wp=function(ft){W(ft.type)},Yj=function(ft){ee(ft.target.value),W("dark")},Wj=function(ft){m(ft.target.value)},Hj=function(ft){V(ft||0)},zj=function(ft){Fe(ft||0)},Uj=[{key:"fromMap",label:"\u62FE\u53D6\u5F53\u524D\u5730\u56FE",onClick:Lj},{key:"fromModal",label:"\u901A\u8FC7\u5F39\u6846\u62FE\u53D6",onClick:function(){_(!0)}}];return i().createElement(i().Fragment,null,i().createElement(P.Modal,{okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",title:"\u5730\u56FE\u8BBE\u7F6E",open:a,onOk:Nj,onCancel:Mj},i().createElement(P.ConfigProvider,{componentSize:"small"},i().createElement("p",{className:I()("".concat(c,"__desc"),l.settingDesc)},"\u8BBE\u7F6E\u5730\u56FE\u521D\u59CB\u5316\u7684\u4E2D\u5FC3\u70B9\u3001\u7F29\u653E\u7B49\u7EA7\u3001\u5E95\u56FE\u6837\u5F0F"),i().createElement(P.Form,{layout:"vertical",className:I()("".concat(c),l.mapSetting)},i().createElement(P.Form.Item,{label:"\u5730\u56FE\u4E2D\u5FC3\u70B9"},i().createElement("div",{className:I()("".concat(c,"__map-content"),l.mapContent)},i().createElement("div",{className:"".concat(c,"__map-content-text")},L==null?void 0:L.toString()))),i().createElement(P.Form.Item,{label:"\u7F29\u653E\u7B49\u7EA7"},i().createElement(P.InputNumber,{value:x,onChange:kj,precision:0,min:1,max:17}))),i().createElement("div",{className:I()("".concat(c,"__select-map-center"),l.selectMapCenter)},i().createElement(P.Dropdown,{placement:"bottomRight",menu:{items:Uj}},i().createElement(P.Button,{type:"link"},i().createElement(P.Space,{className:I()("".concat(c,"__select-map-center-text"),l.selectMapCenterText)},"\u62FE\u53D6",i().createElement(M.DownOutlined,null))))),i().createElement("div",{className:I()("".concat(c,"__view-mode"),l.viewMode)},i().createElement("div",null,"\u89C6\u56FE\u6A21\u5F0F"),i().createElement(P.Radio.Group,{onChange:Wj,value:f},i().createElement(P.Radio.Button,{value:"2D"},"2D"),i().createElement(P.Radio.Button,{value:"3D"},"3D"))),f==="3D"?i().createElement("div",{className:I()("".concat(c,"__view-angle"),l.viewAngle)},i().createElement("div",{className:I()("".concat(c,"__view-angle-item"),l.viewAngleItem)},i().createElement("div",null,"\u5730\u56FE\u503E\u89D2"),i().createElement(P.InputNumber,{className:I()("".concat(c,"__view-angle-item-input"),l.viewAngleItemInput),min:0,max:q==="Gaode"?90:60,width:110,value:S,onChange:Hj})),i().createElement("div",{className:I()("".concat(c,"__view-angle-item"),l.viewAngleItem)},i().createElement("div",null,"\u5730\u56FE\u65CB\u8F6C"),i().createElement(P.InputNumber,{className:I()("".concat(c,"__view-angle-item-input"),l.viewAngleItemInput),min:0,max:360,value:Te,onChange:zj}))):null,i().createElement("div",{className:I()("".concat(c,"__map-type"),l.mapType)},i().createElement("div",null,"\u5E95\u56FE\u6837\u5F0F"),i().createElement(P.Radio.Group,{onChange:Yj,value:q},i().createElement(P.Radio.Button,{style:{width:70,textAlign:"center"},value:"Gaode"},"\u9AD8\u5FB7"),i().createElement(P.Radio.Button,{style:{width:100,textAlign:"center"},value:"Mapbox"},"MapBox"),i().createElement(P.Radio.Button,{style:{width:100,textAlign:"center"},value:"Map"},"\u65E0\u5E95\u56FE"))),i().createElement("div",{className:I()("".concat(c,"__style"),l.settingStyle)},q==="Gaode"&&CO.map(function(yt){return i().createElement("div",{key:yt.text,className:I()("".concat(c,"__style-content"),l.settingStyleContent),onClick:function(){return wp(yt)}},i().createElement("div",{className:B===yt.type?I()("".concat(c,"__style-item-active"),l.settingStyleItemActive):I()("".concat(c,"__style-item"),l.settingStyleItem)},i().createElement("img",{src:yt.img,width:120,height:90,className:I()("".concat(c,"__style-item-img"),l.settingStyleItemImg)})),i().createElement("div",{className:B===yt.type?I()("".concat(c,"__style-item-text-active"),l.settingStyleItemTextActive):I()("".concat(c,"__style-item-text"),l.settingStyleItemText)},yt.text))}),q==="Mapbox"&&OO.map(function(yt){return i().createElement("div",{key:yt.text,className:I()("".concat(c,"__style-content"),l.settingStyleContent),onClick:function(){return wp(yt)}},i().createElement("div",{className:B===yt.type?I()("".concat(c,"__style-item-active"),l.settingStyleItemActive):I()("".concat(c,"__style-item"),l.settingStyleItem)},i().createElement("img",{src:yt.img,width:120,height:90,className:I()("".concat(c,"__style-item-img"),l.settingStyleItemImg)})),i().createElement("div",{className:B===yt.type?I()("".concat(c,"__style-item-text-active"),l.settingStyleItemTextActive):I()("".concat(c,"__style-item-text"),l.settingStyleItemText)},yt.text))})))),Fj,i().createElement($s,{title:"\u9009\u62E9\u4E2D\u5FC3\u70B9",open:h,onCancel:Bj,onSubmit:Rj,currentMapCenter:L,zoomValue:x,setZoomValue:j,mapCenterModalOpen:h}))}var UO=HO,VO=(0,Se.BP)({version:"v0.1",component:UO,metadata:{name:"MapSetting",displayName:"\u5730\u56FE\u521D\u59CB\u5316\u914D\u7F6E",description:"\u4FEE\u6539\u5730\u56FE\u521D\u59CB\u5316\u914D\u7F6E\uFF0Ccenter\xA0\u548C\xA0zoom"},container:{type:"SideNav",slot:"bottom"}}),Cf=function(t){var r=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-{}]*[a-z\\d{}])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))|localhost(\\:\\d+)?(\\/[-a-z\\d%_.~+{}]*)*(\\?[;&a-z\\d%_.~+=-{}]*)?(\\#[-a-z\\d_]*)?$","i"),n=/(\{[xX]\}){1}/,o=/(\{[yY]\}){1}/,a=/(\{[zZ]\}){1}/;return!!r.test(t)&&!!n.test(t)&&!!o.test(t)&&!!a.test(t)};function Oa(e){"@babel/helpers - typeof";return Oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oa(e)}function al(){"use strict";al=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(p,f,m){p[f]=m.value},a=typeof Symbol=="function"?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(p,f,m){return Object.defineProperty(p,f,{value:m,enumerable:!0,configurable:!0,writable:!0}),p[f]}try{s({},"")}catch(p){s=function(m,b,w){return m[b]=w}}function y(p,f,m,b){var w=f&&f.prototype instanceof x?f:x,S=Object.create(w.prototype),V=new ee(b||[]);return o(S,"_invoke",{value:W(p,m,V)}),S}function A(p,f,m){try{return{type:"normal",arg:p.call(f,m)}}catch(b){return{type:"throw",arg:b}}}t.wrap=y;var E="suspendedStart",h="suspendedYield",_="executing",g="completed",C={};function x(){}function j(){}function D(){}var F={};s(F,u,function(){return this});var L=Object.getPrototypeOf,k=L&&L(L(re([])));k&&k!==r&&n.call(k,u)&&(F=k);var Y=D.prototype=x.prototype=Object.create(F);function Z(p){["next","throw","return"].forEach(function(f){s(p,f,function(m){return this._invoke(f,m)})})}function B(p,f){function m(w,S,V,ce){var ye=A(p[w],p,S);if(ye.type!=="throw"){var Te=ye.arg,Fe=Te.value;return Fe&&Oa(Fe)=="object"&&n.call(Fe,"__await")?f.resolve(Fe.__await).then(function(ke){m("next",ke,V,ce)},function(ke){m("throw",ke,V,ce)}):f.resolve(Fe).then(function(ke){Te.value=ke,V(Te)},function(ke){return m("throw",ke,V,ce)})}ce(ye.arg)}var b;o(this,"_invoke",{value:function(S,V){function ce(){return new f(function(ye,Te){m(S,V,ye,Te)})}return b=b?b.then(ce,ce):ce()}})}function W(p,f,m){var b=E;return function(w,S){if(b===_)throw new Error("Generator is already running");if(b===g){if(w==="throw")throw S;return{value:e,done:!0}}for(m.method=w,m.arg=S;;){var V=m.delegate;if(V){var ce=z(V,m);if(ce){if(ce===C)continue;return ce}}if(m.method==="next")m.sent=m._sent=m.arg;else if(m.method==="throw"){if(b===E)throw b=g,m.arg;m.dispatchException(m.arg)}else m.method==="return"&&m.abrupt("return",m.arg);b=_;var ye=A(p,f,m);if(ye.type==="normal"){if(b=m.done?g:h,ye.arg===C)continue;return{value:ye.arg,done:m.done}}ye.type==="throw"&&(b=g,m.method="throw",m.arg=ye.arg)}}}function z(p,f){var m=f.method,b=p.iterator[m];if(b===e)return f.delegate=null,m==="throw"&&p.iterator.return&&(f.method="return",f.arg=e,z(p,f),f.method==="throw")||m!=="return"&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+m+"' method")),C;var w=A(b,p.iterator,f.arg);if(w.type==="throw")return f.method="throw",f.arg=w.arg,f.delegate=null,C;var S=w.arg;return S?S.done?(f[p.resultName]=S.value,f.next=p.nextLoc,f.method!=="return"&&(f.method="next",f.arg=e),f.delegate=null,C):S:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,C)}function R(p){var f={tryLoc:p[0]};1 in p&&(f.catchLoc=p[1]),2 in p&&(f.finallyLoc=p[2],f.afterLoc=p[3]),this.tryEntries.push(f)}function q(p){var f=p.completion||{};f.type="normal",delete f.arg,p.completion=f}function ee(p){this.tryEntries=[{tryLoc:"root"}],p.forEach(R,this),this.reset(!0)}function re(p){if(p||p===""){var f=p[u];if(f)return f.call(p);if(typeof p.next=="function")return p;if(!isNaN(p.length)){var m=-1,b=function w(){for(;++m<p.length;)if(n.call(p,m))return w.value=p[m],w.done=!1,w;return w.value=e,w.done=!0,w};return b.next=b}}throw new TypeError(Oa(p)+" is not iterable")}return j.prototype=D,o(Y,"constructor",{value:D,configurable:!0}),o(D,"constructor",{value:j,configurable:!0}),j.displayName=s(D,l,"GeneratorFunction"),t.isGeneratorFunction=function(p){var f=typeof p=="function"&&p.constructor;return!!f&&(f===j||(f.displayName||f.name)==="GeneratorFunction")},t.mark=function(p){return Object.setPrototypeOf?Object.setPrototypeOf(p,D):(p.__proto__=D,s(p,l,"GeneratorFunction")),p.prototype=Object.create(Y),p},t.awrap=function(p){return{__await:p}},Z(B.prototype),s(B.prototype,c,function(){return this}),t.AsyncIterator=B,t.async=function(p,f,m,b,w){w===void 0&&(w=Promise);var S=new B(y(p,f,m,b),w);return t.isGeneratorFunction(f)?S:S.next().then(function(V){return V.done?V.value:S.next()})},Z(Y),s(Y,l,"Generator"),s(Y,u,function(){return this}),s(Y,"toString",function(){return"[object Generator]"}),t.keys=function(p){var f=Object(p),m=[];for(var b in f)m.push(b);return m.reverse(),function w(){for(;m.length;){var S=m.pop();if(S in f)return w.value=S,w.done=!1,w}return w.done=!0,w}},t.values=re,ee.prototype={constructor:ee,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!f)for(var m in this)m.charAt(0)==="t"&&n.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=e)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var m=this;function b(Te,Fe){return V.type="throw",V.arg=f,m.next=Te,Fe&&(m.method="next",m.arg=e),!!Fe}for(var w=this.tryEntries.length-1;w>=0;--w){var S=this.tryEntries[w],V=S.completion;if(S.tryLoc==="root")return b("end");if(S.tryLoc<=this.prev){var ce=n.call(S,"catchLoc"),ye=n.call(S,"finallyLoc");if(ce&&ye){if(this.prev<S.catchLoc)return b(S.catchLoc,!0);if(this.prev<S.finallyLoc)return b(S.finallyLoc)}else if(ce){if(this.prev<S.catchLoc)return b(S.catchLoc,!0)}else{if(!ye)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return b(S.finallyLoc)}}}},abrupt:function(f,m){for(var b=this.tryEntries.length-1;b>=0;--b){var w=this.tryEntries[b];if(w.tryLoc<=this.prev&&n.call(w,"finallyLoc")&&this.prev<w.finallyLoc){var S=w;break}}S&&(f==="break"||f==="continue")&&S.tryLoc<=m&&m<=S.finallyLoc&&(S=null);var V=S?S.completion:{};return V.type=f,V.arg=m,S?(this.method="next",this.next=S.finallyLoc,C):this.complete(V)},complete:function(f,m){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&m&&(this.next=m),C},finish:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.finallyLoc===f)return this.complete(b.completion,b.afterLoc),q(b),C}},catch:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.tryLoc===f){var w=b.completion;if(w.type==="throw"){var S=w.arg;q(b)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(f,m,b){return this.delegate={iterator:re(f),resultName:m,nextLoc:b},this.method==="next"&&(this.arg=e),C}},t}function Of(e,t,r,n,o,a,u){try{var c=e[a](u),l=c.value}catch(s){r(s);return}c.done?t(l):Promise.resolve(l).then(n,o)}function GO(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function u(l){Of(a,n,o,u,c,"next",l)}function c(l){Of(a,n,o,u,c,"throw",l)}u(void 0)})}}function il(e,t){return JO(e)||ZO(e,t)||QO(e,t)||KO()}function KO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QO(e,t){if(e){if(typeof e=="string")return Ef(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ef(e,t)}}function Ef(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ZO(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function JO(e){if(Array.isArray(e))return e}var qO=function(t){var r=t.onSubmit,n=t.onCancel,o=(0,N.useState)(),a=il(o,2),u=a[0],c=a[1],l=(0,N.useState)(),s=il(l,2),y=s[0],A=s[1],E=P.Form.useForm(),h=il(E,1),_=h[0],g=u&&u.name&&u.url&&u.metadataUrl&&y,C=function(F){return fetch(F).then(function(L){return L.json()}).then(function(L){var k=L;return typeof k.json=="string"&&(k.json=JSON.parse(k.json)),JSON.stringify(k,null,2)})},x=function(F,L){c(L)},j=function(){var D=GO(al().mark(function F(){var L,k,Y,Z,B,W;return al().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(u){R.next=2;break}return R.abrupt("return");case 2:return R.prev=2,R.next=5,_.validateFields();case 5:R.next=10;break;case 7:return R.prev=7,R.t0=R.catch(2),R.abrupt("return");case 10:L=u.name,k=u.url,Y=u.metadataUrl,Z=(0,Ie.getUniqueId)(),B={id:Z,type:"vector-tile",metadata:{name:L,description:"MVT Tile"},properties:{type:"mvt-tile",url:k,metadataUrl:Y}},W={id:(0,Ie.getUniqueId)(),type:"MVTLayer",metadata:{name:L},sourceConfig:{datasetId:Z,parser:{type:"mvt"}},visConfig:{visible:!0}},r([B],[W]);case 15:case"end":return R.stop()}},F,null,[[2,7]])}));return function(){return D.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement("div",{style:{display:"flex"}},i().createElement(P.Form,{layout:"vertical",requiredMark:!1,form:_,onValuesChange:x,style:{minWidth:500}},i().createElement(P.Form.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u670D\u52A1\u540D\u79F0"}]},i().createElement(P.Input,{placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u540D\u79F0"})),i().createElement(P.Form.Item,{name:"url",label:"\u670D\u52A1 URL",validateFirst:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u670D\u52A1\u5730\u5740"},{validator:function(F,L){return Cf(L)?Promise.resolve():Promise.reject(new Error("\u8BF7\u8F93\u5165\u6709\u6548\u7684\u670D\u52A1\u5730\u5740"))}}]},i().createElement(P.Input,{placeholder:"https://example.com/{z}/{x}/{y}.pbf"})),i().createElement(P.Form.Item,{name:"metadataUrl",label:"\u670D\u52A1 Meatadata URL",validateFirst:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u670D\u52A1\u5143\u6570\u636E\u5730\u5740"},{type:"url",message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u670D\u52A1\u5143\u6570\u636E\u5730\u5740"},{validator:function(F,L){return C(L).then(function(k){return A(k),Promise.resolve()}).catch(function(k){return Promise.reject(new Error("\u83B7\u53D6\u5143\u6570\u636E\u5931\u8D25\uFF0C\u8BF7\u8F93\u5165\u6709\u6548\u7684\u670D\u52A1\u5143\u6570\u636E\u5730\u5740"))})}}]},i().createElement(P.Input,{placeholder:"https://example.com/metadata.json"}))),i().createElement("div",{style:{marginLeft:20,marginTop:-70,height:350,width:"100%",backgroundColor:"#1e1e1e"}},y&&i().createElement(Ot.ZP,{language:"json",options:{readOnly:!0,minimap:{enabled:!1},lineNumbers:"off",overviewRulerBorder:!1},theme:"vs-dark",value:y}))),i().createElement("div",{className:"ant-modal-footer"},i().createElement(P.Space,null,i().createElement(P.Button,{onClick:n},"\u8FD4\u56DE"),i().createElement(P.Button,{disabled:!g,type:"primary",onClick:j},"\u6DFB\u52A0"))))},XO=qO,Af,wf;function Pf(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var $O=function(){return{tilesZoomInputNumber:(0,G.iv)(Af||(Af=Pf([`
      display: flex;
      flex-direction: column;
      margin-top: 5px !important;
    `]))),tilesZoomInputNumberMin:(0,G.iv)(wf||(wf=Pf([`
      margin-bottom: 10px !important;
    `])))}},eE=$O;function Ea(e,t){return oE(e)||nE(e,t)||rE(e,t)||tE()}function tE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rE(e,t){if(e){if(typeof e=="string")return If(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return If(e,t)}}function If(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nE(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function oE(e){if(Array.isArray(e))return e}var aE=function(t){var r=(0,ne.F8)("tiles-zoom"),n=eE(),o=(0,N.useState)(0),a=Ea(o,2),u=a[0],c=a[1],l=(0,N.useState)(18),s=Ea(l,2),y=s[0],A=s[1],E=(0,N.useState)(!0),h=Ea(E,2),_=h[0],g=h[1],C=(0,N.useState)(!0),x=Ea(C,2),j=x[0],D=x[1];return(0,N.useEffect)(function(){t.onChange({minZoom:_?u:void 0,maxZoom:j?y:void 0})},[u,y]),i().createElement("div",{className:I()("".concat(r,"__input-number"),n.tilesZoomInputNumber)},i().createElement("div",{className:I()("".concat(r,"__input-number-min"),n.tilesZoomInputNumberMin)},i().createElement(P.Checkbox,{checked:_,onChange:function(L){g(L.target.checked)}},"\u6700\u5C0F\u7F29\u653E\u7EA7\u522B"),i().createElement(P.InputNumber,{min:0,value:u,max:y,size:"small",onChange:function(L){c(Number(L))}})),i().createElement("div",{className:I()("".concat(r,"__input-number-max"),n.tilesZoomInputNumberMin)},i().createElement(P.Checkbox,{checked:j,onChange:function(L){D(L.target.checked)}},"\u6700\u5927\u7F29\u653E\u7EA7\u522B"),i().createElement(P.InputNumber,{min:u,value:y,size:"small",onChange:function(L){A(Number(L))}})))},iE=aE;function Aa(e){"@babel/helpers - typeof";return Aa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aa(e)}function ll(){"use strict";ll=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(p,f,m){p[f]=m.value},a=typeof Symbol=="function"?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(p,f,m){return Object.defineProperty(p,f,{value:m,enumerable:!0,configurable:!0,writable:!0}),p[f]}try{s({},"")}catch(p){s=function(m,b,w){return m[b]=w}}function y(p,f,m,b){var w=f&&f.prototype instanceof x?f:x,S=Object.create(w.prototype),V=new ee(b||[]);return o(S,"_invoke",{value:W(p,m,V)}),S}function A(p,f,m){try{return{type:"normal",arg:p.call(f,m)}}catch(b){return{type:"throw",arg:b}}}t.wrap=y;var E="suspendedStart",h="suspendedYield",_="executing",g="completed",C={};function x(){}function j(){}function D(){}var F={};s(F,u,function(){return this});var L=Object.getPrototypeOf,k=L&&L(L(re([])));k&&k!==r&&n.call(k,u)&&(F=k);var Y=D.prototype=x.prototype=Object.create(F);function Z(p){["next","throw","return"].forEach(function(f){s(p,f,function(m){return this._invoke(f,m)})})}function B(p,f){function m(w,S,V,ce){var ye=A(p[w],p,S);if(ye.type!=="throw"){var Te=ye.arg,Fe=Te.value;return Fe&&Aa(Fe)=="object"&&n.call(Fe,"__await")?f.resolve(Fe.__await).then(function(ke){m("next",ke,V,ce)},function(ke){m("throw",ke,V,ce)}):f.resolve(Fe).then(function(ke){Te.value=ke,V(Te)},function(ke){return m("throw",ke,V,ce)})}ce(ye.arg)}var b;o(this,"_invoke",{value:function(S,V){function ce(){return new f(function(ye,Te){m(S,V,ye,Te)})}return b=b?b.then(ce,ce):ce()}})}function W(p,f,m){var b=E;return function(w,S){if(b===_)throw new Error("Generator is already running");if(b===g){if(w==="throw")throw S;return{value:e,done:!0}}for(m.method=w,m.arg=S;;){var V=m.delegate;if(V){var ce=z(V,m);if(ce){if(ce===C)continue;return ce}}if(m.method==="next")m.sent=m._sent=m.arg;else if(m.method==="throw"){if(b===E)throw b=g,m.arg;m.dispatchException(m.arg)}else m.method==="return"&&m.abrupt("return",m.arg);b=_;var ye=A(p,f,m);if(ye.type==="normal"){if(b=m.done?g:h,ye.arg===C)continue;return{value:ye.arg,done:m.done}}ye.type==="throw"&&(b=g,m.method="throw",m.arg=ye.arg)}}}function z(p,f){var m=f.method,b=p.iterator[m];if(b===e)return f.delegate=null,m==="throw"&&p.iterator.return&&(f.method="return",f.arg=e,z(p,f),f.method==="throw")||m!=="return"&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+m+"' method")),C;var w=A(b,p.iterator,f.arg);if(w.type==="throw")return f.method="throw",f.arg=w.arg,f.delegate=null,C;var S=w.arg;return S?S.done?(f[p.resultName]=S.value,f.next=p.nextLoc,f.method!=="return"&&(f.method="next",f.arg=e),f.delegate=null,C):S:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,C)}function R(p){var f={tryLoc:p[0]};1 in p&&(f.catchLoc=p[1]),2 in p&&(f.finallyLoc=p[2],f.afterLoc=p[3]),this.tryEntries.push(f)}function q(p){var f=p.completion||{};f.type="normal",delete f.arg,p.completion=f}function ee(p){this.tryEntries=[{tryLoc:"root"}],p.forEach(R,this),this.reset(!0)}function re(p){if(p||p===""){var f=p[u];if(f)return f.call(p);if(typeof p.next=="function")return p;if(!isNaN(p.length)){var m=-1,b=function w(){for(;++m<p.length;)if(n.call(p,m))return w.value=p[m],w.done=!1,w;return w.value=e,w.done=!0,w};return b.next=b}}throw new TypeError(Aa(p)+" is not iterable")}return j.prototype=D,o(Y,"constructor",{value:D,configurable:!0}),o(D,"constructor",{value:j,configurable:!0}),j.displayName=s(D,l,"GeneratorFunction"),t.isGeneratorFunction=function(p){var f=typeof p=="function"&&p.constructor;return!!f&&(f===j||(f.displayName||f.name)==="GeneratorFunction")},t.mark=function(p){return Object.setPrototypeOf?Object.setPrototypeOf(p,D):(p.__proto__=D,s(p,l,"GeneratorFunction")),p.prototype=Object.create(Y),p},t.awrap=function(p){return{__await:p}},Z(B.prototype),s(B.prototype,c,function(){return this}),t.AsyncIterator=B,t.async=function(p,f,m,b,w){w===void 0&&(w=Promise);var S=new B(y(p,f,m,b),w);return t.isGeneratorFunction(f)?S:S.next().then(function(V){return V.done?V.value:S.next()})},Z(Y),s(Y,l,"Generator"),s(Y,u,function(){return this}),s(Y,"toString",function(){return"[object Generator]"}),t.keys=function(p){var f=Object(p),m=[];for(var b in f)m.push(b);return m.reverse(),function w(){for(;m.length;){var S=m.pop();if(S in f)return w.value=S,w.done=!1,w}return w.done=!0,w}},t.values=re,ee.prototype={constructor:ee,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!f)for(var m in this)m.charAt(0)==="t"&&n.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=e)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var m=this;function b(Te,Fe){return V.type="throw",V.arg=f,m.next=Te,Fe&&(m.method="next",m.arg=e),!!Fe}for(var w=this.tryEntries.length-1;w>=0;--w){var S=this.tryEntries[w],V=S.completion;if(S.tryLoc==="root")return b("end");if(S.tryLoc<=this.prev){var ce=n.call(S,"catchLoc"),ye=n.call(S,"finallyLoc");if(ce&&ye){if(this.prev<S.catchLoc)return b(S.catchLoc,!0);if(this.prev<S.finallyLoc)return b(S.finallyLoc)}else if(ce){if(this.prev<S.catchLoc)return b(S.catchLoc,!0)}else{if(!ye)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return b(S.finallyLoc)}}}},abrupt:function(f,m){for(var b=this.tryEntries.length-1;b>=0;--b){var w=this.tryEntries[b];if(w.tryLoc<=this.prev&&n.call(w,"finallyLoc")&&this.prev<w.finallyLoc){var S=w;break}}S&&(f==="break"||f==="continue")&&S.tryLoc<=m&&m<=S.finallyLoc&&(S=null);var V=S?S.completion:{};return V.type=f,V.arg=m,S?(this.method="next",this.next=S.finallyLoc,C):this.complete(V)},complete:function(f,m){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&m&&(this.next=m),C},finish:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.finallyLoc===f)return this.complete(b.completion,b.afterLoc),q(b),C}},catch:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.tryLoc===f){var w=b.completion;if(w.type==="throw"){var S=w.arg;q(b)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(f,m,b){return this.delegate={iterator:re(f),resultName:m,nextLoc:b},this.method==="next"&&(this.arg=e),C}},t}function jf(e,t,r,n,o,a,u){try{var c=e[a](u),l=c.value}catch(s){r(s);return}c.done?t(l):Promise.resolve(l).then(n,o)}function lE(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function u(l){jf(a,n,o,u,c,"next",l)}function c(l){jf(a,n,o,u,c,"throw",l)}u(void 0)})}}function xf(e,t){return fE(e)||sE(e,t)||cE(e,t)||uE()}function uE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cE(e,t){if(e){if(typeof e=="string")return Df(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Df(e,t)}}function Df(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sE(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function fE(e){if(Array.isArray(e))return e}var mE=function(t){var r=t.onSubmit,n=t.onCancel,o=(0,N.useState)(),a=xf(o,2),u=a[0],c=a[1],l=P.Form.useForm(),s=xf(l,1),y=s[0],A=u&&u.name&&u.url,E=function(g,C){c(C)},h=function(){var _=lE(ll().mark(function g(){var C,x,j,D,F,L;return ll().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(u){Y.next=2;break}return Y.abrupt("return");case 2:return Y.prev=2,Y.next=5,y.validateFields();case 5:Y.next=10;break;case 7:return Y.prev=7,Y.t0=Y.catch(2),Y.abrupt("return");case 10:C=u.name,x=u.url,j=u.zoom,D=(0,Ie.getUniqueId)(),F={id:D,type:"raster-tile",metadata:{name:C,description:"XYZ Tile"},properties:{type:"xyz-tile",url:x,minZoom:j.minZoom,maxZoom:j.maxZoom}},L={id:(0,Ie.getUniqueId)(),type:"TileLayer",metadata:{name:C},sourceConfig:{datasetId:D,parser:{type:"rasterTile"}},visConfig:{visible:!0}},r([F],[L]);case 15:case"end":return Y.stop()}},g,null,[[2,7]])}));return function(){return _.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement(P.Form,{layout:"vertical",requiredMark:!1,form:y,onValuesChange:E,style:{maxWidth:600}},i().createElement(P.Form.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u670D\u52A1\u540D\u79F0"}]},i().createElement(P.Input,{placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u540D\u79F0"})),i().createElement(P.Form.Item,{name:"url",label:"\u670D\u52A1 URL",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u670D\u52A1\u5730\u5740"},{validator:function(g,C){return C?C&&Cf(C)?Promise.resolve():Promise.reject(new Error("\u8BF7\u8F93\u5165\u6709\u6548\u7684\u670D\u52A1\u5730\u5740")):Promise.reject()}}]},i().createElement(P.Input,{placeholder:"https://example.com/{z}/{x}/{y}.png"})),i().createElement(P.Form.Item,{name:"zoom",label:"\u5C42\u7EA7",tooltip:"\u6307\u5B9A\u670D\u52A1\u7684\u6709\u6548\u5C42\u7EA7"},i().createElement(iE,{onChange:function(g){return y.setFieldValue("zoom",g)}}))),i().createElement("div",{className:"ant-modal-footer"},i().createElement(P.Space,null,i().createElement(P.Button,{onClick:n},"\u8FD4\u56DE"),i().createElement(P.Button,{disabled:!A,type:"primary",onClick:h},"\u6DFB\u52A0"))))},pE=mE,Tf,Ff;function Lf(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var yE=function(){return{tilesetsType:(0,G.iv)(Tf||(Tf=Lf([`
      margin-bottom: 24px;
    `]))),tilesetsTypeLabel:(0,G.iv)(Ff||(Ff=Lf([`
      margin: 0;
      padding-bottom: 8px;
    `])))}},dE=yE;function vE(e,t){return SE(e)||hE(e,t)||bE(e,t)||gE()}function gE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bE(e,t){if(e){if(typeof e=="string")return Nf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nf(e,t)}}function Nf(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hE(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function SE(e){if(Array.isArray(e))return e}function _E(e){var t=e.onSubmit,r=e.onCancel,n=(0,ne.F8)("tilesets"),o=dE(),a=(0,N.useState)("XYZ Tile"),u=vE(a,2),c=u[0],l=u[1];return i().createElement(i().Fragment,null,i().createElement("div",{className:n},i().createElement("div",{className:I()("".concat(n,"__type"),o.tilesetsType)},i().createElement("p",{className:I()("".concat(n,"__type-label"),o.tilesetsTypeLabel)},"\u74E6\u7247\u7C7B\u578B"),i().createElement(P.Radio.Group,{value:c,onChange:function(y){return l(y.target.value)}},i().createElement(P.Radio.Button,{value:"XYZ Tile"},"XYZ Tile"),i().createElement(P.Radio.Button,{value:"MVT Tile"},"MVT Tile"))),c==="XYZ Tile"&&i().createElement(pE,{onSubmit:t,onCancel:r}),c==="MVT Tile"&&i().createElement(XO,{onSubmit:t,onCancel:r})))}var CE=(0,Se.BP)({version:"v0.1",component:_E,metadata:{name:"TilesetsDataset",displayName:"\u74E6\u7247\u6570\u636E\u96C6",description:"\u74E6\u7247\u6570\u636E\u96C6"},container:{type:"Datasets",slot:"addDataset"}}),OE=Q(26444),Mf,Rf,Bf,kf,Yf;function ro(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var EE=function(){var t=(0,ne.Sr)(),r=t.boxShadow,n=t.colorPrimary;return{uploadListContent:(0,G.iv)(Mf||(Mf=ro([`
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
      overflow-y: auto;
    `]))),uploadListContentItem:(0,G.iv)(Rf||(Rf=ro([`
      position: relative;
      display: flex;
      align-items: center;
      margin: 0 5px 10px 0;
      padding: 5px 10px;
      border: 1px solid rgba(0, 0, 0, 0.08);
      border-radius: 2px;
      cursor: pointer;

      &:hover {
        box-shadow: `,`;
      }
    `])),r),uploadListContentItemTitle:(0,G.iv)(Bf||(Bf=ro([`
      width: 250px;
      height: 30px;
      overflow: hidden;
      line-height: 30px;
      text-overflow: ellipsis;
    `]))),uploadListContentItemSelected:(0,G.iv)(kf||(kf=ro([`
      position: absolute;
      top: 50%;
      right: 10px;
      width: 20px;
      height: 20px;
      margin-top: -10px;
      text-align: center;
      background: `,`;
      border-radius: 50%;

      svg {
        color: #fff;
      }
    `])),n),contentItemSelecteds:(0,G.iv)(Yf||(Yf=ro([`
      border: 1px solid `,`;
    `])),n)}},AE=EE;function no(e){"@babel/helpers - typeof";return no=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},no(e)}function Wf(e,t,r){return t=wE(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wE(e){var t=PE(e,"string");return no(t)=="symbol"?t:String(t)}function PE(e,t){if(no(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(no(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IE(e){return DE(e)||xE(e)||Hf(e)||jE()}function jE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xE(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DE(e){if(Array.isArray(e))return ul(e)}function TE(e,t){return NE(e)||LE(e,t)||Hf(e,t)||FE()}function FE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hf(e,t){if(e){if(typeof e=="string")return ul(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ul(e,t)}}function ul(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function LE(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function NE(e){if(Array.isArray(e))return e}var ME=P.theme.useToken,RE=function(t){var r=t||{},n=r.dataset,o=r.onChange,a=(0,ne.F8)("upload-list"),u=AE(),c=(0,N.useState)([]),l=TE(c,2),s=l[0],y=l[1],A=ME(),E=A.token,h=function(g){var C=s.findIndex(function(j){return j===g});if(C===-1)y([].concat(IE(s),[g]));else{var x=s.filter(function(j){return j!==g});y(x)}};return(0,N.useEffect)(function(){o&&o(s)},[s,o]),(0,N.useEffect)(function(){y(n.map(function(_){return _.id}))},[n]),i().createElement("div",{className:I()("".concat(a,"__content"),u.uploadListContent)},n.map(function(_){var g=_.metadata.name;return i().createElement("div",{key:_.id,className:I()("".concat(a,"__content-item"),u.uploadListContentItem,Wf(Wf({},u.contentItemSelecteds,s.includes(_.id)),"".concat(a,"__content-item_selected"),s.includes(_.id))),onClick:function(){return h(_.id)}},s.includes(_.id)&&i().createElement("div",{className:I()("".concat(a,"__content-item-selected"),u.uploadListContentItemSelected)},i().createElement(M.CheckOutlined,null)),i().createElement("div",{className:I()("".concat(a,"__content-item__title"),u.uploadListContentItemTitle)},i().createElement(OE.Z,{title:g,zIndex:E.zIndexPopupBase+70},g)))}))},BE=RE,oo=Q(67196),cl=function(t){return new Promise(function(r,n){var o=new FileReader;o.readAsArrayBuffer(t),o.onload=function(a){var u,c=(u=a.target)===null||u===void 0?void 0:u.result;r(c)},o.onerror=function(a){n(a)}})},sl=function(t){return new Promise(function(r,n){var o=new FileReader;o.readAsText(t),o.onload=function(a){var u,c=(u=a.target)===null||u===void 0?void 0:u.result;r(c)},o.onerror=function(a){n(a)}})},kE=Q(80522);function wa(e){"@babel/helpers - typeof";return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wa(e)}function fl(){"use strict";fl=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(p,f,m){p[f]=m.value},a=typeof Symbol=="function"?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(p,f,m){return Object.defineProperty(p,f,{value:m,enumerable:!0,configurable:!0,writable:!0}),p[f]}try{s({},"")}catch(p){s=function(m,b,w){return m[b]=w}}function y(p,f,m,b){var w=f&&f.prototype instanceof x?f:x,S=Object.create(w.prototype),V=new ee(b||[]);return o(S,"_invoke",{value:W(p,m,V)}),S}function A(p,f,m){try{return{type:"normal",arg:p.call(f,m)}}catch(b){return{type:"throw",arg:b}}}t.wrap=y;var E="suspendedStart",h="suspendedYield",_="executing",g="completed",C={};function x(){}function j(){}function D(){}var F={};s(F,u,function(){return this});var L=Object.getPrototypeOf,k=L&&L(L(re([])));k&&k!==r&&n.call(k,u)&&(F=k);var Y=D.prototype=x.prototype=Object.create(F);function Z(p){["next","throw","return"].forEach(function(f){s(p,f,function(m){return this._invoke(f,m)})})}function B(p,f){function m(w,S,V,ce){var ye=A(p[w],p,S);if(ye.type!=="throw"){var Te=ye.arg,Fe=Te.value;return Fe&&wa(Fe)=="object"&&n.call(Fe,"__await")?f.resolve(Fe.__await).then(function(ke){m("next",ke,V,ce)},function(ke){m("throw",ke,V,ce)}):f.resolve(Fe).then(function(ke){Te.value=ke,V(Te)},function(ke){return m("throw",ke,V,ce)})}ce(ye.arg)}var b;o(this,"_invoke",{value:function(S,V){function ce(){return new f(function(ye,Te){m(S,V,ye,Te)})}return b=b?b.then(ce,ce):ce()}})}function W(p,f,m){var b=E;return function(w,S){if(b===_)throw new Error("Generator is already running");if(b===g){if(w==="throw")throw S;return{value:e,done:!0}}for(m.method=w,m.arg=S;;){var V=m.delegate;if(V){var ce=z(V,m);if(ce){if(ce===C)continue;return ce}}if(m.method==="next")m.sent=m._sent=m.arg;else if(m.method==="throw"){if(b===E)throw b=g,m.arg;m.dispatchException(m.arg)}else m.method==="return"&&m.abrupt("return",m.arg);b=_;var ye=A(p,f,m);if(ye.type==="normal"){if(b=m.done?g:h,ye.arg===C)continue;return{value:ye.arg,done:m.done}}ye.type==="throw"&&(b=g,m.method="throw",m.arg=ye.arg)}}}function z(p,f){var m=f.method,b=p.iterator[m];if(b===e)return f.delegate=null,m==="throw"&&p.iterator.return&&(f.method="return",f.arg=e,z(p,f),f.method==="throw")||m!=="return"&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+m+"' method")),C;var w=A(b,p.iterator,f.arg);if(w.type==="throw")return f.method="throw",f.arg=w.arg,f.delegate=null,C;var S=w.arg;return S?S.done?(f[p.resultName]=S.value,f.next=p.nextLoc,f.method!=="return"&&(f.method="next",f.arg=e),f.delegate=null,C):S:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,C)}function R(p){var f={tryLoc:p[0]};1 in p&&(f.catchLoc=p[1]),2 in p&&(f.finallyLoc=p[2],f.afterLoc=p[3]),this.tryEntries.push(f)}function q(p){var f=p.completion||{};f.type="normal",delete f.arg,p.completion=f}function ee(p){this.tryEntries=[{tryLoc:"root"}],p.forEach(R,this),this.reset(!0)}function re(p){if(p||p===""){var f=p[u];if(f)return f.call(p);if(typeof p.next=="function")return p;if(!isNaN(p.length)){var m=-1,b=function w(){for(;++m<p.length;)if(n.call(p,m))return w.value=p[m],w.done=!1,w;return w.value=e,w.done=!0,w};return b.next=b}}throw new TypeError(wa(p)+" is not iterable")}return j.prototype=D,o(Y,"constructor",{value:D,configurable:!0}),o(D,"constructor",{value:j,configurable:!0}),j.displayName=s(D,l,"GeneratorFunction"),t.isGeneratorFunction=function(p){var f=typeof p=="function"&&p.constructor;return!!f&&(f===j||(f.displayName||f.name)==="GeneratorFunction")},t.mark=function(p){return Object.setPrototypeOf?Object.setPrototypeOf(p,D):(p.__proto__=D,s(p,l,"GeneratorFunction")),p.prototype=Object.create(Y),p},t.awrap=function(p){return{__await:p}},Z(B.prototype),s(B.prototype,c,function(){return this}),t.AsyncIterator=B,t.async=function(p,f,m,b,w){w===void 0&&(w=Promise);var S=new B(y(p,f,m,b),w);return t.isGeneratorFunction(f)?S:S.next().then(function(V){return V.done?V.value:S.next()})},Z(Y),s(Y,l,"Generator"),s(Y,u,function(){return this}),s(Y,"toString",function(){return"[object Generator]"}),t.keys=function(p){var f=Object(p),m=[];for(var b in f)m.push(b);return m.reverse(),function w(){for(;m.length;){var S=m.pop();if(S in f)return w.value=S,w.done=!1,w}return w.done=!0,w}},t.values=re,ee.prototype={constructor:ee,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!f)for(var m in this)m.charAt(0)==="t"&&n.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=e)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var m=this;function b(Te,Fe){return V.type="throw",V.arg=f,m.next=Te,Fe&&(m.method="next",m.arg=e),!!Fe}for(var w=this.tryEntries.length-1;w>=0;--w){var S=this.tryEntries[w],V=S.completion;if(S.tryLoc==="root")return b("end");if(S.tryLoc<=this.prev){var ce=n.call(S,"catchLoc"),ye=n.call(S,"finallyLoc");if(ce&&ye){if(this.prev<S.catchLoc)return b(S.catchLoc,!0);if(this.prev<S.finallyLoc)return b(S.finallyLoc)}else if(ce){if(this.prev<S.catchLoc)return b(S.catchLoc,!0)}else{if(!ye)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return b(S.finallyLoc)}}}},abrupt:function(f,m){for(var b=this.tryEntries.length-1;b>=0;--b){var w=this.tryEntries[b];if(w.tryLoc<=this.prev&&n.call(w,"finallyLoc")&&this.prev<w.finallyLoc){var S=w;break}}S&&(f==="break"||f==="continue")&&S.tryLoc<=m&&m<=S.finallyLoc&&(S=null);var V=S?S.completion:{};return V.type=f,V.arg=m,S?(this.method="next",this.next=S.finallyLoc,C):this.complete(V)},complete:function(f,m){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&m&&(this.next=m),C},finish:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.finallyLoc===f)return this.complete(b.completion,b.afterLoc),q(b),C}},catch:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.tryLoc===f){var w=b.completion;if(w.type==="throw"){var S=w.arg;q(b)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(f,m,b){return this.delegate={iterator:re(f),resultName:m,nextLoc:b},this.method==="next"&&(this.arg=e),C}},t}function YE(e,t){return UE(e)||zE(e,t)||HE(e,t)||WE()}function WE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HE(e,t){if(e){if(typeof e=="string")return zf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zf(e,t)}}function zf(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zE(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function UE(e){if(Array.isArray(e))return e}function Uf(e,t,r,n,o,a,u){try{var c=e[a](u),l=c.value}catch(s){r(s);return}c.done?t(l):Promise.resolve(l).then(n,o)}function VE(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function u(l){Uf(a,n,o,u,c,"next",l)}function c(l){Uf(a,n,o,u,c,"throw",l)}u(void 0)})}}var GE=function(){var e=VE(fl().mark(function t(r,n,o,a){var u,c,l,s,y,A,E,h;return fl().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,Promise.all([cl(r),cl(n),sl(o),a&&sl(a)]);case 3:return c=g.sent,l=YE(c,4),s=l[0],y=l[1],A=l[2],E=l[3],u=A,g.next=12,kE.ij(s,y,{encoding:E||"UTF-8"});case 12:return h=g.sent,g.abrupt("return",{geoJson:h,wkt:u});case 16:return g.prev=16,g.t0=g.catch(0),g.abrupt("return",Promise.reject(g.t0));case 19:case"end":return g.stop()}},t,null,[[0,16]])}));return function(r,n,o,a){return e.apply(this,arguments)}}();function Pa(e){"@babel/helpers - typeof";return Pa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pa(e)}function gr(){"use strict";gr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(p,f,m){p[f]=m.value},a=typeof Symbol=="function"?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(p,f,m){return Object.defineProperty(p,f,{value:m,enumerable:!0,configurable:!0,writable:!0}),p[f]}try{s({},"")}catch(p){s=function(m,b,w){return m[b]=w}}function y(p,f,m,b){var w=f&&f.prototype instanceof x?f:x,S=Object.create(w.prototype),V=new ee(b||[]);return o(S,"_invoke",{value:W(p,m,V)}),S}function A(p,f,m){try{return{type:"normal",arg:p.call(f,m)}}catch(b){return{type:"throw",arg:b}}}t.wrap=y;var E="suspendedStart",h="suspendedYield",_="executing",g="completed",C={};function x(){}function j(){}function D(){}var F={};s(F,u,function(){return this});var L=Object.getPrototypeOf,k=L&&L(L(re([])));k&&k!==r&&n.call(k,u)&&(F=k);var Y=D.prototype=x.prototype=Object.create(F);function Z(p){["next","throw","return"].forEach(function(f){s(p,f,function(m){return this._invoke(f,m)})})}function B(p,f){function m(w,S,V,ce){var ye=A(p[w],p,S);if(ye.type!=="throw"){var Te=ye.arg,Fe=Te.value;return Fe&&Pa(Fe)=="object"&&n.call(Fe,"__await")?f.resolve(Fe.__await).then(function(ke){m("next",ke,V,ce)},function(ke){m("throw",ke,V,ce)}):f.resolve(Fe).then(function(ke){Te.value=ke,V(Te)},function(ke){return m("throw",ke,V,ce)})}ce(ye.arg)}var b;o(this,"_invoke",{value:function(S,V){function ce(){return new f(function(ye,Te){m(S,V,ye,Te)})}return b=b?b.then(ce,ce):ce()}})}function W(p,f,m){var b=E;return function(w,S){if(b===_)throw new Error("Generator is already running");if(b===g){if(w==="throw")throw S;return{value:e,done:!0}}for(m.method=w,m.arg=S;;){var V=m.delegate;if(V){var ce=z(V,m);if(ce){if(ce===C)continue;return ce}}if(m.method==="next")m.sent=m._sent=m.arg;else if(m.method==="throw"){if(b===E)throw b=g,m.arg;m.dispatchException(m.arg)}else m.method==="return"&&m.abrupt("return",m.arg);b=_;var ye=A(p,f,m);if(ye.type==="normal"){if(b=m.done?g:h,ye.arg===C)continue;return{value:ye.arg,done:m.done}}ye.type==="throw"&&(b=g,m.method="throw",m.arg=ye.arg)}}}function z(p,f){var m=f.method,b=p.iterator[m];if(b===e)return f.delegate=null,m==="throw"&&p.iterator.return&&(f.method="return",f.arg=e,z(p,f),f.method==="throw")||m!=="return"&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+m+"' method")),C;var w=A(b,p.iterator,f.arg);if(w.type==="throw")return f.method="throw",f.arg=w.arg,f.delegate=null,C;var S=w.arg;return S?S.done?(f[p.resultName]=S.value,f.next=p.nextLoc,f.method!=="return"&&(f.method="next",f.arg=e),f.delegate=null,C):S:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,C)}function R(p){var f={tryLoc:p[0]};1 in p&&(f.catchLoc=p[1]),2 in p&&(f.finallyLoc=p[2],f.afterLoc=p[3]),this.tryEntries.push(f)}function q(p){var f=p.completion||{};f.type="normal",delete f.arg,p.completion=f}function ee(p){this.tryEntries=[{tryLoc:"root"}],p.forEach(R,this),this.reset(!0)}function re(p){if(p||p===""){var f=p[u];if(f)return f.call(p);if(typeof p.next=="function")return p;if(!isNaN(p.length)){var m=-1,b=function w(){for(;++m<p.length;)if(n.call(p,m))return w.value=p[m],w.done=!1,w;return w.value=e,w.done=!0,w};return b.next=b}}throw new TypeError(Pa(p)+" is not iterable")}return j.prototype=D,o(Y,"constructor",{value:D,configurable:!0}),o(D,"constructor",{value:j,configurable:!0}),j.displayName=s(D,l,"GeneratorFunction"),t.isGeneratorFunction=function(p){var f=typeof p=="function"&&p.constructor;return!!f&&(f===j||(f.displayName||f.name)==="GeneratorFunction")},t.mark=function(p){return Object.setPrototypeOf?Object.setPrototypeOf(p,D):(p.__proto__=D,s(p,l,"GeneratorFunction")),p.prototype=Object.create(Y),p},t.awrap=function(p){return{__await:p}},Z(B.prototype),s(B.prototype,c,function(){return this}),t.AsyncIterator=B,t.async=function(p,f,m,b,w){w===void 0&&(w=Promise);var S=new B(y(p,f,m,b),w);return t.isGeneratorFunction(f)?S:S.next().then(function(V){return V.done?V.value:S.next()})},Z(Y),s(Y,l,"Generator"),s(Y,u,function(){return this}),s(Y,"toString",function(){return"[object Generator]"}),t.keys=function(p){var f=Object(p),m=[];for(var b in f)m.push(b);return m.reverse(),function w(){for(;m.length;){var S=m.pop();if(S in f)return w.value=S,w.done=!1,w}return w.done=!0,w}},t.values=re,ee.prototype={constructor:ee,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!f)for(var m in this)m.charAt(0)==="t"&&n.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=e)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var m=this;function b(Te,Fe){return V.type="throw",V.arg=f,m.next=Te,Fe&&(m.method="next",m.arg=e),!!Fe}for(var w=this.tryEntries.length-1;w>=0;--w){var S=this.tryEntries[w],V=S.completion;if(S.tryLoc==="root")return b("end");if(S.tryLoc<=this.prev){var ce=n.call(S,"catchLoc"),ye=n.call(S,"finallyLoc");if(ce&&ye){if(this.prev<S.catchLoc)return b(S.catchLoc,!0);if(this.prev<S.finallyLoc)return b(S.finallyLoc)}else if(ce){if(this.prev<S.catchLoc)return b(S.catchLoc,!0)}else{if(!ye)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return b(S.finallyLoc)}}}},abrupt:function(f,m){for(var b=this.tryEntries.length-1;b>=0;--b){var w=this.tryEntries[b];if(w.tryLoc<=this.prev&&n.call(w,"finallyLoc")&&this.prev<w.finallyLoc){var S=w;break}}S&&(f==="break"||f==="continue")&&S.tryLoc<=m&&m<=S.finallyLoc&&(S=null);var V=S?S.completion:{};return V.type=f,V.arg=m,S?(this.method="next",this.next=S.finallyLoc,C):this.complete(V)},complete:function(f,m){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&m&&(this.next=m),C},finish:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.finallyLoc===f)return this.complete(b.completion,b.afterLoc),q(b),C}},catch:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.tryLoc===f){var w=b.completion;if(w.type==="throw"){var S=w.arg;q(b)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(f,m,b){return this.delegate={iterator:re(f),resultName:m,nextLoc:b},this.method==="next"&&(this.arg=e),C}},t}function Vf(e,t,r,n,o,a,u){try{var c=e[a](u),l=c.value}catch(s){r(s);return}c.done?t(l):Promise.resolve(l).then(n,o)}function ml(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function u(l){Vf(a,n,o,u,c,"next",l)}function c(l){Vf(a,n,o,u,c,"throw",l)}u(void 0)})}}var KE=function(){var e=ml(gr().mark(function t(r,n,o){var a,u,c;return gr().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=r.name,u=a.substring(a.lastIndexOf(".")+1),s.prev=2,s.next=5,sl(r);case 5:c=s.sent,s.next=11;break;case 8:throw s.prev=8,s.t0=s.catch(2),s.t0;case 11:if(u!=="json"){s.next=15;break}return s.abrupt("return",(0,oo.kF)(c,n,o));case 15:if(u!=="geojson"){s.next=19;break}return s.abrupt("return",(0,oo.sk)(c,n,o));case 19:return s.abrupt("return",(0,oo.ZQ)(c,n,o));case 20:case"end":return s.stop()}},t,null,[[2,8]])}));return function(r,n,o){return e.apply(this,arguments)}}(),QE=function(){var e=ml(gr().mark(function t(r,n,o){var a;return gr().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,cl(r);case 3:a=c.sent,c.next=9;break;case 6:throw c.prev=6,c.t0=c.catch(0),c.t0;case 9:return c.abrupt("return",(0,oo.Kx)(a,n,o));case 10:case"end":return c.stop()}},t,null,[[0,6]])}));return function(r,n,o){return e.apply(this,arguments)}}(),ZE=function(){var e=ml(gr().mark(function t(r,n,o){var a,u,c,l,s,y,A,E,h,_,g,C,x;return gr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(a=r.map(function(F){var L=F.name.substring(F.name.lastIndexOf("."));return L}),!(r.length>1)){D.next=10;break}if(u=[".shp",".dbf",".prj"],c=u.filter(function(F){return!a.includes(F)}),l=c.length>=1,!l){D.next=8;break}return s="\u8BF7\u5B8C\u6574\u4E0A\u4F20 shapefile \u6587\u4EF6(\u7F3A\u5C11 ".concat(c.join("\u3001")," \u6587\u4EF6)"),D.abrupt("return",Promise.reject(s));case 8:D.next=12;break;case 10:return y="\u8BF7\u5B8C\u6574\u4E0A\u4F20 shapefile \u6587\u4EF6(\u5305\u62EC .shp, .dbf, .prj \u6587\u4EF6\u7B49)",D.abrupt("return",Promise.reject(y));case 12:return r.forEach(function(F){var L=F.name.slice(-3).toLowerCase();L==="shp"?A=F:L==="dbf"?E=F:L==="prj"?h=F:L==="cpg"&&(_=F)}),D.prev=13,D.next=16,GE(A,E,h,_);case 16:g=D.sent.geoJson,D.next=24;break;case 19:return D.prev=19,D.t0=D.catch(13),console.error(D.t0),C="shapefile \u6587\u4EF6\u89E3\u6790\u5931\u8D25",D.abrupt("return",Promise.reject(C));case 24:return x=(0,oo.sk)(JSON.stringify(g),n,o),D.abrupt("return",x);case 26:case"end":return D.stop()}},t,null,[[13,19]])}));return function(r,n,o){return e.apply(this,arguments)}}(),JE=Q(82858),qE=Q.n(JE),XE=function(t){return qE().loadAsync(t).then(function(r){var n=[];return r.forEach(function(o,a){if(!o.match(/^__MACOSX\//)){var u=a.async("arraybuffer").then(function(c){var l=new File([c],a.name);return l});n.push(u)}}),Promise.all(n).then(function(o){return o})}).catch(function(r){return Promise.reject(r)})};function Ia(e){"@babel/helpers - typeof";return Ia=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ia(e)}function pl(){"use strict";pl=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(p,f,m){p[f]=m.value},a=typeof Symbol=="function"?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(p,f,m){return Object.defineProperty(p,f,{value:m,enumerable:!0,configurable:!0,writable:!0}),p[f]}try{s({},"")}catch(p){s=function(m,b,w){return m[b]=w}}function y(p,f,m,b){var w=f&&f.prototype instanceof x?f:x,S=Object.create(w.prototype),V=new ee(b||[]);return o(S,"_invoke",{value:W(p,m,V)}),S}function A(p,f,m){try{return{type:"normal",arg:p.call(f,m)}}catch(b){return{type:"throw",arg:b}}}t.wrap=y;var E="suspendedStart",h="suspendedYield",_="executing",g="completed",C={};function x(){}function j(){}function D(){}var F={};s(F,u,function(){return this});var L=Object.getPrototypeOf,k=L&&L(L(re([])));k&&k!==r&&n.call(k,u)&&(F=k);var Y=D.prototype=x.prototype=Object.create(F);function Z(p){["next","throw","return"].forEach(function(f){s(p,f,function(m){return this._invoke(f,m)})})}function B(p,f){function m(w,S,V,ce){var ye=A(p[w],p,S);if(ye.type!=="throw"){var Te=ye.arg,Fe=Te.value;return Fe&&Ia(Fe)=="object"&&n.call(Fe,"__await")?f.resolve(Fe.__await).then(function(ke){m("next",ke,V,ce)},function(ke){m("throw",ke,V,ce)}):f.resolve(Fe).then(function(ke){Te.value=ke,V(Te)},function(ke){return m("throw",ke,V,ce)})}ce(ye.arg)}var b;o(this,"_invoke",{value:function(S,V){function ce(){return new f(function(ye,Te){m(S,V,ye,Te)})}return b=b?b.then(ce,ce):ce()}})}function W(p,f,m){var b=E;return function(w,S){if(b===_)throw new Error("Generator is already running");if(b===g){if(w==="throw")throw S;return{value:e,done:!0}}for(m.method=w,m.arg=S;;){var V=m.delegate;if(V){var ce=z(V,m);if(ce){if(ce===C)continue;return ce}}if(m.method==="next")m.sent=m._sent=m.arg;else if(m.method==="throw"){if(b===E)throw b=g,m.arg;m.dispatchException(m.arg)}else m.method==="return"&&m.abrupt("return",m.arg);b=_;var ye=A(p,f,m);if(ye.type==="normal"){if(b=m.done?g:h,ye.arg===C)continue;return{value:ye.arg,done:m.done}}ye.type==="throw"&&(b=g,m.method="throw",m.arg=ye.arg)}}}function z(p,f){var m=f.method,b=p.iterator[m];if(b===e)return f.delegate=null,m==="throw"&&p.iterator.return&&(f.method="return",f.arg=e,z(p,f),f.method==="throw")||m!=="return"&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+m+"' method")),C;var w=A(b,p.iterator,f.arg);if(w.type==="throw")return f.method="throw",f.arg=w.arg,f.delegate=null,C;var S=w.arg;return S?S.done?(f[p.resultName]=S.value,f.next=p.nextLoc,f.method!=="return"&&(f.method="next",f.arg=e),f.delegate=null,C):S:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,C)}function R(p){var f={tryLoc:p[0]};1 in p&&(f.catchLoc=p[1]),2 in p&&(f.finallyLoc=p[2],f.afterLoc=p[3]),this.tryEntries.push(f)}function q(p){var f=p.completion||{};f.type="normal",delete f.arg,p.completion=f}function ee(p){this.tryEntries=[{tryLoc:"root"}],p.forEach(R,this),this.reset(!0)}function re(p){if(p||p===""){var f=p[u];if(f)return f.call(p);if(typeof p.next=="function")return p;if(!isNaN(p.length)){var m=-1,b=function w(){for(;++m<p.length;)if(n.call(p,m))return w.value=p[m],w.done=!1,w;return w.value=e,w.done=!0,w};return b.next=b}}throw new TypeError(Ia(p)+" is not iterable")}return j.prototype=D,o(Y,"constructor",{value:D,configurable:!0}),o(D,"constructor",{value:j,configurable:!0}),j.displayName=s(D,l,"GeneratorFunction"),t.isGeneratorFunction=function(p){var f=typeof p=="function"&&p.constructor;return!!f&&(f===j||(f.displayName||f.name)==="GeneratorFunction")},t.mark=function(p){return Object.setPrototypeOf?Object.setPrototypeOf(p,D):(p.__proto__=D,s(p,l,"GeneratorFunction")),p.prototype=Object.create(Y),p},t.awrap=function(p){return{__await:p}},Z(B.prototype),s(B.prototype,c,function(){return this}),t.AsyncIterator=B,t.async=function(p,f,m,b,w){w===void 0&&(w=Promise);var S=new B(y(p,f,m,b),w);return t.isGeneratorFunction(f)?S:S.next().then(function(V){return V.done?V.value:S.next()})},Z(Y),s(Y,l,"Generator"),s(Y,u,function(){return this}),s(Y,"toString",function(){return"[object Generator]"}),t.keys=function(p){var f=Object(p),m=[];for(var b in f)m.push(b);return m.reverse(),function w(){for(;m.length;){var S=m.pop();if(S in f)return w.value=S,w.done=!1,w}return w.done=!0,w}},t.values=re,ee.prototype={constructor:ee,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!f)for(var m in this)m.charAt(0)==="t"&&n.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=e)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var m=this;function b(Te,Fe){return V.type="throw",V.arg=f,m.next=Te,Fe&&(m.method="next",m.arg=e),!!Fe}for(var w=this.tryEntries.length-1;w>=0;--w){var S=this.tryEntries[w],V=S.completion;if(S.tryLoc==="root")return b("end");if(S.tryLoc<=this.prev){var ce=n.call(S,"catchLoc"),ye=n.call(S,"finallyLoc");if(ce&&ye){if(this.prev<S.catchLoc)return b(S.catchLoc,!0);if(this.prev<S.finallyLoc)return b(S.finallyLoc)}else if(ce){if(this.prev<S.catchLoc)return b(S.catchLoc,!0)}else{if(!ye)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return b(S.finallyLoc)}}}},abrupt:function(f,m){for(var b=this.tryEntries.length-1;b>=0;--b){var w=this.tryEntries[b];if(w.tryLoc<=this.prev&&n.call(w,"finallyLoc")&&this.prev<w.finallyLoc){var S=w;break}}S&&(f==="break"||f==="continue")&&S.tryLoc<=m&&m<=S.finallyLoc&&(S=null);var V=S?S.completion:{};return V.type=f,V.arg=m,S?(this.method="next",this.next=S.finallyLoc,C):this.complete(V)},complete:function(f,m){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&m&&(this.next=m),C},finish:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.finallyLoc===f)return this.complete(b.completion,b.afterLoc),q(b),C}},catch:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.tryLoc===f){var w=b.completion;if(w.type==="throw"){var S=w.arg;q(b)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(f,m,b){return this.delegate={iterator:re(f),resultName:m,nextLoc:b},this.method==="next"&&(this.arg=e),C}},t}function Gf(e,t,r,n,o,a,u){try{var c=e[a](u),l=c.value}catch(s){r(s);return}c.done?t(l):Promise.resolve(l).then(n,o)}function $E(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function u(l){Gf(a,n,o,u,c,"next",l)}function c(l){Gf(a,n,o,u,c,"throw",l)}u(void 0)})}}var Kf=function(){var e=$E(pl().mark(function t(r){var n,o,a,u,c;return pl().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(n=r.name,o=n.substring(0,n.lastIndexOf(".")),a=n.substring(n.lastIndexOf(".")+1),a!=="zip"){s.next=18;break}return s.prev=4,s.next=7,XE(r);case 7:return c=s.sent,s.next=10,ZE(c,o,(0,Ie.getUniqueId)());case 10:u=s.sent,s.next=16;break;case 13:return s.prev=13,s.t0=s.catch(4),s.abrupt("return",Promise.reject(s.t0));case 16:s.next=34;break;case 18:if(s.prev=18,!["xlsx","xls"].includes(a)){s.next=25;break}return s.next=22,QE(r,o,(0,Ie.getUniqueId)());case 22:u=s.sent,s.next=29;break;case 25:if(!["csv","geojson","json"].includes(a)){s.next=29;break}return s.next=28,KE(r,o,(0,Ie.getUniqueId)());case 28:u=s.sent;case 29:s.next=34;break;case 31:return s.prev=31,s.t1=s.catch(18),s.abrupt("return",Promise.reject("\u6587\u4EF6\u89E3\u6790\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u683C\u5F0F\u3002"));case 34:return s.abrupt("return",u);case 35:case"end":return s.stop()}},t,null,[[4,13],[18,31]])}));return function(r){return e.apply(this,arguments)}}();function ja(e){"@babel/helpers - typeof";return ja=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ja(e)}function yl(){"use strict";yl=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(p,f,m){p[f]=m.value},a=typeof Symbol=="function"?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(p,f,m){return Object.defineProperty(p,f,{value:m,enumerable:!0,configurable:!0,writable:!0}),p[f]}try{s({},"")}catch(p){s=function(m,b,w){return m[b]=w}}function y(p,f,m,b){var w=f&&f.prototype instanceof x?f:x,S=Object.create(w.prototype),V=new ee(b||[]);return o(S,"_invoke",{value:W(p,m,V)}),S}function A(p,f,m){try{return{type:"normal",arg:p.call(f,m)}}catch(b){return{type:"throw",arg:b}}}t.wrap=y;var E="suspendedStart",h="suspendedYield",_="executing",g="completed",C={};function x(){}function j(){}function D(){}var F={};s(F,u,function(){return this});var L=Object.getPrototypeOf,k=L&&L(L(re([])));k&&k!==r&&n.call(k,u)&&(F=k);var Y=D.prototype=x.prototype=Object.create(F);function Z(p){["next","throw","return"].forEach(function(f){s(p,f,function(m){return this._invoke(f,m)})})}function B(p,f){function m(w,S,V,ce){var ye=A(p[w],p,S);if(ye.type!=="throw"){var Te=ye.arg,Fe=Te.value;return Fe&&ja(Fe)=="object"&&n.call(Fe,"__await")?f.resolve(Fe.__await).then(function(ke){m("next",ke,V,ce)},function(ke){m("throw",ke,V,ce)}):f.resolve(Fe).then(function(ke){Te.value=ke,V(Te)},function(ke){return m("throw",ke,V,ce)})}ce(ye.arg)}var b;o(this,"_invoke",{value:function(S,V){function ce(){return new f(function(ye,Te){m(S,V,ye,Te)})}return b=b?b.then(ce,ce):ce()}})}function W(p,f,m){var b=E;return function(w,S){if(b===_)throw new Error("Generator is already running");if(b===g){if(w==="throw")throw S;return{value:e,done:!0}}for(m.method=w,m.arg=S;;){var V=m.delegate;if(V){var ce=z(V,m);if(ce){if(ce===C)continue;return ce}}if(m.method==="next")m.sent=m._sent=m.arg;else if(m.method==="throw"){if(b===E)throw b=g,m.arg;m.dispatchException(m.arg)}else m.method==="return"&&m.abrupt("return",m.arg);b=_;var ye=A(p,f,m);if(ye.type==="normal"){if(b=m.done?g:h,ye.arg===C)continue;return{value:ye.arg,done:m.done}}ye.type==="throw"&&(b=g,m.method="throw",m.arg=ye.arg)}}}function z(p,f){var m=f.method,b=p.iterator[m];if(b===e)return f.delegate=null,m==="throw"&&p.iterator.return&&(f.method="return",f.arg=e,z(p,f),f.method==="throw")||m!=="return"&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+m+"' method")),C;var w=A(b,p.iterator,f.arg);if(w.type==="throw")return f.method="throw",f.arg=w.arg,f.delegate=null,C;var S=w.arg;return S?S.done?(f[p.resultName]=S.value,f.next=p.nextLoc,f.method!=="return"&&(f.method="next",f.arg=e),f.delegate=null,C):S:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,C)}function R(p){var f={tryLoc:p[0]};1 in p&&(f.catchLoc=p[1]),2 in p&&(f.finallyLoc=p[2],f.afterLoc=p[3]),this.tryEntries.push(f)}function q(p){var f=p.completion||{};f.type="normal",delete f.arg,p.completion=f}function ee(p){this.tryEntries=[{tryLoc:"root"}],p.forEach(R,this),this.reset(!0)}function re(p){if(p||p===""){var f=p[u];if(f)return f.call(p);if(typeof p.next=="function")return p;if(!isNaN(p.length)){var m=-1,b=function w(){for(;++m<p.length;)if(n.call(p,m))return w.value=p[m],w.done=!1,w;return w.value=e,w.done=!0,w};return b.next=b}}throw new TypeError(ja(p)+" is not iterable")}return j.prototype=D,o(Y,"constructor",{value:D,configurable:!0}),o(D,"constructor",{value:j,configurable:!0}),j.displayName=s(D,l,"GeneratorFunction"),t.isGeneratorFunction=function(p){var f=typeof p=="function"&&p.constructor;return!!f&&(f===j||(f.displayName||f.name)==="GeneratorFunction")},t.mark=function(p){return Object.setPrototypeOf?Object.setPrototypeOf(p,D):(p.__proto__=D,s(p,l,"GeneratorFunction")),p.prototype=Object.create(Y),p},t.awrap=function(p){return{__await:p}},Z(B.prototype),s(B.prototype,c,function(){return this}),t.AsyncIterator=B,t.async=function(p,f,m,b,w){w===void 0&&(w=Promise);var S=new B(y(p,f,m,b),w);return t.isGeneratorFunction(f)?S:S.next().then(function(V){return V.done?V.value:S.next()})},Z(Y),s(Y,l,"Generator"),s(Y,u,function(){return this}),s(Y,"toString",function(){return"[object Generator]"}),t.keys=function(p){var f=Object(p),m=[];for(var b in f)m.push(b);return m.reverse(),function w(){for(;m.length;){var S=m.pop();if(S in f)return w.value=S,w.done=!1,w}return w.done=!0,w}},t.values=re,ee.prototype={constructor:ee,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!f)for(var m in this)m.charAt(0)==="t"&&n.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=e)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var m=this;function b(Te,Fe){return V.type="throw",V.arg=f,m.next=Te,Fe&&(m.method="next",m.arg=e),!!Fe}for(var w=this.tryEntries.length-1;w>=0;--w){var S=this.tryEntries[w],V=S.completion;if(S.tryLoc==="root")return b("end");if(S.tryLoc<=this.prev){var ce=n.call(S,"catchLoc"),ye=n.call(S,"finallyLoc");if(ce&&ye){if(this.prev<S.catchLoc)return b(S.catchLoc,!0);if(this.prev<S.finallyLoc)return b(S.finallyLoc)}else if(ce){if(this.prev<S.catchLoc)return b(S.catchLoc,!0)}else{if(!ye)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return b(S.finallyLoc)}}}},abrupt:function(f,m){for(var b=this.tryEntries.length-1;b>=0;--b){var w=this.tryEntries[b];if(w.tryLoc<=this.prev&&n.call(w,"finallyLoc")&&this.prev<w.finallyLoc){var S=w;break}}S&&(f==="break"||f==="continue")&&S.tryLoc<=m&&m<=S.finallyLoc&&(S=null);var V=S?S.completion:{};return V.type=f,V.arg=m,S?(this.method="next",this.next=S.finallyLoc,C):this.complete(V)},complete:function(f,m){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&m&&(this.next=m),C},finish:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.finallyLoc===f)return this.complete(b.completion,b.afterLoc),q(b),C}},catch:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var b=this.tryEntries[m];if(b.tryLoc===f){var w=b.completion;if(w.type==="throw"){var S=w.arg;q(b)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(f,m,b){return this.delegate={iterator:re(f),resultName:m,nextLoc:b},this.method==="next"&&(this.arg=e),C}},t}function Qf(e,t,r,n,o,a,u){try{var c=e[a](u),l=c.value}catch(s){r(s);return}c.done?t(l):Promise.resolve(l).then(n,o)}function eA(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function u(l){Qf(a,n,o,u,c,"next",l)}function c(l){Qf(a,n,o,u,c,"throw",l)}u(void 0)})}}function dl(e,t){return oA(e)||nA(e,t)||rA(e,t)||tA()}function tA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rA(e,t){if(e){if(typeof e=="string")return Zf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zf(e,t)}}function Zf(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nA(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function oA(e){if(Array.isArray(e))return e}var aA=function(t){var r=t.onSubmit,n=(0,N.useState)(""),o=dl(n,2),a=o[0],u=o[1],c=(0,N.useState)(!1),l=dl(c,2),s=l[0],y=l[1],A=P.message.useMessage(),E=dl(A,2),h=E[0],_=E[1],g=function(){var C=eA(yl().mark(function x(){var j,D,F,L,k;return yl().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if((0,Ie.isValidUrl)(a)){Z.next=3;break}return h.error("\u8BF7\u68C0\u67E5 URL \u662F\u5426\u6B63\u786E\uFF01"),Z.abrupt("return");case 3:if(j=/\.(?:json|csv|xlsx|xls|geojson|zip)$/,j.test(a)){Z.next=7;break}return h.error("\u8BF7\u68C0\u67E5\u662F\u5426\u4E3A json\u3001csv\u3001xls\u3001xlsx\u3001geojson\u3001zip \u6587\u4EF6\u540E\u7F00\uFF01"),Z.abrupt("return");case 7:return D=a.substring(a.lastIndexOf("/")+1),y(!0),Z.prev=9,Z.next=12,fetch(a).then(function(B){if(B.ok)return B.arrayBuffer();throw Error("Request rejected with status ".concat(B.status))});case 12:F=Z.sent,Z.next=20;break;case 15:return Z.prev=15,Z.t0=Z.catch(9),h.error("\u6587\u4EF6\u4E0B\u8F7D\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5 URL \u5730\u5740\u662F\u5426\u6709\u6548\u3002"),y(!1),Z.abrupt("return");case 20:return L=new File([F],D),Z.prev=21,Z.next=24,Kf(L);case 24:k=Z.sent,Z.next=30;break;case 27:Z.prev=27,Z.t1=Z.catch(21),h.error(Z.t1);case 30:k&&(r(k),u("")),y(!1);case 32:case"end":return Z.stop()}},x,null,[[9,15],[21,27]])}));return function(){return C.apply(this,arguments)}}();return i().createElement(P.Space,{onClick:function(x){return x.stopPropagation()}},i().createElement(P.Input,{allowClear:!0,style:{width:400},placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6 URL \u5730\u5740",value:a,onChange:function(x){u(x.target.value)}}),_,i().createElement(P.Button,{type:"link",onClick:function(){g()},disabled:!a.length,loading:s},"\u63D0\u4EA4"))},iA=aA,Jf,qf,Xf,$f,em,tm,rm,nm;function or(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var lA=function(){var t=(0,ne.Sr)(),r=t.colorTextSecondary;return{uploadDescription:(0,G.iv)(Jf||(Jf=or([`
      color: `,`;
    `])),r),uploadContent:(0,G.iv)(qf||(qf=or([`
      display: flex;
      height: 400px;
      overflow: hidden;
    `]))),uploadDataset:(0,G.iv)(Xf||(Xf=or([`
      flex: 1;
    `]))),draggerContent:(0,G.iv)($f||($f=or([`
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    `]))),draggerContentIcon:(0,G.iv)(em||(em=or([`
      font-size: 40px;
    `]))),draggerContentText:(0,G.iv)(tm||(tm=or([`
      padding-bottom: 20px;
    `]))),uploadList:(0,G.iv)(rm||(rm=or([`
      display: flex;
      flex-direction: column;
      margin-left: 10px;
    `]))),uploadListTitle:(0,G.iv)(nm||(nm=or([`
      color: `,`;
    `])),r)}},uA=lA;function om(e){return fA(e)||sA(e)||am(e)||cA()}function cA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sA(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fA(e){if(Array.isArray(e))return gl(e)}function vl(e,t){return yA(e)||pA(e,t)||am(e,t)||mA()}function mA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function am(e,t){if(e){if(typeof e=="string")return gl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gl(e,t)}}function gl(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pA(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function yA(e){if(Array.isArray(e))return e}function dA(e){var t=e.onSubmit,r=e.onCancel,n=(0,ne.F8)("upload"),o=uA(),a=(0,N.useState)([]),u=vl(a,2),c=u[0],l=u[1],s=(0,N.useState)([]),y=vl(s,2),A=y[0],E=y[1],h=P.message.useMessage(),_=vl(h,2),g=_[0],C=_[1],x=function(F){var L=F.file,k=F.onSuccess;Kf(L).then(function(Y){Y&&l(function(Z){return[].concat(om(Z),[Y])}),k()}).catch(function(Y){g.error(Y)})},j=i().createElement("div",{className:I()("".concat(n,"-dataset__dragger-content"),o.draggerContent)},i().createElement("span",{className:I()("".concat(n,"-dataset__dragger-content_icon"),o.draggerContentIcon)},i().createElement(M.FileTextOutlined,null)),i().createElement("div",{className:I()("".concat(n,"-dataset__dragger-content_text"),o.draggerContentText)},"\u70B9\u51FB\u6216\u5C06\u6587\u4EF6\u62D6\u62FD\u5230\u8FD9\u91CC\uFF0C\u4E5F\u53EF\u4EE5\u6587\u4EF6 URL \u5730\u5740\u4E0A\u4F20"),i().createElement(iA,{onSubmit:function(F){l(function(L){return[].concat(om(L),[F])})}}));return i().createElement(i().Fragment,null,i().createElement("div",{className:n},i().createElement("p",{className:I()("".concat(n,"__description"),o.uploadDescription)},"\u652F\u6301\u7684\u6587\u4EF6\u683C\u5F0F\u6709"," ",i().createElement("a",{href:"https://www.yuque.com/antv/l7vp/data-format-csv",target:"_blank",rel:"noreferrer"},"CSV"),"\u3001",i().createElement("a",{href:"https://www.yuque.com/antv/l7vp/data-format-excel",target:"_blank",rel:"noreferrer"},"Excel"),"\u3001",i().createElement("a",{href:"https://www.yuque.com/antv/l7vp/data-format-json",target:"_blank",rel:"noreferrer"},"JSON"),"\u3001",i().createElement("a",{href:"https://www.yuque.com/antv/l7vp/data-format-geojson",target:"_blank",rel:"noreferrer"},"GeoJSON"),"\u3001",i().createElement(P.Tooltip,{title:"\u9700\u538B\u7F29\u6253\u5305\u4E3A Zip \u683C\u5F0F\uFF0C\u4E0A\u4F20\u7684 Zip \u81F3\u5C11\u5305\u542B .shp\u3001.dbf\u3001.prj \u6587\u4EF6"},i().createElement("a",{href:"https://www.yuque.com/antv/l7vp/data-format-shapefile",target:"_blank",rel:"noreferrer"},"Shapefile")),"\uFF0C\u4E86\u89E3\u4F7F\u7528\u65B9\u5F0F\u8BE6\u89C1"," ",i().createElement("a",{href:"https://www.yuque.com/antv/l7vp/data-formats",target:"_blank",rel:"noreferrer"},"\u4F7F\u7528\u6587\u6863"),"\u3002"),i().createElement("div",{className:I()("".concat(n,"__content"),o.uploadContent)},i().createElement("div",{className:I()("".concat(n,"-dataset"),o.uploadDataset)},C,i().createElement(P.Upload.Dragger,{name:"data",accept:".csv,.json,.xls,.xlsx,.geojson,.zip",customRequest:x,showUploadList:!1},j)),!(0,oe.isEmpty)(c)&&i().createElement("div",{className:I()("".concat(n,"-list"),o.uploadList)},i().createElement("p",{className:I()("".concat(n,"-list__title"),o.uploadListTitle)},"\u5DF2\u4E0A\u4F20\u6587\u4EF6"),i().createElement(BE,{dataset:c,onChange:function(F){E(F)}})))),i().createElement("div",{className:"li-upload__footer ant-modal-footer"},i().createElement(P.Space,null,i().createElement(P.Button,{onClick:r},"\u8FD4\u56DE"),i().createElement(P.Button,{disabled:!!(0,oe.isEmpty)(A),type:"primary",onClick:function(){t(c.filter(function(F){return A.includes(F.id)}))}},"\u6DFB\u52A0"))))}var vA=(0,Se.BP)({version:"v0.1",component:dA,metadata:{name:"UploadDataset",displayName:"\u6587\u4EF6\u4E0A\u4F20",description:"\u9759\u6001\u6587\u4EF6\u4E0A\u4F20\u6570\u636E\u96C6"},container:{type:"Datasets",slot:"addDataset"}}),im=Q(47429),bl=function(t,r){var n,o=(n=t.defaultProperties)!==null&&n!==void 0?n:{};switch(t.metadata.type){case Dt.zi.Atom:return{id:(0,Ie.getUniqueId)(t.metadata.name),type:t.metadata.name,metadata:{name:(0,Ie.uniqueName)(t.metadata.displayName)},properties:o,container:Dt.Vw};case Dt.zi.Auto:return{id:(0,Ie.getUniqueId)(t.metadata.name),type:t.metadata.name,metadata:{name:(0,Ie.uniqueName)(t.metadata.displayName)},properties:o,container:{id:(r==null?void 0:r.id)||"",slot:"controls"}};case Dt.zi.Layout:return{id:(0,Ie.getUniqueId)(t.metadata.name),type:t.metadata.name,metadata:{name:(0,Ie.uniqueName)(t.metadata.displayName)},properties:o};default:return{id:(0,Ie.getUniqueId)(t.metadata.name),type:t.metadata.name,metadata:{name:(0,Ie.uniqueName)(t.metadata.displayName)},properties:o,container:Dt.Vw}}},lm,um,cm,sm,fm,mm,pm,ym,dm,vm,gm;function Bt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var gA=function(){var t=(0,ne.Sr)(),r=t.antCls,n=t.colorText,o=t.colorBgContainer,a=t.colorPrimary,u=t.colorTextTertiary;return{addPanel:(0,G.iv)(lm||(lm=Bt([`
      position: relative;
      `,`-modal-footer {
        `,`-badge {
          margin-left: 10px;

          `,`-badge-count {
            color: `,`;
            box-shadow: none;
          }
        }
      }
    `])),r,r,r,n),panelImpty:(0,G.iv)(um||(um=Bt([`
      padding-top: 20px;
    `]))),panelContent:(0,G.iv)(cm||(cm=Bt([`
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-start;
    `]))),contentItem:(0,G.iv)(sm||(sm=Bt([`
      position: relative;
      width: 200px;
      margin: 0 5px 5px 0;
      background-color: `,`;
      cursor: pointer;

      &:hover {
        box-shadow: 0 5px 12px 4px rgb(0 0 0 / 9%), 0 3px 6px 0 rgb(0 0 0 / 12%), 0 1px 2px -2px rgb(0 0 0 / 16%);
      }
    `])),o),contentItemSelected:(0,G.iv)(fm||(fm=Bt([`
      border: 1px solid `,`;
    `])),a),itemContent:(0,G.iv)(mm||(mm=Bt([`
      position: relative;
      display: flex;
      align-items: center;
      padding: 10px;
    `]))),itemContentSelected:(0,G.iv)(pm||(pm=Bt([`
      position: absolute;
      top: 0;
      right: 0;
      width: 20px;
      height: 20px;
      text-align: center;
      background: `,`;
      border-radius: 50%;

      svg {
        color: #fff;
      }
    `])),a),itemContentImg:(0,G.iv)(ym||(ym=Bt([`
      margin-right: 10px;
      font-size: 40px;

      svg {
        color: `,`;
      }
    `])),a),itemContentInfo:(0,G.iv)(dm||(dm=Bt([`
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      overflow: hidden;
    `]))),itemContentInfoTitle:(0,G.iv)(vm||(vm=Bt([`
      display: -webkit-box;
      height: 25px;
      overflow: hidden;
      font-size: 14px;
      line-height: 20px;
      text-overflow: ellipsis;
      -webkit-line-clamp: 1;
      line-clamp: 1;
      -webkit-box-orient: vertical;
    `]))),itemContentInfoDescription:(0,G.iv)(gm||(gm=Bt([`
      display: -webkit-box;
      height: 40px;
      overflow: hidden;
      color: `,`;
      font-size: 12px;
      line-height: 20px;
      text-overflow: ellipsis;
      -webkit-line-clamp: 2;
      line-clamp: 2;
      -webkit-box-orient: vertical;
    `])),u)}},bm=gA;function ao(e){"@babel/helpers - typeof";return ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ao(e)}function hm(e,t,r){return t=bA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bA(e){var t=hA(e,"string");return ao(t)=="symbol"?t:String(t)}function hA(e,t){if(ao(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ao(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SA(e,t){return EA(e)||OA(e,t)||CA(e,t)||_A()}function _A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CA(e,t){if(e){if(typeof e=="string")return Sm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sm(e,t)}}function Sm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function OA(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function EA(e){if(Array.isArray(e))return e}var AA=function(t){var r=t||{},n=r.widgets,o=r.onChange,a=(0,ne.F8)("add-widgets-panel"),u=bm(),c=(0,N.useState)([]),l=SA(c,2),s=l[0],y=l[1],A=function(h){var _=s.findIndex(function(C){return C===h.metadata.name});if(_===-1)h.metadata.type===Dt.zi.Layout?y([h.metadata.name]):y(function(C){return C.concat(h.metadata.name)});else{var g=s.filter(function(C){return C!==h.metadata.name});y(g)}};return(0,N.useEffect)(function(){o(s)},[s]),(0,oe.isEmpty)(n)?i().createElement(P.Empty,{description:"\u6682\u65E0\u53EF\u9009\u7EC4\u4EF6",className:I()("".concat(a,"__impty"),u.panelImpty)}):i().createElement("div",{className:I()("".concat(a,"__content"),u.panelContent)},n.map(function(E){var h,_=(0,oe.isEmpty)(E.metadata.description)?"\u6682\u65E0\u63CF\u8FF0":E.metadata.description&&((h=E.metadata.description)===null||h===void 0?void 0:h.length)>20?i().createElement(P.Tooltip,{title:E.metadata.description},E.metadata.description):E.metadata.description,g=E.metadata.icon?i().createElement(me(),{component:E.metadata.icon}):i().createElement(M.GroupOutlined,null);return i().createElement(P.Card,{bodyStyle:{overflow:"hidden",padding:0},key:E.metadata.name,className:I()("".concat(a,"__content-item"),u.contentItem,hm(hm({},u.contentItemSelected,s.includes(E.metadata.name)),"".concat(a,"__content-item_selected"),s.includes(E.metadata.name)))},i().createElement("div",{onClick:function(){return A(E)},className:I()("".concat(a,"__content-item-content"),u.itemContent)},i().createElement("div",{className:I()("".concat(a,"__content-item-content__img"),u.itemContentImg)},g),i().createElement("div",{className:I()("".concat(a,"__content-item-content__info"),u.itemContentInfo)},i().createElement("div",{className:I()("".concat(a,"__content-item-content__info-title"),u.itemContentInfoTitle)},E.metadata.displayName),i().createElement("div",{className:I()("".concat(a,"__content-item-content__info-description"),u.itemContentInfoDescription)},_)),s.includes(E.metadata.name)&&i().createElement("div",{className:I()("".concat(a,"__content-item-selected"),u.itemContentSelected)},i().createElement(M.CheckOutlined,null))))}))},wA=AA;function io(e){"@babel/helpers - typeof";return io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},io(e)}function _m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function lo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_m(Object(r),!0).forEach(function(n){Cm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_m(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cm(e,t,r){return t=PA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PA(e){var t=IA(e,"string");return io(t)=="symbol"?t:String(t)}function IA(e,t){if(io(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(io(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hl(e){return DA(e)||xA(e)||Om(e)||jA()}function jA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xA(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DA(e){if(Array.isArray(e))return Sl(e)}function TA(e,t){return NA(e)||LA(e,t)||Om(e,t)||FA()}function FA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Om(e,t){if(e){if(typeof e=="string")return Sl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sl(e,t)}}function Sl(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function LA(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function NA(e){if(Array.isArray(e))return e}var MA=P.theme.useToken,RA=function(t){var r=t.open,n=t.onClose,o=(0,ne.F8)("add-widgets-panel"),a=bm(),u=(0,ne.sZ)(),c=u.state,l=u.updateState,s=(0,ne.ox)(),y=s.appService,A=(0,N.useState)({}),E=TA(A,2),h=E[0],_=E[1],g=(0,N.useMemo)(function(){return y.getLayoutWidget(c.widgets)},[y,c.widgets]),C=(0,N.useMemo)(function(){return y.getImplementWidgets()},[y]),x=(0,N.useMemo)(function(){return Object.values(h).flat()},[h]),j=MA(),D=j.token,F=function(){var Z=x.find(function(ee){return ee.metadata.type===Dt.zi.Layout});if(Z===void 0){var B=x.map(function(ee){return bl(ee,g)});l(function(ee){var re;(re=ee.widgets).push.apply(re,hl(B))})}else{var W=bl(Z),z=x.filter(function(ee){return ee.metadata.type!==Dt.zi.Layout}).map(function(ee){return bl(ee,W)}),R=c.widgets.filter(function(ee){return ee.id!==(g==null?void 0:g.id)}).map(function(ee){var re;return ee.container===void 0?ee:((re=ee.container)===null||re===void 0?void 0:re.id)===(g==null?void 0:g.id)?lo(lo({},ee),{},{container:lo(lo({},ee.container),{},{id:W.id})}):ee}),q=[W].concat(hl(R),hl(z));l(function(ee){ee.widgets=q})}n()},L=function(Z,B){var W=Z.map(function(z){return y.getImplementWidget(z)});_(lo({},Object.assign(h,Cm({},B,W))))},k=(0,N.useMemo)(function(){var Y=(0,im.cq)(C),Z=Y.map(function(B){var W=B.category,z=B.categoryName,R=B.category===Dt.zi.Layout?B.widgets.filter(function(q){return q.metadata.name!==(g==null?void 0:g.type)}):B.widgets;return R.length===0?null:{label:z,key:W,children:i().createElement(wA,{widgets:R,onChange:function(ee){return L(ee,W)}})}}).filter(function(B){return B!==null});return Z},[C]);return i().createElement(P.Modal,{title:"\u65B0\u589E\u7EC4\u4EF6",className:I()(o,a.addPanel),width:1100,destroyOnClose:!0,styles:{body:{minHeight:"300px"}},open:r,onCancel:n,footer:[i().createElement(P.Button,{key:"back",onClick:n},"\u53D6\u6D88"),i().createElement(P.Badge,{key:"submit",color:D.colorPrimary,count:x.length},i().createElement(P.Button,{type:"primary",onClick:F,disabled:(0,oe.isEmpty)(x)},"\u6DFB\u52A0"))]},i().createElement(P.Tabs,{defaultActiveKey:"MapControl",items:k}))},BA=RA,Em,Am,wm,Pm;function xa(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var kA=function(){var t=(0,ne.Sr)(),r=t.antCls,n=t.colorTextSecondary,o=t.colorBgContainer,a=t.colorSplit,u=t.borderRadius;return{widgetList:(0,G.iv)(Em||(Em=xa([`
      `,"-collapse ",`-collapse-item {
        margin-bottom: 10px;
      }

      `,"-collapse-content > ",`-collapse-content-box {
        padding: 10px 0;
      }
    `])),r,r,r,r),widgetGroup:(0,G.iv)(Am||(Am=xa([`
      & + & {
        margin-top: 20px;
      }
    `]))),widgetGroupTitle:(0,G.iv)(wm||(wm=xa([`
      margin-bottom: 0;
      padding-bottom: 10px;
      color: `,`;
      font-weight: 400;
      font-size: 14px;
    `])),n),panel:(0,G.iv)(Pm||(Pm=xa([`
      `,`-collapse-header {
        padding: 6px 13px !important;
        overflow: hidden;
        background-color: `,` !important;
        border: 1px solid `,` !important;
        border-radius: `,`px !important;

        `,`-collapse-extra {
          cursor: pointer !important;
        }
      }
    `])),r,o,a,u,r)}},Im=kA,YA=function(t,r){var n=(0,N.useRef)(),o=(0,N.useMemo)(function(){var a=t.filter(function(c){return c.id!==r});if(n.current)if(a.length===n.current.length){var u=(0,oe.isEqual)(a.map(function(c){return(0,oe.omit)(c,"properties")}),n.current.map(function(c){return(0,oe.omit)(c,"properties")}));u||(n.current=a)}else n.current=a;else n.current=a;return n.current},[r,t]);return o},WA=[{value:"topleft",label:"\u5DE6\u4E0A(\u7EB5\u5411)"},{value:"lefttop",label:"\u5DE6\u4E0A(\u6A2A\u5411)"},{value:"topright",label:"\u53F3\u4E0A(\u7EB5\u5411)"},{value:"righttop",label:"\u53F3\u4E0A(\u6A2A\u5411)"},{value:"bottomleft",label:"\u5DE6\u4E0B(\u7EB5\u5411)"},{value:"leftbottom",label:"\u5DE6\u4E0B(\u6A2A\u5411)"},{value:"bottomright",label:"\u53F3\u4E0B(\u7EB5\u5411)"},{value:"rightbottom",label:"\u53F3\u4E0B(\u6A2A\u5411)"}],HA=["options"];function _l(){return _l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_l.apply(this,arguments)}function zA(e,t){if(e==null)return{};var r=UA(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function UA(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var VA=function(t){var r=t.options,n=zA(t,HA);return i().createElement(P.Select,_l({},n,{options:r!=null?r:WA}))},GA=VA;function uo(e){"@babel/helpers - typeof";return uo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uo(e)}function jm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function KA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jm(Object(r),!0).forEach(function(n){QA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QA(e,t,r){return t=ZA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZA(e){var t=JA(e,"string");return uo(t)=="symbol"?t:String(t)}function JA(e,t){if(uo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(uo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qA=(0,st.connect)(GA,(0,st.mapProps)({dataSource:"options",loading:!0},function(e){return KA({},e)})),XA=qA,Cl=[{lavel:"YYYY/MM/DD HH:mm:ss",value:"YYYY/MM/DD HH:mm:ss",other:"YYYY-MM-DD HH:mm:ss"},{lavel:"YYYY/MM/DD HH",value:"YYYY/MM/DD HH",other:"YYYY-MM-DD HH"},{lavel:"YYYY/MM/DD",value:"YYYY/MM/DD",other:"YYYY-MM-DD"},{lavel:"YYYY/MM",value:"YYYY/MM",other:"YYYY-MM"},{lavel:"YYYY",value:"YYYY",other:"YYYY"}],$A=function(t){if(!t)return Cl.map(function(a){return{label:a.lavel,value:a.value}});var r=t.indexOf("/")!==-1,n=Cl.map(function(a){return{label:r?a.value:a.other,value:r?a.value:a.other}}),o=Cl.findIndex(function(a){return a.value===t||a.other===t});return(0,oe.isEmpty)(o)?n.slice(o):n};function co(e){"@babel/helpers - typeof";return co=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},co(e)}function xm(e,t,r){return t=ew(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ew(e){var t=tw(e,"string");return co(t)=="symbol"?t:String(t)}function tw(e,t){if(co(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(co(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rw=(0,qe.l)("field-select",function(e){var t=e.componentCls;return xm({},t,xm({},"".concat(t,"-item"),{lineHeight:"30px"}))}),nw=["options","value","type"];function Ol(){return Ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ol.apply(this,arguments)}function Dm(e,t){return lw(e)||iw(e,t)||aw(e,t)||ow()}function ow(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aw(e,t){if(e){if(typeof e=="string")return Tm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tm(e,t)}}function Tm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iw(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function lw(e){if(Array.isArray(e))return e}function uw(e,t){if(e==null)return{};var r=cw(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cw(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var sw=function(t){var r=t.options,n=t.value,o=t.type,a=uw(t,nw),u=(0,Je.F)("formily-time-granularity-select"),c=rw(u),l=Dm(c,2),s=l[0],y=l[1],A=(0,N.useState)(n),E=Dm(A,2),h=E[0],_=E[1],g=(0,N.useMemo)(function(){return r!=null&&r.length?r:$A(o)},[r,o]);(0,N.useEffect)(function(){var x,j=h&&g.find(function(F){return F.value===h});if(!(j||(0,oe.isUndefined)(o))){var D=g.length>1?g[1].value:g[0].value;_(D),(x=t.onChange)===null||x===void 0||x.call(t,D,g)}},[g,o]);var C=function(j){var D;_(j),(D=t.onChange)===null||D===void 0||D.call(t,j,g)};return s(i().createElement(P.Select,Ol({value:h},a,{popupClassName:I()("".concat(u),y),options:g,onChange:C})))},fw=sw;function so(e){"@babel/helpers - typeof";return so=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},so(e)}function Fm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Lm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fm(Object(r),!0).forEach(function(n){mw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mw(e,t,r){return t=pw(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pw(e){var t=yw(e,"string");return so(t)=="symbol"?t:String(t)}function yw(e,t){if(so(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(so(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dw=(0,st.connect)(fw,(0,st.mapProps)({dataSource:"options",loading:!0},function(e,t){return Lm(Lm({},e),{},{field:t})})),vw=dw,gw=function(t,r){if(t.type==="string"){var n={id:r,title:t.value,field:t.value,type:"string",operator:"IN",value:void 0,params:{filterType:"single"}};return n}if(t.type==="date"){var o,a={id:r,title:t.value,field:t.value,type:"date",operator:"BETWEEN",granularity:"day",params:{format:(o=t.format)!==null&&o!==void 0?o:"YYYY-MM-DD",dateType:"date"}};return a}var u={id:r,title:t.value,field:t.value,type:"number",operator:">=",value:void 0};return u},El=[{label:"\u79D2",value:"YYYY-MM-DD HH:mm:ss",other:"YYYY/MM/DD HH:mm:ss",otherLabel:"\u79D2",granularity:"second"},{label:"\u5206\u949F",value:"YYYY-MM-DD HH:mm",other:"YYYY/MM/DD HH:mm",otherLabel:"\u5206\u949F",granularity:"minute"},{label:"\u5C0F\u65F6",value:"YYYY-MM-DD HH",other:"YYYY/MM/DD HH",otherLabel:"\u5C0F\u65F6",granularity:"hour"},{label:"\u65E5",value:"YYYY-MM-DD",other:"YYYY/MM/DD",otherLabel:"\u65E5",granularity:"day",picker:"date"},{label:"\u6708",value:"YYYY-MM",other:"YYYY/MM",otherLabel:"\u6708",granularity:"month",picker:"month"},{label:"\u5E74",value:"YYYY",other:"YYYY",otherLabel:"\u5E74",granularity:"year",picker:"year"}],bw={"YYYY/MM/DD HH:mm:ss":{format:"YYYY/MM/DD HH:mm:ss",granularity:"second"},"YYYY-MM-DD HH:mm:ss":{format:"YYYY-MM-DD HH:mm:ss",granularity:"second"},"YYYY/MM/DD HH:mm":{format:"YYYY/MM/DD HH:mm:ss",granularity:"minute"},"YYYY-MM-DD HH:mm":{format:"YYYY-MM-DD HH:mm:ss",granularity:"minute"},"YYYY/MM/DD HH":{format:"YYYY/MM/DD HH:mm:ss",granularity:"hour"},"YYYY-MM-DD HH":{format:"YYYY-MM-DD HH:mm:ss",granularity:"hour"},"YYYY/MM/DD":{format:"YYYY/MM/DD HH:mm:ss",granularity:"day"},"YYYY-MM-DD":{format:"YYYY-MM-DD HH:mm:ss",granularity:"day"},"YYYY/MM":{format:"YYYY/MM/DD HH:mm:ss",granularity:"month"},"YYYY-MM":{format:"YYYY-MM-DD HH:mm:ss",granularity:"month"},YYYY:{format:"YYYY-MM-DD HH:mm:ss",granularity:"year"}},jr=function(t,r){var n=bw[r],o=typeof t=="string"?pt()(t).format(r):[pt()(t[0]).format(r),pt()(t[1]).format(r)];if(n){if(typeof o=="string"){var a=[pt()(o).format(n.format),pt()(o).endOf(n.granularity).format(n.format)];return a}var u=[pt()(o[0]).format(n.format),pt()(o[1]).endOf(n.granularity).format(n.format)];return u}},hw=function(t){var r=t.indexOf("/")===-1,n=El.map(function(o){return{picker:o.picker,granularity:o.granularity,label:r?o.label:o.otherLabel,value:r?o.value:o.other,key:r?o.value:o.other}});return n};function fo(e){"@babel/helpers - typeof";return fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fo(e)}function Nm(e,t,r){return t=Sw(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sw(e){var t=_w(e,"string");return fo(t)=="symbol"?t:String(t)}function _w(e,t){if(fo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cw=(0,qe.l)("filter-setting-date",function(e){var t=e.componentCls,r=e.antCls,n=e.colorPrimary,o=e.colorPrimaryHover,a=e.colorTextDescription;return Nm(Nm({},t,{display:"flex"}),"".concat(t,"__item"),{marginRight:"10px","&__info":{color:n,"&:hover":{color:o}}})});function mo(e){"@babel/helpers - typeof";return mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mo(e)}function Mm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mm(Object(r),!0).forEach(function(n){Ow(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ow(e,t,r){return t=Ew(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ew(e){var t=Aw(e,"string");return mo(t)=="symbol"?t:String(t)}function Aw(e,t){if(mo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Al(e,t){return jw(e)||Iw(e,t)||Pw(e,t)||ww()}function ww(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pw(e,t){if(e){if(typeof e=="string")return Rm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rm(e,t)}}function Rm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Iw(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function jw(e){if(Array.isArray(e))return e}var Bm=P.DatePicker.RangePicker,xw=function(t){var r,n,o=t.isRenderExtraFooter,a=o===void 0?!1:o,u=t.format,c=t.granularity,l=t.type,s=l===void 0?"date":l,y=t.value,A=t.size,E=A===void 0?"middle":A,h=t.bordered,_=h===void 0?!0:h,g=t.onChange,C=(0,N.useState)(!1),x=Al(C,2),j=x[0],D=x[1],F=(0,Je.F)("formily-filter-setting-date"),L=Cw(F),k=Al(L,2),Y=k[0],Z=k[1],B=(0,N.useRef)(0),W=(0,N.useState)({granularity:c,format:u,value:y,type:s}),z=Al(W,2),R=z[0],q=z[1],ee=function(V){D(V),B.current=0},re=function(V,ce){var ye;ce===""||Array.isArray(ce)&&ce.every(function(Te){return Te===""})?ye=void 0:R.type==="date"?ye=typeof ce=="string"?jr(ce,R.format):void 0:ye=Array.isArray(ce)?jr(ce,R.format):void 0,q(function(Te){return ar(ar({},Te),{},{value:ye})}),g({value:ye,format:R.format,type:R.type,granularity:R.granularity})},p=function(V,ce){var ye=R.value?jr(R.value,V):void 0;q(function(Te){return ar(ar({},Te),{},{format:V,granularity:ce})}),g({value:ye,format:V,type:R.type,granularity:ce}),D(!0)},f=function(V){q(function(ye){return ar(ar({},ye),{},{type:V})});var ce=R.value?jr(R.value[0],R.format):void 0;g({value:ce,format:R.format,type:V,granularity:R.granularity}),D(!0)};(0,pa.Z)(function(){q({granularity:c,format:u,value:y,type:s})},[c,u,y,s]);var m=(0,N.useMemo)(function(){return R.format?hw(R.format).map(function(S){return ar(ar({},S),{},{label:i().createElement("div",{onClick:function(){return p(S.value,S.granularity)}},S.label)})}):[]},[R.format]),b=[{key:"date",value:"date",label:i().createElement("div",{onClick:function(){return f("date")}},"\u5355\u65E5\u671F")},{key:"range",value:"range",label:i().createElement("div",{onClick:function(){return f("range")}},"\u65E5\u671F\u533A\u95F4")}],w=i().createElement("div",{className:I()("".concat(F),Z)},i().createElement("div",{className:I()("".concat(F,"__item"),Z)},i().createElement(P.Dropdown,{menu:{items:m},trigger:["hover"]},i().createElement("a",{onClick:function(V){return V.preventDefault()},className:I()("".concat(F,"__item__info"),Z)},i().createElement(P.Space,null,(r=m.find(function(S){return S.value===R.format}))===null||r===void 0?void 0:r.label,i().createElement(M.DownOutlined,null))))),i().createElement("div",null,i().createElement(P.Dropdown,{menu:{items:b},trigger:["hover"]},i().createElement("a",{onClick:function(V){return V.preventDefault()},className:I()("".concat(F,"__item__info"),Z)},i().createElement(P.Space,null,(n=b.find(function(S){return S.value===R.type}))===null||n===void 0?void 0:n.label,i().createElement(M.DownOutlined,null))))));return Y(i().createElement("div",null,R.type==="date"&&i().createElement(i().Fragment,null,["year","month","day"].includes(R.granularity)?i().createElement(P.DatePicker,{bordered:_,size:E,open:j,showToday:!1,onOpenChange:function(V){return D(V)},value:R.value?pt()(typeof R.value=="string"?R.value:R.value[0],R.format):void 0,picker:R.granularity==="day"?"date":R.granularity,format:R.format,onChange:re,renderExtraFooter:function(){return a?w:null}}):i().createElement(P.DatePicker,{bordered:_,size:E,showNow:!1,open:j,onOpenChange:function(V){return D(V)},value:R.value?pt()(typeof R.value=="string"?R.value:R.value[0],R.format):void 0,showTime:{format:R.format},format:R.format,onChange:re,renderExtraFooter:function(){return a?w:null}})),R.type==="range"&&R.granularity&&i().createElement(i().Fragment,null,["year","month","day"].includes(R.granularity)?i().createElement(Bm,{bordered:_,size:E,open:j,onOpenChange:ee,value:R.value?[pt()(R.value[0],R.format),pt()(R.value[1],R.format)]:void 0,picker:R.granularity==="day"?"date":R.granularity,onChange:re,format:R.format,onCalendarChange:function(){B.current!==1?B.current+=1:D(!1)},renderExtraFooter:function(){return a?w:null}}):i().createElement(Bm,{bordered:_,size:E,open:j,onOpenChange:ee,value:R.value?[pt()(R.value[0],R.format),pt()(R.value[1],R.format)]:void 0,showTime:{format:R.format},onChange:re,onCalendarChange:function(){B.current!==3?B.current+=1:D(!1)},format:R.format,renderExtraFooter:function(){return a?w:null}}))))},Dw=xw,Tw=function(t){var r=t.indexOf("/")===-1,n=El.map(function(o){return{picker:o.picker,granularity:o.granularity,label:r?o.label:o.otherLabel,value:r?o.value:o.other}});return n};function po(e){"@babel/helpers - typeof";return po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},po(e)}function Fw(e,t,r){return t=Lw(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lw(e){var t=Nw(e,"string");return po(t)=="symbol"?t:String(t)}function Nw(e,t){if(po(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(po(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mw=(0,qe.l)("filter-setting-modal-date-item",function(e){var t=e.componentCls,r=e.colorText;return Fw({},t,{"&__filter":{marginBottom:"8px"},"&__field":{fontSize:"12px",fontWeight:700,color:r,height:"20px",lineHeight:"20px",marginBottom:"8px"}})});function yo(e){"@babel/helpers - typeof";return yo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yo(e)}function km(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function zt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?km(Object(r),!0).forEach(function(n){Rw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):km(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rw(e,t,r){return t=Bw(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bw(e){var t=kw(e,"string");return yo(t)=="symbol"?t:String(t)}function kw(e,t){if(yo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ym(e,t){return zw(e)||Hw(e,t)||Ww(e,t)||Yw()}function Yw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ww(e,t){if(e){if(typeof e=="string")return Wm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wm(e,t)}}function Wm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hw(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function zw(e){if(Array.isArray(e))return e}var Uw=function(t){var r=(0,Je.F)("formily-filter-setting-modal-date-item"),n=Mw(r),o=Ym(n,2),a=o[0],u=o[1],c=t.value,l=t.format,s=t.onChange,y=c.value,A=(0,N.useMemo)(function(){return l?Tw(l):[]},[l]),E=(0,N.useState)(function(){var D=A.find(function(F){return[F.granularity,F.value].includes(c.granularity)});return D||El[0]}),h=Ym(E,2),_=h[0],g=h[1],C=function(F){var L=y?jr(y[0],_==null?void 0:_.value):void 0;s(zt(zt({},c),{},{value:L,params:zt(zt({},c.params),{},{dateType:F})}))},x=function(F){var L=A.find(function(Y){return Y.value===F});if(L){var k=zt(zt({},c),{},{granularity:L.granularity,value:y?jr(y,L==null?void 0:L.value):void 0,params:zt(zt({},c.params),{},{format:L.value})});s(k),g(L)}},j=function(F){var L=F.value;s(zt(zt({},c),{},{value:L}))};return a(i().createElement(i().Fragment,null,i().createElement("div",{className:I()("".concat(r,"__filter"),u)},i().createElement("div",{className:I()("".concat(r,"__field"),u)},"\u65E5\u671F\u7C7B\u578B"),i().createElement(P.Radio.Group,{value:c.params.dateType||"date",onChange:function(F){return C(F.target.value)}},i().createElement(P.Radio,{value:"date"},"\u5355\u65E5\u671F"),i().createElement(P.Radio,{value:"range"},"\u65E5\u671F\u533A\u95F4"))),i().createElement("div",{className:I()("".concat(r,"__filter"),u)},i().createElement("div",{className:I()("".concat(r,"__field"),u)},"\u65F6\u95F4\u7C92\u5EA6"),i().createElement(P.Select,{size:"small",style:{width:"100%"},value:_.value,options:A,onChange:x})),i().createElement("div",{className:I()("".concat(r,"__filter"),u)},i().createElement("div",{className:I()("".concat(r,"__field"),u)},"\u9ED8\u8BA4\u503C"),i().createElement(Dw,{isRenderExtraFooter:!1,value:c.value,format:c.params.format,granularity:c.granularity,type:c.params.dateType,onChange:j}))))},Vw=Uw;function Hm(e,t){return Zw(e)||Qw(e,t)||Kw(e,t)||Gw()}function Gw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kw(e,t){if(e){if(typeof e=="string")return zm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zm(e,t)}}function zm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qw(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Zw(e){if(Array.isArray(e))return e}var Jw=function(t){var r=t.value,n=t.operator,o=t.size,a=o===void 0?"middle":o,u=t.bordered,c=u===void 0?!0:u,l=t.onChange,s=(0,N.useState)([null,null]),y=Hm(s,2),A=y[0],E=y[1];(0,N.useEffect)(function(){r&&(typeof r=="number"?n===">="?E([r,null]):n==="<="&&E([null,r]):E(r))},[r]);var h=function(g){var C=Hm(g,2),x=C[0],j=C[1];E(g),x?j?x<j?l([x,j],"BETWEEN"):l([j,x],"BETWEEN"):l(x,">="):l(j||void 0,"<=")};return i().createElement("div",null,i().createElement(P.InputNumber,{placeholder:"\u6700\u5C0F\u503C",bordered:c,size:a,value:A[0],onChange:function(g){return h([g,A[1]])}}),i().createElement("span",{style:{margin:"0 10px"}},"-"),i().createElement(P.InputNumber,{placeholder:"\u6700\u5927\u503C",bordered:c,size:a,value:A[1],onChange:function(g){return h([A[0],g])}}))},qw=Jw;function vo(e){"@babel/helpers - typeof";return vo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vo(e)}function Xw(e,t,r){return t=$w(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $w(e){var t=eP(e,"string");return vo(t)=="symbol"?t:String(t)}function eP(e,t){if(vo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tP=(0,qe.l)("filter-setting-modal-number-item",function(e){var t=e.componentCls,r=e.colorText;return Xw({},t,{"&__filter":{marginBottom:"8px"},"&__field":{fontSize:"12px",fontWeight:700,color:r,height:"20px",lineHeight:"20px",marginBottom:"8px"}})});function go(e){"@babel/helpers - typeof";return go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},go(e)}function Um(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Vm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Um(Object(r),!0).forEach(function(n){rP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Um(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rP(e,t,r){return t=nP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nP(e){var t=oP(e,"string");return go(t)=="symbol"?t:String(t)}function oP(e,t){if(go(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(go(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aP(e,t){return cP(e)||uP(e,t)||lP(e,t)||iP()}function iP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lP(e,t){if(e){if(typeof e=="string")return Gm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gm(e,t)}}function Gm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uP(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function cP(e){if(Array.isArray(e))return e}var sP=function(t){var r=(0,Je.F)("formily-filter-setting-modal-number-item"),n=tP(r),o=aP(n,2),a=o[0],u=o[1],c=t.value,l=t.onChange,s=c.value,y=c.operator,A=function(h,_){var g=Vm(Vm({},c),{},{value:h,operator:_});l(g)};return a(i().createElement("div",{className:I()("".concat(r,"__filter"),u)},i().createElement("div",{className:I()("".concat(r,"__field"),u)},"\u8BBE\u5B9A\u9ED8\u8BA4\u503C"),i().createElement(qw,{value:s,operator:y,onChange:A})))},fP=sP;function mP(e){return vP(e)||dP(e)||yP(e)||pP()}function pP(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yP(e,t){if(e){if(typeof e=="string")return wl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wl(e,t)}}function dP(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vP(e){if(Array.isArray(e))return wl(e)}function wl(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pl=function(t,r){var n=t.map(function(o){return{label:o,value:o,disabled:r}});return[{label:"\u5168\u90E8",value:"all"}].concat(mP(n))};function bo(e){"@babel/helpers - typeof";return bo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bo(e)}function gP(e,t,r){return t=bP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bP(e){var t=hP(e,"string");return bo(t)=="symbol"?t:String(t)}function hP(e,t){if(bo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SP=(0,qe.l)("filter-string-config",function(e){var t=e.componentCls;return gP({},t,{})});function Il(e,t){return EP(e)||OP(e,t)||CP(e,t)||_P()}function _P(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CP(e,t){if(e){if(typeof e=="string")return Km(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Km(e,t)}}function Km(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function OP(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function EP(e){if(Array.isArray(e))return e}var AP=function(t){var r=t.value,n=t.domain,o=t.filterType,a=t.size,u=a===void 0?"middle":a,c=t.bordered,l=c===void 0?!0:c,s=t.onChange,y=(0,N.useState)(r),A=Il(y,2),E=A[0],h=A[1],_=(0,N.useState)(),g=Il(_,2),C=g[0],x=g[1],j=(0,Je.F)("formily-filter-string-config"),D=SP(j),F=Il(D,2),L=F[0],k=F[1],Y=function(B){if(o==="single"){var W=typeof B=="string"?[B]:void 0;s(W),h(W)}else{if(typeof B=="string")return;if(B.includes("all")){var z=Pl(n,!0);x(z),s(["all"]),h(["all"])}else{var R=Pl(n,!1);x(R),s(B),h(B)}}};return(0,pa.Z)(function(){h(r)},[r]),(0,N.useEffect)(function(){if(n&&n.length){var Z=!!(o==="multiple"&&r&&r[0]==="all"),B=Pl(n,Z);x(B)}},[n,o]),L(i().createElement(i().Fragment,null,o==="single"&&i().createElement(P.Select,{showSearch:!0,size:u,bordered:l,style:{width:"100%",textAlign:"left"},placeholder:"\u8BF7\u9009\u62E9",value:E,options:C,onChange:Y}),o==="multiple"&&i().createElement(P.Select,{allowClear:!0,size:u,bordered:l,mode:"multiple",maxTagCount:"responsive",maxTagPlaceholder:"...",tagRender:function(B){return i().createElement(i().Fragment,null,B.label,"\u2002")},style:{width:"100%",textAlign:"left"},placeholder:"\u8BF7\u9009\u62E9",value:E,options:C,onChange:Y})))},wP=AP;function ho(e){"@babel/helpers - typeof";return ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ho(e)}function PP(e,t,r){return t=IP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IP(e){var t=jP(e,"string");return ho(t)=="symbol"?t:String(t)}function jP(e,t){if(ho(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ho(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xP=(0,qe.l)("filter-setting-modal-string-item",function(e){var t=e.componentCls,r=e.colorText;return PP({},t,{"&__filter":{marginBottom:"8px"},"&__field":{fontSize:"12px",fontWeight:700,color:r,height:"20px",lineHeight:"20px",marginBottom:"8px"}})});function So(e){"@babel/helpers - typeof";return So=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},So(e)}function Qm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qm(Object(r),!0).forEach(function(n){DP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DP(e,t,r){return t=TP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TP(e){var t=FP(e,"string");return So(t)=="symbol"?t:String(t)}function FP(e,t){if(So(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(So(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LP(e,t){return BP(e)||RP(e,t)||MP(e,t)||NP()}function NP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MP(e,t){if(e){if(typeof e=="string")return Zm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zm(e,t)}}function Zm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function RP(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function BP(e){if(Array.isArray(e))return e}var kP=function(t){var r,n=(0,Je.F)("formily-filter-setting-modal-string-item"),o=xP(n),a=LP(o,2),u=a[0],c=a[1],l=t.value,s=t.options,y=s===void 0?[]:s,A=t.onChange,E=function(g){A(xr(xr({},l),{},{params:xr(xr({},l.params),{},{filterType:g}),value:void 0}))},h=function(g){A(xr(xr({},l),{},{value:g}))};return u(i().createElement(i().Fragment,null,i().createElement("div",{className:I()("".concat(n,"__filter"),c)},i().createElement("div",{className:I()("".concat(n,"__field"),c)},"\u7B5B\u9009\u65B9\u5F0F"),i().createElement(P.Radio.Group,{value:(r=l.params)===null||r===void 0?void 0:r.filterType,onChange:function(g){return E(g.target.value)}},i().createElement(P.Radio,{value:"single"},"\u5355\u9009"),i().createElement(P.Radio,{value:"multiple"},"\u591A\u9009"))),i().createElement("div",{className:I()("".concat(n,"__filter"),c)},i().createElement("div",{className:I()("".concat(n,"__field"),c)},"\u8BBE\u5B9A\u9ED8\u8BA4\u503C"),i().createElement(wP,{value:l.value,domain:y,filterType:l.params.filterType,onChange:h}))))},YP=kP;function _o(e){"@babel/helpers - typeof";return _o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_o(e)}function WP(e,t,r){return t=HP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HP(e){var t=zP(e,"string");return _o(t)=="symbol"?t:String(t)}function zP(e,t){if(_o(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_o(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UP=(0,qe.l)("filter-setting-content",function(e){var t=e.componentCls,r=e.colorText;return WP({},t,{width:"100%",padding:"12px 12px 0","&__filter":{marginBottom:"8px"},"&__field":{fontSize:"12px",fontWeight:700,color:r,height:"20px",lineHeight:"20px",marginBottom:"8px"}})});function Co(e){"@babel/helpers - typeof";return Co=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Co(e)}function Jm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function VP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jm(Object(r),!0).forEach(function(n){GP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GP(e,t,r){return t=KP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KP(e){var t=QP(e,"string");return Co(t)=="symbol"?t:String(t)}function QP(e,t){if(Co(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Co(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Da(e,t){return XP(e)||qP(e,t)||JP(e,t)||ZP()}function ZP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JP(e,t){if(e){if(typeof e=="string")return qm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qm(e,t)}}function qm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qP(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function XP(e){if(Array.isArray(e))return e}var $P=function(t){var r=(0,Je.F)("formily-filter-setting-content"),n=UP(r),o=Da(n,2),a=o[0],u=o[1],c=t.value,l=t.options,s=t.onChange,y=(0,N.useState)(c),A=Da(y,2),E=A[0],h=A[1],_=(0,N.useState)("YYYY"),g=Da(_,2),C=g[0],x=g[1],j=(0,N.useState)([]),D=Da(j,2),F=D[0],L=D[1],k=!c.field,Y=function(W){var z=l.find(function(re){return re.value===W});if(z){var R,q;L((R=z==null?void 0:z.domain)!==null&&R!==void 0?R:[]),x((q=z==null?void 0:z.format)!==null&&q!==void 0?q:"YYYY");var ee=VP({},gw(z,E.id));h(ee),s(ee)}},Z=function(W){h(W),s(W)};return(0,N.useEffect)(function(){if(c.field&&l){var B,W=l.find(function(z){return z.value===c.field});L((B=W==null?void 0:W.domain)!==null&&B!==void 0?B:[]),(W==null?void 0:W.type)==="date"&&x((W==null?void 0:W.format)||"YYYY")}h(c)},[c,l]),E?a(i().createElement("div",{className:I()("".concat(r),u)},i().createElement("div",{className:I()("".concat(r,"__filter"),u)},i().createElement("div",{className:I()("".concat(r,"__field"),u)}," \u9009\u62E9\u7B5B\u9009\u5B57\u6BB5"),i().createElement(ju,{open:k,value:E.field,style:{width:"100%"},options:l,onChange:Y})),E.type==="string"&&i().createElement(YP,{value:E,options:F,onChange:Z}),E.type==="date"&&i().createElement(Vw,{value:E,format:C,onChange:Z}),E.type==="number"&&i().createElement(fP,{value:E,onChange:Z}))):null},eI=$P;function Oo(e){"@babel/helpers - typeof";return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oo(e)}function Dr(e,t,r){return t=tI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tI(e){var t=rI(e,"string");return Oo(t)=="symbol"?t:String(t)}function rI(e,t){if(Oo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Oo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xm=(0,qe.l)("filter-setting-filter-item",function(e){var t=e.componentCls,r=e.colorPrimary;return Dr(Dr({},t,Dr(Dr({display:"flex",alignItems:"center",margin:"5px 10px 5px 0",height:"32px"},"".concat(t,"__drag-icon"),{cursor:"move",opacity:0}),"".concat(t,"__infor"),{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",cursor:"pointer","&__field":{width:"100%"},"&__delete-icon":{fontSize:"12px",marginLeft:"5px",opacity:0},"&__delete-icon:hover":{color:r}})),"".concat(t,":hover"),Dr(Dr({},"".concat(t,"__drag-icon"),{opacity:1}),"".concat(t,"__infor__delete-icon"),{opacity:1}))});function $m(e,t){return iI(e)||aI(e,t)||oI(e,t)||nI()}function nI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oI(e,t){if(e){if(typeof e=="string")return ep(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ep(e,t)}}function ep(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aI(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function iI(e){if(Array.isArray(e))return e}var lI=function(e){var t=e.name,r=e.isEdit,n=e.onCancel,o=e.onChange,a=(0,N.useState)(""),u=$m(a,2),c=u[0],l=u[1],s=(0,Je.F)("formily-filter-setting-filter-item"),y=Xm(s),A=$m(y,2),E=A[0],h=A[1],_=(0,N.useCallback)(function(){c&&(c===t?n():o(c))},[c,t,o]);return(0,N.useEffect)(function(){r&&l(t)},[r,t]),E(i().createElement("div",{className:I()("".concat(s),h)},r?i().createElement(P.Input,{autoFocus:!0,allowClear:!0,value:c,size:"small",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",suffix:i().createElement(M.EnterOutlined,null),onPressEnter:_,onChange:function(C){return l(C.target.value)},onBlur:n}):i().createElement(P.Tooltip,{title:t},t)))};function Ta(e,t){return fI(e)||sI(e,t)||cI(e,t)||uI()}function uI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cI(e,t){if(e){if(typeof e=="string")return tp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tp(e,t)}}function tp(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sI(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function fI(e){if(Array.isArray(e))return e}var mI=function(t){var r=t.index,n=t.id,o=t.field,a=t.onChange,u=t.onDelete,c=t.onClickItem,l=t.onChangeSort,s=(0,Je.F)("formily-filter-setting-filter-item"),y=Xm(s),A=Ta(y,2),E=A[0],h=A[1],_=(0,N.useRef)(null),g=(0,N.useState)(!1),C=Ta(g,2),x=C[0],j=C[1],D=(0,tc.L)({accept:"DragDropBox",hover:function(z){if(_.current){var R=z.index,q=r;R!==q&&(l(R,q),z.index=q)}}}),F=Ta(D,2),L=F[1],k=(0,rc.c)({type:"DragDropBox",item:{id:n,index:r},isDragging:function(z){return r===z.getItem().index}}),Y=Ta(k,2),Z=Y[1],B=function(z){a(z),j(!1)};return Z(L(_)),E(i().createElement("div",{className:I()("".concat(s),h),ref:_},i().createElement("div",{className:"".concat(s,"__drag-icon")},i().createElement(M.HolderOutlined,null)),i().createElement("div",{className:"".concat(s,"__infor")},i().createElement("div",{className:"".concat(s,"__infor__field"),onClick:c},i().createElement(lI,{name:o,onChange:B,onCancel:function(){return j(!1)},isEdit:x})),i().createElement(P.Tooltip,{title:"\u70B9\u51FB\u4FEE\u6539\u540D\u79F0"},i().createElement("div",{className:"".concat(s,"__infor__delete-icon"),onClick:function(){return j(!0)}},i().createElement(M.EditOutlined,null))),i().createElement(P.Tooltip,{title:"\u70B9\u51FB\u5220\u9664"},i().createElement("div",{className:"".concat(s,"__infor__delete-icon"),onClick:u},i().createElement(M.DeleteOutlined,null))))))},pI=mI;function Eo(e){"@babel/helpers - typeof";return Eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eo(e)}function yI(e,t,r){return t=dI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dI(e){var t=vI(e,"string");return Eo(t)=="symbol"?t:String(t)}function vI(e,t){if(Eo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Eo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gI=(0,qe.l)("filter-setting-modal",function(e){var t=e.componentCls,r=e.colorBorder,n=e.colorText,o=e.colorBgTextHover,a=e.colorPrimary;return yI({},"".concat(t,"__content"),{display:"flex",minHeight:"400px",margin:"0 -24px","&__left":{width:"200px","&-item":{"&:hover":{background:o}},"&-selected":{background:o,color:n},"&__add-filter":{borderBottom:"1px solid ".concat(r),display:"flex",height:"34px",lineHeight:"34px",justifyContent:"space-between",paddingLeft:15,paddingRight:10,fontWeight:700,color:n,"&-btn":{cursor:"pointer","&:hover":{color:a},"&_disabled":{display:"none"}}}},"&__right":{flex:1,borderLeft:"1px solid ".concat(r)}})});function Ao(e){"@babel/helpers - typeof";return Ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ao(e)}function rp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function np(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rp(Object(r),!0).forEach(function(n){jl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jl(e,t,r){return t=bI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bI(e){var t=hI(e,"string");return Ao(t)=="symbol"?t:String(t)}function hI(e,t){if(Ao(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ao(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SI(e){return OI(e)||CI(e)||op(e)||_I()}function _I(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CI(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function OI(e){if(Array.isArray(e))return Dl(e)}function xl(e,t){return wI(e)||AI(e,t)||op(e,t)||EI()}function EI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function op(e,t){if(e){if(typeof e=="string")return Dl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dl(e,t)}}function Dl(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function AI(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function wI(e){if(Array.isArray(e))return e}var PI=function(t){var r=(0,Je.F)("formily-filter-setting-modal"),n=gI(r),o=xl(n,2),a=o[0],u=o[1],c=t.open,l=c===void 0?!1:c,s=t.value,y=s===void 0?[]:s,A=t.options,E=A===void 0?[]:A,h=t.onCancel,_=t.onChange,g=(0,N.useState)([]),C=xl(g,2),x=C[0],j=C[1],D=(0,N.useState)(),F=xl(D,2),L=F[0],k=F[1],Y=(0,N.useMemo)(function(){return x.length?x.map(function(ee){return ee.field}):[]},[x]),Z=function(re){var p=x.filter(function(f){return f.id!==re});k(p[0]),j(p)},B=function(re){k(re);var p=x.map(function(f){return f.id===re.id?re:f});j(p)},W=function(re,p){var f=x.slice(),m=f[Number(re)];f[Number(re)]=f[Number(p)],f[Number(p)]=m,j(f)},z=function(){var re={id:bi(),field:void 0},p=[].concat(SI(x),[re]);j(p),k(re)},R=function(){_(x)},q=(0,N.useMemo)(function(){if(!L)return[];var ee=Y.filter(function(re){return re!==L.field});return E.filter(function(re){return!ee.includes(re.value)})},[L]);return(0,N.useEffect)(function(){if(l)if(y.length)j(y),k((y==null?void 0:y[0])||[]);else{var ee={id:bi(),field:void 0};j([ee]),k(ee)}},[l]),a(i().createElement(P.Modal,{title:"\u7B5B\u9009\u5668\u8BBE\u7F6E",cancelText:"\u53D6\u6D88",okText:"\u786E\u5B9A",className:I()("".concat(r),u),width:800,open:l,onOk:R,onCancel:h,destroyOnClose:!0},i().createElement("div",{className:I()("".concat(r,"__content"),u)},i().createElement("div",{className:I()("".concat(r,"__content__left"),u)},i().createElement("div",{className:I()("".concat(r,"__content__left__add-filter"),u)},i().createElement("div",null,"\u7B5B\u9009\u548C\u53C2\u6570\u9879"),i().createElement("div",{className:I()("".concat(r,"__content__left__add-filter-btn"),jl({},"".concat(r,"__content__left__add-filter-btn_disabled"),Y.length===E.length),u)},i().createElement(M.PlusOutlined,{onClick:z}))),i().createElement("div",null,i().createElement($u.W,{backend:ec.PD},x.map(function(ee,re){return i().createElement("div",{key:"filters_drag_card".concat(re),className:I()("".concat(r,"__content__left-item"),jl({},"".concat(r,"__content__left-selected"),(L==null?void 0:L.id)===ee.id),u)},i().createElement(pI,{index:re,id:ee.id,field:ee.title,key:"filter_drag_card".concat(re),onChange:function(f){return B(np(np({},ee),{},{title:f}))},onChangeSort:W,onClickItem:function(){return k(ee)},onDelete:function(){return Z(ee.id)}}))})))),i().createElement("div",{className:I()("".concat(r,"__content__right"),u)},i().createElement("div",{className:I()("".concat(r,"__content__left__add-filter"),u)},i().createElement("div",null,"\u7B5B\u9009\u914D\u7F6E")),L&&i().createElement(eI,{value:L,onChange:B,options:q})))))},II=PI;function wo(e){"@babel/helpers - typeof";return wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wo(e)}function ap(e,t,r){return t=jI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jI(e){var t=xI(e,"string");return wo(t)=="symbol"?t:String(t)}function xI(e,t){if(wo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DI=(0,qe.l)("filter-setting-preview",function(e){var t=e.componentCls,r=e.antCls;return ap({},t,ap({width:"100%"},"".concat(r,"-descriptions-item-content"),{maxHeight:"100px",overflowY:"auto"}))});function TI(e,t){return MI(e)||NI(e,t)||LI(e,t)||FI()}function FI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LI(e,t){if(e){if(typeof e=="string")return ip(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ip(e,t)}}function ip(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NI(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function MI(e){if(Array.isArray(e))return e}var RI=function(t){var r=(0,Je.F)("formily-filter-setting-preview"),n=DI(r),o=TI(n,2),a=o[0],u=o[1],c=t.filters,l=c===void 0?[]:c,s=(0,N.useMemo)(function(){if(!l.length)return[];var y=l.map(function(A,E){if(A.type==="date"){var h,_,g;if((0,oe.isEmpty)(A.value))return{key:E,label:A.title,children:"\u4E0D\u9650"};var C=A.params.dateType==="date"?pt()((h=A.value)===null||h===void 0?void 0:h[0]).format(A.params.format):"".concat(pt()((_=A.value)===null||_===void 0?void 0:_[0]).format(A.params.format)," \u81F3 ").concat(pt()((g=A.value)===null||g===void 0?void 0:g[1]).format(A.params.format));return{key:E,label:A.title,children:C}}if(A.type==="number"){if(A.operator==="BETWEEN"){var x,j;return{key:E,label:A.title,children:"".concat((x=A.value)===null||x===void 0?void 0:x[0]," ~ ").concat((j=A.value)===null||j===void 0?void 0:j[1])}}return{key:E,label:A.title,children:A.value?"".concat(A.operator).concat(A.value):"\u4E0D\u9650"}}return{key:E,label:A.title,children:A.value?A.value&&A.value.includes("all")?"\u5168\u90E8":"\u5305\u542B\uFF1A".concat(A.value.toString()):"\u4E0D\u9650"}});return y},[l]);return l.length?a(i().createElement("div",{className:I()("".concat(r),u)},i().createElement("p",null,"\u9ED8\u8BA4\u7B5B\u9009\uFF1A"),i().createElement(P.Descriptions,{items:s,column:1}))):null},BI=RI;function Po(e){"@babel/helpers - typeof";return Po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Po(e)}function lp(e,t,r){return t=kI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kI(e){var t=YI(e,"string");return Po(t)=="symbol"?t:String(t)}function YI(e,t){if(Po(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Po(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WI=(0,qe.l)("filter-setting",function(e){var t=e.componentCls;return lp(lp({},t,{display:"inline-block",width:"100%"}),"".concat(t,"__list"),{"&__btn":{width:"100%"}})});function Tl(e,t){return VI(e)||UI(e,t)||zI(e,t)||HI()}function HI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zI(e,t){if(e){if(typeof e=="string")return up(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return up(e,t)}}function up(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function UI(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function VI(e){if(Array.isArray(e))return e}var GI=function(t){var r=(0,Je.F)("formily-filter-setting"),n=WI(r),o=Tl(n,2),a=o[0],u=o[1],c=t.options,l=t.value,s=l===void 0?[]:l,y=t.onChange,A=(0,N.useState)(!1),E=Tl(A,2),h=E[0],_=E[1],g=(0,N.useState)(s),C=Tl(g,2),x=C[0],j=C[1];(0,pa.Z)(function(){j(s)},[s]);var D=function(){_(!1)},F=function(k){y&&y(k),j(k),_(!1)};return a(i().createElement("div",{className:I()("".concat(r),u)},i().createElement("div",{className:I()("".concat(r,"__list"),u)},i().createElement(BI,{filters:x}),i().createElement(P.Button,{className:"".concat(r,"__list__btn"),onClick:function(){return _(!0)}},x.length?"\u7F16\u8F91":"\u70B9\u51FB\u914D\u7F6E")),i().createElement(II,{open:h,onCancel:D,onChange:F,value:x,options:c})))},KI=(0,st.connect)(GI),QI=KI,ZI=(0,st.createSchemaField)({components:{FormItem:vt.FormItem,Switch:vt.Switch,Input:vt.Input,Select:vt.Select,FormCollapse:Ei,FieldSelect:wi,FormTab:vt.FormTab,Radio:vt.Radio,Checkbox:vt.Checkbox,NumberPicker:vt.NumberPicker,ArrayItems:vt.ArrayItems,Space:vt.Space,FormGrid:vt.FormGrid,ControlPositionSelect:XA,TimeGranularitySelect:vw,FilterConfiguration:QI}}),JI=function(t){return i().createElement(ZI,{schema:t.schema,components:t.components})},qI=JI,cp;function XI(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var $I=function(){var t=(0,ne.Sr)(),r=t.antCls,n=t.colorText,o=t.colorTextTertiary,a=t.colorSplit;return{widgetForm:(0,G.iv)(cp||(cp=XI([`
      `,`-formily-item-label {
        color: `,`;
      }

      `,`-formily-item-asterisk {
        color: `,`;
      }

      `,`-formily-item-label-tooltip-icon {
        color: `,`;
      }

      `,`-formily-item {
        margin-bottom: 8px;
        padding-bottom: 5px;
        border-bottom: 1px solid `,`;
      }

      `,`-formily-item:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
      }

      `,"-formily-item ",`-formily-item-control-content-component {
        display: flex;
        align-items: center;
        justify-content: flex-end;
      }
    `])),r,n,r,o,r,o,r,a,r,r,r)}},ej=$I;function Io(e){"@babel/helpers - typeof";return Io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Io(e)}function sp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function tj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sp(Object(r),!0).forEach(function(n){rj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rj(e,t,r){return t=nj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nj(e){var t=oj(e,"string");return Io(t)=="symbol"?t:String(t)}function oj(e,t){if(Io(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Io(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aj=function(t){var r=t.className,n=t.initialValues,o=t.registerForm,a=t.registerFormProps,u=t.onChange,c=(0,ne.F8)("widget-form"),l=ej(),s=(0,N.useMemo)(function(){var h=typeof o=="function"?o(a):o;return h},[o,a]),y=(0,$r.Z)(function(h){h.submit().then(function(_){var g=s.fromValues?s.fromValues(_):_;u(g)}).catch(function(_){})}),A=(0,N.useMemo)(function(){var h=s.schema;return{type:"object",properties:tj({},h)}},[s.schema]),E=(0,N.useMemo)(function(){var h=s.toValues?s.toValues(n):n,_=(0,tr.createForm)({initialValues:h,effects:function(){(0,tr.onFormValuesChange)((0,oe.debounce)(y,150))}});return _},[A]);return i().createElement(vt.Form,{className:I()(c,l.widgetForm,r),form:E,labelCol:8,wrapperCol:16,colon:!1,layout:"horizontal",labelAlign:"left",wrapperAlign:"right"},i().createElement(qI,{schema:A,components:s.components}))},ij=aj;function jo(e){"@babel/helpers - typeof";return jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jo(e)}function fp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fp(Object(r),!0).forEach(function(n){lj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lj(e,t,r){return t=uj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uj(e){var t=cj(e,"string");return jo(t)=="symbol"?t:String(t)}function cj(e,t){if(jo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sj=function(t){var r=t.className,n=t.widgetSchema,o=t.implementWidget,a=(0,ne.sZ)(),u=a.state,c=a.updateState,l=(0,ne.ox)(),s=l.appService,y=YA(u.widgets,n.id),A=(0,N.useMemo)(function(){var F=s.getContainerWidgetSlotMap(y,n.id),L=br(br({},n.properties),{},{slots:br({},F)});return L},[s,n.id,n.properties,y]),E=o.registerForm,h=(0,N.useMemo)(function(){return s.getAtomWidgets(y,n.id)},[s,n.id,y]),_=(0,ne.UT)(),g=_.editorDatasets,C=(0,N.useMemo)(function(){return g.map(function(F){var L=F.columns.map(function(k){var Y=k.type==="string"?F.getColumnDomain(k.name):[];return br(br({},k),{},{domain:Y})});return br(br({},F.schema),{},{columns:L,data:[]})})},[g]),x=(0,N.useMemo)(function(){return s.getImplementServices()},[s]),j=(0,N.useMemo)(function(){return{atomWidgets:h,datasets:C,layers:u.layers,widgetId:n.id,services:x}},[h,C,u.layers,n.id,x]),D=(0,N.useCallback)(function(F){if(F.slots){var L=F.slots;c(function(k){k.widgets.forEach(function(Y){var Z;if(((Z=Y.container)===null||Z===void 0?void 0:Z.id)===n.id){var B=L[Y.container.slot];B&&B.find(function(W){return W===Y.id})||(Y.container=Dt.Vw)}else(0,oe.forOwn)(L,function(W,z){W.find(function(R){return R===Y.id})&&(Y.container={id:n.id,slot:z})})})})}c(function(k){var Y=k.widgets.findIndex(function(Z){return Z.id===n.id});Y!==-1&&(k.widgets[Y].properties=(0,oe.omit)(F,"slots"))})},[]);return i().createElement("div",{className:I()(r)},i().createElement(ij,{initialValues:A,registerForm:E,registerFormProps:j,onChange:D}))},fj=sj;function mp(e,t){return dj(e)||yj(e,t)||pj(e,t)||mj()}function mj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pj(e,t){if(e){if(typeof e=="string")return pp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pp(e,t)}}function pp(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yj(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function dj(e){if(Array.isArray(e))return e}var vj=function(t){var r=t.className,n=t.item,o=(0,ne.F8)("widget-list"),a=Im(),u=(0,ne.ox)(),c=u.appService,l=(0,ne.sZ)(),s=l.state,y=l.updateState,A=(0,N.useState)(""),E=mp(A,2),h=E[0],_=E[1],g=(0,N.useState)(!1),C=mp(g,2),x=C[0],j=C[1],D=(0,N.useMemo)(function(){var k=n.widgets.reduce(function(Y,Z){return Y.set(Z.metadata.name,Z)},new Map);return s.widgets.filter(function(Y){return k.has(Y.type)})},[n.widgets,s.widgets]),F=function(Y){y(function(Z){var B=Z.widgets.findIndex(function(W){return W.id===Y.id});Z.widgets.splice(B,1)})};if((0,oe.isEmpty)(D))return null;var L=D.filter(function(k){var Y=c.getImplementWidget(k.type);return!(0,oe.isUndefined)(Y)}).map(function(k){var Y,Z=c.getImplementWidget(k.type),B=function(q){y(function(ee){var re=ee.widgets.findIndex(function(p){return p.id===k.id});ee.widgets[re].metadata.name=q,j(!1),_("")})},W=[{key:"editWidget",label:"\u4FEE\u6539\u540D\u79F0",onClick:function(){j(!0)}}],z=n.category===Dt.zi.Layout;return z||W.push({key:"deleteWidget",label:"\u5220\u9664\u7EC4\u4EF6",onClick:function(){F(k)}}),{key:k.id,className:I()("".concat(o,"__panel"),a.panel),label:i().createElement(rt,{name:k==null||(Y=k.metadata)===null||Y===void 0?void 0:Y.name,isEdit:h===k.id&&x,onChange:function(q){return B(q)},onCancel:function(){return j(!1)}}),extra:i().createElement("div",{onClick:function(q){q.stopPropagation()}},i().createElement(P.Dropdown,{onOpenChange:function(q){return _(q?k.id:"")},menu:{items:W}},i().createElement(M.MoreOutlined,null))),children:i().createElement(fj,{key:k.id,widgetSchema:k,implementWidget:Z})}});return i().createElement("div",{className:I()(r,"".concat(o,"__widget-group"),a.widgetGroup)},i().createElement("p",{className:I()("".concat(o,"__widget-group-title"),a.widgetGroupTitle)},n.categoryName),i().createElement(P.Collapse,{defaultActiveKey:[],ghost:!0,expandIcon:function(Y){var Z=Y.isActive;return i().createElement(M.CaretRightOutlined,{rotate:Z?90:0})},items:L}))},gj=vj,bj=function(t){var r=(0,ne.F8)("widget-list"),n=Im(),o=(0,ne.ox)(),a=o.appService,u=(0,N.useMemo)(function(){return a.getImplementWidgets()},[a]),c=(0,N.useMemo)(function(){var l=(0,im.cq)(u);return(0,oe.isEmpty)(l)?null:l.map(function(s){return i().createElement(gj,{key:s.category,item:s})})},[u]);return i().createElement("div",{className:I()(r,n.widgetList,t.className)},c)},hj=bj,yp,dp,vp,gp,bp,hp,Sp,_p;function ir(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Sj=function(){var t=(0,ne.Sr)(),r=t.colorSplit;return{panel:(0,G.iv)(yp||(yp=ir([`
      position: relative;
      height: 100%;
    `]))),panelContent:(0,G.iv)(dp||(dp=ir([`
      height: 100%;
    `]))),panelContentHidden:(0,G.iv)(vp||(vp=ir([`
      display: none;
    `]))),panelHeader:(0,G.iv)(gp||(gp=ir([`
      display: flex;
      justify-content: space-between;
      margin: 0 20px;
      padding: 15px 0 15px;
      border-bottom: 1px solid `,`;
    `])),r),panelTitle:(0,G.iv)(bp||(bp=ir([`
      font-weight: 500;
      font-size: 16px;
    `]))),panelAddIcon:(0,G.iv)(hp||(hp=ir([`
      font-size: 16px !important;
    `]))),widgetList:(0,G.iv)(Sp||(Sp=ir([`
      height: calc(100% - 57px);
      padding: 10px 20px;
      overflow-y: auto;
    `]))),attribute:(0,G.iv)(_p||(_p=ir([`
      height: 100%;
    `])))}},_j=Sj;function xo(e){"@babel/helpers - typeof";return xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xo(e)}function Cp(e,t,r){return t=Cj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cj(e){var t=Oj(e,"string");return xo(t)=="symbol"?t:String(t)}function Oj(e,t){if(xo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Op(e,t){return Pj(e)||wj(e,t)||Aj(e,t)||Ej()}function Ej(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aj(e,t){if(e){if(typeof e=="string")return Ep(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ep(e,t)}}function Ep(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wj(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,u,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(y){s=!0,o=y}finally{try{if(!l&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}function Pj(e){if(Array.isArray(e))return e}var Ij=P.theme.useToken,jj=function(t){var r=(0,ne.F8)("widgets-panel"),n=_j(),o=(0,N.useState)(!1),a=Op(o,2),u=a[0],c=a[1],l=(0,N.useState)(!1),s=Op(l,2),y=s[0],A=s[1],E=Ij(),h=E.token,_=function(){A(!0)};return i().createElement("div",{className:I()(r,n.panel,t.className)},i().createElement("div",{className:I()("".concat(r,"__content"),n.panelContent,Cp(Cp({},"".concat(r,"__content_hidden"),u),n.panelContentHidden,u))},i().createElement("div",{className:I()("".concat(r,"__header"),n.panelHeader)},i().createElement("div",{className:I()("".concat(r,"__title"),n.panelTitle)},"\u7EC4\u4EF6"),i().createElement(P.Button,{size:"small",type:"link",id:"LITourAddAnalysisWidget",icon:i().createElement(M.AppstoreAddOutlined,{style:{color:h.colorPrimary},className:"li-widgets-panel__add-icon"}),onClick:_})),i().createElement(hj,{className:I()("".concat(r,"__widget-list"),n.widgetList)})),y&&i().createElement(BA,{open:y,onClose:function(){A(!1)}}))},xj=jj,Dj=(0,Se.BP)({version:"v0.1",component:xj,metadata:{name:"WidgetsPanel",displayName:"\u7EC4\u4EF6\u914D\u7F6E",description:"\u7EC4\u4EF6\u9762\u677F"},container:{type:"SideNav",slot:"menuPanel"},menu:{name:"\u7EC4\u4EF6",key:"widgets",icon:i().createElement(M.LayoutOutlined,null)}})},76750:function(Pt,ot,Q){"use strict";Q.d(ot,{A:function(){return et}});var Se=Q(13382);function P(pe){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},P(pe)}function oe(pe,ae){var se=Object.keys(pe);if(Object.getOwnPropertySymbols){var ve=Object.getOwnPropertySymbols(pe);ae&&(ve=ve.filter(function(Ae){return Object.getOwnPropertyDescriptor(pe,Ae).enumerable})),se.push.apply(se,ve)}return se}function N(pe){for(var ae=1;ae<arguments.length;ae++){var se=arguments[ae]!=null?arguments[ae]:{};ae%2?oe(Object(se),!0).forEach(function(ve){i(pe,ve,se[ve])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(se)):oe(Object(se)).forEach(function(ve){Object.defineProperty(pe,ve,Object.getOwnPropertyDescriptor(se,ve))})}return pe}function i(pe,ae,se){return ae=Ne(ae),ae in pe?Object.defineProperty(pe,ae,{value:se,enumerable:!0,configurable:!0,writable:!0}):pe[ae]=se,pe}function Ne(pe){var ae=I(pe,"string");return P(ae)=="symbol"?ae:String(ae)}function I(pe,ae){if(P(pe)!="object"||!pe)return pe;var se=pe[Symbol.toPrimitive];if(se!==void 0){var ve=se.call(pe,ae||"default");if(P(ve)!="object")return ve;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ae==="string"?String:Number)(pe)}function ne(pe,ae){return $e(pe)||G(pe,ae)||Ue(pe,ae)||Ie()}function Ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ue(pe,ae){if(pe){if(typeof pe=="string")return lt(pe,ae);var se=Object.prototype.toString.call(pe).slice(8,-1);if(se==="Object"&&pe.constructor&&(se=pe.constructor.name),se==="Map"||se==="Set")return Array.from(pe);if(se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se))return lt(pe,ae)}}function lt(pe,ae){(ae==null||ae>pe.length)&&(ae=pe.length);for(var se=0,ve=new Array(ae);se<ae;se++)ve[se]=pe[se];return ve}function G(pe,ae){var se=pe==null?null:typeof Symbol!="undefined"&&pe[Symbol.iterator]||pe["@@iterator"];if(se!=null){var ve,Ae,je,Ce,J=[],K=!0,U=!1;try{if(je=(se=se.call(pe)).next,ae===0){if(Object(se)!==se)return;K=!1}else for(;!(K=(ve=je.call(se)).done)&&(J.push(ve.value),J.length!==ae);K=!0);}catch(ue){U=!0,Ae=ue}finally{try{if(!K&&se.return!=null&&(Ce=se.return(),Object(Ce)!==Ce))return}finally{if(U)throw Ae}}return J}}function $e(pe){if(Array.isArray(pe))return pe}var tt=Object.entries(Se.Z.schemeGroups).reduce(function(pe,ae){var se=ne(ae,2),ve=se[0],Ae=se[1];return N(N({},pe),Ae.reduce(function(je,Ce){return N(N({},je),{},i({},Ce,ve))},{}))},{}),et=Object.entries(Se.Z).filter(function(pe){var ae=ne(pe,1),se=ae[0];return se!=="schemeGroups"}).map(function(pe){var ae=ne(pe,2),se=ae[0],ve=ae[1];return Object.entries(ve).map(function(Ae){var je=ne(Ae,2),Ce=je[0],J=je[1];return{name:"ColorBrewer ".concat(se,"-").concat(Ce),type:tt[se],category:"ColorBrewer",colors:J}})}).flat()},36786:function(){}}]);
