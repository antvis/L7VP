"use strict";(self.webpackChunk_antv_li_website=self.webpackChunk_antv_li_website||[]).push([[944],{93707:function(N,v,e){e.d(v,{wy:function(){return p},QR:function(){return r},nK:function(){return A},z2:function(){return z}});var S=e(69024),i=e.n(S),E=e(81821),m=e(28869),p=function(){var f=E.Modal.useModal(),n=i()(f,2),g=n[0],o=n[1],h=(0,m.TH)(),y=function(){h.pathname.includes("/builder/")||h.pathname.includes("/app/")?m.m8.push({pathname:"/project"}):m.m8.push({pathname:"/case"})};return{emptyModal:function(j){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y,T=5,x,s,F=g.warning({title:j,content:"".concat(T," \u79D2\u540E\u4F1A\u81EA\u52A8\u9000\u5230\u4E0A\u4E00\u9875\u9762\u3002"),onOk:function(){x&&clearInterval(x),s&&clearTimeout(s),I()}});x=setInterval(function(){T-=1,F.update({content:"".concat(T," \u79D2\u540E\u81EA\u52A8\u4F1A\u9000\u5230\u4E0A\u4E00\u9875\u9762\u3002")})},1e3),s=setTimeout(function(){clearInterval(x),F.destroy(),I()},T*1e3)},emptyContextHolder:o}},l=e(87363);function t(M){var f="https://private-alipayobjects.alipay.com/alipay-rmsdeploy-image/rmsportal/RKuAiriJqrUhyqW.png",n=new Image,g,o=function(y){g||(g=!0,n.src="",M(y))};return n.onload=function(){return o("responded")},n.onerror=function(){return o("error")},n.src=f,setTimeout(function(){return o("timeout")},1500)}var d="L7VP_DOT_NOT_SHOW_PROMPT_MODAL",a;function A(){var M=(0,l.useState)(!1),f=i()(M,2),n=f[0],g=f[1];return(0,l.useEffect)(function(){var o;(o=a)!==null&&o!==void 0||(a=new Promise(function(h){t(function(y){return h(y!=="timeout"&&y!=="error")})})),a.then(g)},[]),n}function r(){var M=["li.antv.antgroup.com","locationinsight.antv.antgroup.com"].includes(window.location.hostname),f=A(),n=E.Modal.useModal(),g=i()(n,2),o=g[0],h=g[1],y=M&&f;return(0,l.useEffect)(function(){if(y){var O=window.localStorage.getItem(d);if(!(O&&O!=="true"&&Date.now()-new Date(O).getTime()<5*24*60*60*1e3)){var j=function(){window.localStorage.setItem(d,new Date().toISOString())},I=function(){var x=window.location.href.replace(window.location.host,"li.antgroup-inc.cn");window.location.replace(x)};o.confirm({icon:null,title:"\u63D0\u793A",content:"\u5185\u7F51\u7528\u6237\u63A8\u8350\u8BBF\u95EE\u5185\u7F51\u7248\u4EE5\u83B7\u5F97\u5B8C\u6574\u7684\u529F\u80FD\u4F53\u9A8C\uFF5E",cancelText:"5 \u5929\u5185\u4E0D\u518D\u663E\u793A",okText:"\u7ACB\u5373\u524D\u5F80",onCancel:j,onOk:I})}}},[y]),h}var c=e(51490),P=e.n(c),k=e(91055),L=e.n(k),b=e(88104),J=e.n(b),$=e(25435),w=e(6079),Q=e(12611),X=e(9256),B=e(81309),z=function(f){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=(0,l.useState)([]),o=i()(g,2),h=o[0],y=o[1],O=(0,l.useState)(!1),j=i()(O,2),I=j[0],T=j[1],x=(0,l.useState)(null),s=i()(x,2),F=s[0],Z=s[1],U=function(){var K=J()(P()().mark(function H(){var R,W,G;return P()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return T(!0),u.prev=1,u.next=4,(0,B.nl)();case 4:return R=u.sent,Array.isArray(f)&&(R=R.filter(function(D){return f.includes(D.assetId)})),R=R.map(function(D){return D.enable===!1?L()(L()({},D),{},{urls:[]}):D}),W=n.sandbox?L()(L()({},(0,Q.isObject)(n.sandbox)?n.sandbox:{}),{},{injectEnv:(0,X.Rz)()}):!1,u.next=10,(0,$.loadAssetPackages)(R,L()(L()({},n),{},{sandbox:W}));case 10:G=u.sent,y(G),u.next=17;break;case 14:u.prev=14,u.t0=u.catch(1),Z(new Error("\u8D44\u4EA7\u8BF7\u6C42\u6216\u52A0\u8F7D\u5931\u8D25, ".concat(u.t0)));case 17:return u.prev=17,T(!1),u.finish(17);case 20:case"end":return u.stop()}},H,null,[[1,14,17,20]])}));return function(){return K.apply(this,arguments)}}();return(0,w.Z)(function(){U()},[f]),{assets:h,loading:I,error:F}}},88472:function(N,v,e){e.r(v),e.d(v,{default:function(){return L}});var S=e(69024),i=e.n(S),E=e(25435),m=e(81821),p=e(87363),l=e(28869),t={app:"app___RgPYz",header:"header___DVZmr",left:"left___iICbu",title:"title___mqrtD",actions:"actions___zOxzv",runtimeApp:"runtimeApp___gLFdu"},d=e(28535),a=e(9256),A=e(81309),r=e(93707),c=e(70293),P=m.theme.useToken,k=function(){var J=(0,l.UO)(),$=J.id,w=$===void 0?"":$,Q=(0,l.lr)(),X=i()(Q,1),B=X[0],z=B.get("type")||"project",M=B.get("embed")||"false",f=M==="true",n=z==="case",g=(0,p.useState)([]),o=i()(g,2),h=o[0],y=o[1],O=P(),j=O.token,I=(0,p.useMemo)(function(){return new E.LIRuntimeApp({assets:[]})},[]),T=(0,p.useState)(),x=i()(T,2),s=x[0],F=x[1],Z=(0,r.z2)(h),U=Z.assets,K=(0,r.wy)(),H=K.emptyModal,R=K.emptyContextHolder;(0,p.useMemo)(function(){return I.installAssets(U)},[U]),(0,p.useEffect)(function(){var V=function(Y){y(Y.assetPackageIds),F(Y.applicationConfig),document.title="".concat(Y.applicationConfig.metadata.name),(0,a.lF)(13,{c1:z,c2:w})};n?(0,A.S)(w).then(function(C){V(C)}).catch(function(C){H(C)}):(0,A.e5)(w).then(function(C){V(C)}).catch(function(C){H(C)})},[w]);var W=function(){l.m8.push(n?"/case":"/project")},G=function(){var C={projectName:"".concat(s==null?void 0:s.metadata.name,"_copy"),description:(s==null?void 0:s.metadata.description)||"",applicationConfig:s,assetPackageIds:h};(0,A.$L)(C).then(function(Y){l.m8.push({pathname:"/project"})}).catch(function(){H("\u590D\u5236\u5230\u9879\u76EE\u5931\u8D25")})},q=I.App,u=!!U.length&&s;if(!u)return null;var D=(0,c.jsxs)("div",{className:t.header,style:{color:j.colorText,backgroundColor:j.colorBgElevated},children:[(0,c.jsxs)("div",{className:t.left,children:[(0,c.jsx)(d.Z,{onClick:W}),(0,c.jsx)("p",{className:t.title,children:s.metadata.name})]}),!f&&n&&(0,c.jsx)("div",{className:t.actions,children:(0,c.jsx)(m.Space,{children:n&&(0,c.jsx)(m.Button,{size:"middle",type:"primary",onClick:G,children:"\u4F7F\u7528\u6848\u4F8B"})})})]});return(0,c.jsxs)("div",{className:t.app,children:[D,R,(0,c.jsx)(q,{className:t.runtimeApp,config:s})]})},L=k},28535:function(N,v,e){e.d(v,{Z:function(){return p}});var S={logo:"logo___wZlN1"},i=e(90527),E=e(70293),m=function(t){return(0,E.jsx)("div",{className:S.logo,onClick:t==null?void 0:t.onClick,children:(0,E.jsx)("img",{src:i.Oi})})},p=m},164:function(N,v,e){var S=e(87363),i=Symbol.for("react.element"),E=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,p=S.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function t(d,a,A){var r,c={},P=null,k=null;A!==void 0&&(P=""+A),a.key!==void 0&&(P=""+a.key),a.ref!==void 0&&(k=a.ref);for(r in a)m.call(a,r)&&!l.hasOwnProperty(r)&&(c[r]=a[r]);if(d&&d.defaultProps)for(r in a=d.defaultProps,a)c[r]===void 0&&(c[r]=a[r]);return{$$typeof:i,type:d,key:P,ref:k,props:c,_owner:p.current}}v.Fragment=E,v.jsx=t,v.jsxs=t},70293:function(N,v,e){N.exports=e(164)},6079:function(N,v,e){e.d(v,{Z:function(){return l}});var S=e(87363),i=e(54335),E=e.n(i),m=function(t,d){return t===void 0&&(t=[]),d===void 0&&(d=[]),E()(t,d)},p=function(t){return function(d,a){var A=(0,S.useRef)(),r=(0,S.useRef)(0);(a===void 0||!m(a,A.current))&&(r.current+=1),A.current=a,t(d,[r.current])}},l=p(S.useEffect)}}]);
