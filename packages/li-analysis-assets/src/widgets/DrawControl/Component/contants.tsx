import type { TooltipPlacement } from 'antd/es/tooltip';
import React from 'react';
import type { DrawStyle } from '../types';

export const CLS_PREFIX = 'li-analysis-draw-widget';

export const DrawIcon = () => {
  return (
    <svg
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      width="0.9em"
      height="0.9em"
      style={{ fill: 'currentcolor' }}
    >
      <path d="M284.138785 892.100946h-100.79622a93.890879 93.890879 0 0 0-51.358074-51.242878V183.180331c23.826307-9.158057 42.13602-29.272502 51.358074-51.249278h654.330662c14.725848 34.782696 49.495744 58.615402 87.983901 58.615402 53.150007 0 95.292427-42.148819 95.292426-95.254028 0-53.169206-42.14242-95.254028-95.292426-95.254028-40.344087 0-75.177981 23.826307-87.983901 58.615401H183.342565A96.252391 96.252391 0 0 0 95.294667 0.102396C42.14466 0.102396 0.00224 42.251216 0.00224 95.356424c0 40.292889 23.826307 75.075585 58.6602 87.887904v657.549742A94.300464 94.300464 0 0 0 0.00224 928.745972C0.00224 981.915178 42.208657 1024 95.358664 1024c40.344087 0 75.113983-23.826307 87.983901-58.615402h100.79622a36.760221 36.760221 0 0 0 36.625826-36.638626 36.760221 36.760221 0 0 0-36.625826-36.638626z m97.148357 47.601415c-3.654263 12.81232 9.151657 25.618239 21.957576 22.034374l152.154295-42.14882-131.918253-131.899053-42.264016 152.013499h0.063998z m562.686099-606.249265c-16.460183-16.460183-43.99195-14.66185-62.308063 1.86233L817.501184 399.383423l128.327987 128.238391 64.163994-64.061598c18.316113-18.380111 18.316113-45.86068 1.791933-62.320862l-67.811857-67.773459z m-476.564529 408.432683l124.680125 131.963052 317.044111-309.588391-128.263991-128.25119-313.524242 305.882929h0.063997z" />
    </svg>
  );
};

export const Icons = (type: string) => {
  return (
    <svg style={{ fill: 'currentcolor' }} width="26px" height="26px">
      <use xlinkHref={`#l7draw-${type}`} />
    </svg>
  );
};

export const On = () => {
  return (
    <svg
      style={{ fill: 'currentcolor' }}
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      width="1.3em"
      height="1.3em"
    >
      <path d="M512 209.472c268.8 0 428.8 262.4 435.2 268.8l12.8 19.2-12.8 19.2c-6.4 6.4-166.4 268.8-435.2 268.8-268.8 0-428.8-262.4-435.2-268.8l-12.8-19.2 12.8-19.2c6.4-12.8 166.4-268.8 435.2-268.8z m0 64c-198.4 0-332.8 172.8-371.2 224 38.4 51.2 172.8 224 371.2 224 198.4 0 332.8-172.8 371.2-224-38.4-51.2-172.8-224-371.2-224z m0 64c89.6 0 160 70.4 160 160s-70.4 160-160 160-160-70.4-160-160 70.4-160 160-160z m0 64c-51.2 0-96 44.8-96 96s44.8 96 96 96 96-44.8 96-96-44.8-96-96-96z" />
    </svg>
  );
};

export const Off = () => {
  return (
    <svg
      style={{ fill: 'currentcolor' }}
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      width="1.3em"
      height="1.3em"
    >
      <path d="M190.656 146.304l683.392 683.328-45.312 45.312L145.408 191.552l45.248-45.248z m46.144 176.64l44.8 44.8c-70.4 51.2-121.6 108.8-140.8 140.8 38.4 51.2 172.8 224 371.2 224 38.4 0 76.8-6.4 115.2-19.2l51.2 51.2c-51.2 19.2-102.4 32-166.4 32-268.8 0-428.8-256-435.2-268.8l-12.8-19.2 12.8-12.8c6.4-6.4 57.6-96 160-172.8z m275.2-102.4c268.8 0 428.8 256 435.2 268.8l12.8 19.2-12.8 19.2c0 6.4-57.6 96-147.2 166.4l-44.8-44.8c64-51.2 115.2-115.2 134.4-140.8-38.4-51.2-172.8-224-371.2-224-44.8 0-83.2 6.4-115.2 19.2l-51.2-51.2c44.8-19.2 102.4-32 160-32z m-147.2 230.4l51.2 51.2v6.4c0 51.2 44.8 96 96 96h6.4l51.2 51.2c-19.2 6.4-38.4 12.8-57.6 12.8-89.6 0-160-70.4-160-160 0-19.2 6.4-38.4 12.8-57.6z m147.2-102.4c89.6 0 160 70.4 160 160 0 19.2-6.4 38.4-12.8 57.6l-51.2-51.2v-6.4c0-51.2-44.8-96-96-96l-57.6-51.2c19.2-6.4 38.4-12.8 57.6-12.8z" />
    </svg>
  );
};

export const Copy = () => {
  return (
    <svg
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      width="1em"
      height="1em"
      style={{ fill: 'currentcolor' }}
    >
      <path d="M878.272 981.312H375.36a104.64 104.64 0 0 1-104.64-104.64V375.36c0-57.792 46.848-104.64 104.64-104.64h502.912c57.792 0 104.64 46.848 104.64 104.64v502.912c-1.6 56.192-48.448 103.04-104.64 103.04z m-502.912-616.96a10.688 10.688 0 0 0-10.944 11.008v502.912c0 6.208 4.672 10.88 10.88 10.88h502.976c6.208 0 10.88-4.672 10.88-10.88V375.36a10.688 10.688 0 0 0-10.88-10.944H375.36z" />
      <path d="M192.64 753.28h-45.312a104.64 104.64 0 0 1-104.64-104.64V147.328c0-57.792 46.848-104.64 104.64-104.64h502.912c57.792 0 104.64 46.848 104.64 104.64v49.92a46.016 46.016 0 0 1-46.848 46.912 46.08 46.08 0 0 1-46.848-46.848v-49.984a10.688 10.688 0 0 0-10.944-10.944H147.328a10.688 10.688 0 0 0-10.944 10.88v502.976c0 6.208 4.672 10.88 10.88 10.88h45.312a46.08 46.08 0 0 1 46.848 46.912c0 26.496-21.824 45.248-46.848 45.248z" />
    </svg>
  );
};

export const Delete = () => {
  return (
    <svg
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      width="1em"
      height="1em"
      style={{ fill: 'currentcolor' }}
    >
      <path d="M341.312 85.312l64-85.312h213.376l64 85.312H960v85.376H64V85.312h277.312zM170.688 256h682.624v768H170.688V256zM256 341.312v597.376h512V341.312H256z m213.312 85.376v426.624H384V426.688h85.312z m170.688 0v426.624H554.688V426.688H640z" />
    </svg>
  );
};

export const Success = () => {
  return (
    <svg
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      width="1em"
      height="1em"
      style={{ fill: 'currentcolor' }}
    >
      <path d="M965.40416 342.76608c-19.50976-52.24704-47.744-100.41472-83.92064-143.16288-18.26688-21.58592-50.57408-24.27392-72.15872-6.0096-21.58464 18.26688-24.2752 50.5728-6.00832 72.15872C861.4336 334.42816 893.44 421.88032 893.44 512c0 210.32576-171.11424 381.44-381.44 381.44-210.32704 0-381.44-171.11424-381.44-381.44 0-210.32704 171.11296-381.44 381.44-381.44 60.48896 0 118.30784 13.72672 171.85152 40.8 25.2288 12.75648 56.03328 2.64704 68.7936-22.58816 12.76032-25.23392 2.64576-56.03456-22.58816-68.7936C662.05312 45.5936 588.68992 28.16 512 28.16c-65.29536 0-128.66432 12.8-188.34688 38.04416-57.62176 24.37248-109.36064 59.2512-153.7792 103.66976-44.41856 44.41856-79.29856 96.15744-103.66976 153.77792C40.96 383.3344 28.16 446.70464 28.16 512c0 65.29536 12.8 128.6656 38.04416 188.34688 24.37248 57.62176 59.2512 109.36064 103.66976 153.7792s96.15744 79.29856 153.7792 103.66976C383.33568 983.04 446.70464 995.84 512 995.84c65.29536 0 128.6656-12.8 188.34816-38.04416 57.62176-24.3712 109.36064-59.2512 153.77792-103.66976 44.41856-44.41856 79.29856-96.15744 103.66976-153.7792C983.04 640.6656 995.84 577.29536 995.84 512 995.84 453.79328 985.6 396.85504 965.40416 342.76608z" />
      <path d="M655.13472 324.41344l-40.77696 36.6464c-117.42976 111.25504-211.00288 248.38272-211.00288 248.38272l-68.58112-132.70528-155.79648 75.74144c65.9136 23.4944 166.75712 107.27424 233.29152 189.30176l0.18304 0.03584c39.0592-71.35616 175.5264-198.98112 272.97408-264.12928l38.28992-23.38432c15.08992-8.14848 28.28032-13.73824 38.80192-16.0768-30.0352-68.47104-3.69024-124.11776 0.58496-188.3136C726.8928 268.43776 690.35776 294.5984 655.13472 324.41344z" />
    </svg>
  );
};

export const drawConfig = [
  { value: 'point', label: '点', icon: Icons('point') },
  { value: 'line', label: '线', icon: Icons('line') },
  { value: 'polygon', label: '多边形', icon: Icons('polygon') },
  { value: 'rect', label: '矩形', icon: Icons('rect') },
  { value: 'circle', label: '圆', icon: Icons('circle') },
];

export const DRAW_COMMON_Z_INDEX = 100;

export const getDrawPointStyle = (styles: DrawStyle) => {
  const { shape, pointSize = 25 } = styles;
  return {
    point: {
      options: {
        blend: 'normal',
        zIndex: DRAW_COMMON_Z_INDEX,
        textOffset: [-10, 15],
        fontFamily: 'iconfont',
        iconfont: true,
      },
      normal: { size: pointSize, shape, stroke: '' },
      hover: { size: pointSize, shape, stroke: '' },
      active: { size: pointSize, shape, stroke: '' },
    },
  };
};

export const getDrawCommonStyle = (styles: DrawStyle) => {
  const { color, size, stroke, pointSize = 6 } = styles;
  return {
    point: {
      options: {
        zIndex: DRAW_COMMON_Z_INDEX,
      },
      normal: { color, size: pointSize, stroke },
      hover: { color, size: pointSize, stroke },
      active: { color, size: pointSize, stroke },
    },
    line: {
      normal: { color, size },
      hover: { color, size },
      active: { color, size },

      options: {
        zIndex: DRAW_COMMON_Z_INDEX,
      },
    },
    polygon: {
      normal: { color },
      hover: { color },
      active: { color },

      style: {
        opacity: 0.2,
      },
      options: {
        zIndex: DRAW_COMMON_Z_INDEX,
      },
    },
    midPoint: {
      normal: { color, size: pointSize, stroke },
      options: {
        zIndex: DRAW_COMMON_Z_INDEX,
      },
    },
    dashLine: {
      normal: { color, size },
      options: {
        zIndex: DRAW_COMMON_Z_INDEX,
      },
    },
  };
};

export const POPOVER_PLACEMENT_LEGEND = new Map<string | undefined, TooltipPlacement>([
  ['topleft', 'rightTop'],
  ['lefttop', 'rightTop'],
  ['topright', 'leftTop'],
  ['righttop', 'leftTop'],
  ['bottomleft', 'rightBottom'],
  ['leftbottom', 'rightBottom'],
  ['bottomright', 'leftBottom'],
  ['rightbottom', 'leftBottom'],
  [undefined, 'rightTop'],
]);
